(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,459823,(e,t,n)=>{var i=e.r(220250);t.exports=e.r(876168)(function(e,t,n){return t=t.toLowerCase(),e+(n?i(t):t)})},936209,(e,t,n)=>{t.exports=e.r(876168)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})},923064,738465,e=>{"use strict";let t;var n=e.i(843476),i=e.i(271645),l=e.i(537152),o=e.i(216024),r=e.i(527108),s=e.i(383066),a=e.i(447912),d=e.i(459823),u=e.i(809054),c=e.i(385658),p=e.i(909817),m=e.i(936209),h=e.i(312669),g=e.i(160191),f=e.i(797341);let x="structure",b=(0,l.defineLocaleResourceBundle)({locale:"en-US",namespace:x,resources:()=>e.A(543619)}),y=["_id","_type","_createdAt","_updatedAt","_rev"];function v(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...o]=n;if(!("fields"in t))return"";let r=t.fields.find(e=>e.name===l);if(!r){if(!y.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in r.type&&"reference"===r.type.name){let t=r.type.to;return`${l}->{${t.map(t=>e(t,o)).join(",")}}`}let s=o.length>0&&e(r.type,o),a=s?`{${s}}`:"";return o.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class j extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let w={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",DOCUMENT_TYPE_REQUIRED:"structure-document-type-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},S={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:x}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},C=[S,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:x}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function I(e,t,n){return e instanceof _?e.serialize({path:n,index:t}):e}class _{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new j("`title` is required for menu item",e.path,e.index,t).withHelpUrl(w.TITLE_REQUIRED)}if(!n&&!i)throw new j(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl(w.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new j("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl(w.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new _(this._context);return t.spec={...this.spec,...e},t}}function T(e,{by:t,title:n,i18n:i},l){let o=new _(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(a.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(o=o.i18n(i)),o}function R(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(C):C).map(t=>T(e,t,v(i,t.by))):[]}function P(e,t,n){return e instanceof E?e.serialize({path:n,index:t}):e}class E{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new E(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new E(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new E(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new j("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(w.ID_REQUIRED);if(!this._title)throw new j("`title` is required for a menu item group",e.path,this._id).withHelpUrl(w.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}}let D=/([^A-Za-z0-9-_.])/;function k(e,t,n){if("string"!=typeof e)throw new j(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(D)||[];if(i)throw new j(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new j("Structure node id cannot start with __edit__",t,n);return e}function M(e,t){if(t)return t;let n=(0,d.default)(e);return D.test(n)?(0,d.default)((0,u.default)(e)):n}class F{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:M(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:o}=this.spec;if(!t)throw new j("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(w.ID_REQUIRED);if(!o)throw new j("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(w.ID_REQUIRED);return{id:k(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>I(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>P(t,n,e.path))}}clone(e){let t=new F;return t.spec={...this.spec,...e},t}}class A{constructor(e){this.spec={id:(0,c.default)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new A;return t.spec={...this.spec,...e},t}}async function L(e,t){return await e(l.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,o.getPublishedId)(t)},{tag:"structure.resolve-type"})}class V{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||(0,m.default)(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new j("`id` is required for view item",e.path,e.index).withHelpUrl(w.ID_REQUIRED);if(!n)throw new j("`title` is required for view item",e.path,e.index).withHelpUrl(w.TITLE_REQUIRED);return{id:k(t,e.path,e.index),title:n,icon:i}}}function z(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class O extends V{constructor(e){const t=(e=>(0,l.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new j("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(w.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new O;return t.spec={...this.spec,...e},t}}class B extends V{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new B;return t.spec={...this.spec,...e},t}}let H=e=>new B(e),N=e=>new O(e);var $=Object.freeze({__proto__:null,ComponentViewBuilder:O,FormViewBuilder:B,GenericViewBuilder:V,component:N,form:H,maybeSerializeView:z});class U{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:M(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,o=e[t||e.length-1],r=this.spec.id||o&&`${o}`||"",s={id:r,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof r||!r)throw new j("`id` is required for document nodes",e,t,n).withHelpUrl(w.ID_REQUIRED);if(!s||!s.id)throw new j("document id (`id`) is required for document nodes",e,r,n).withHelpUrl(w.DOCUMENT_ID_REQUIRED);if(!s||!s.type)throw new j("document type (`schemaType`) is required for document nodes",e,r,n);let a=(this.spec.views&&this.spec.views.length>0?this.spec.views:[H()]).map((t,n)=>z(t,n,e)),d=a.map(e=>e.id),u=(0,p.default)(d.filter((e,t)=>d.includes(e,t+1)));if(u.length>0)throw new j(`document node has views with duplicate IDs: ${u.join(",  ")}`,e,r,n);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let o=i.type,r=l.slice(0,l.length-1),s=l[l.length-1];if(o||(o=await L(t,n)),!o)throw new j("Failed to resolve document, and no type provided in parameters.",r,s);return e({documentId:n,schemaType:o})})(this._context),id:k(r,e,t),type:"document",options:(l={id:(i=s).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:a}}clone(e={}){let t=new U(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}function G(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new U(e);if(!t)return n;let{id:i,type:l,template:o,templateParameters:r}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),o&&(n=n.initialValueTemplate(o,r)),t.child&&(n=n.child(t.child)),n}function W({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)}class q{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new j("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(w.ID_REQUIRED);if(!this.spec.templateId)throw new j("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(w.ID_REQUIRED);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new j("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(w.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new q(this._context);return t.spec={...this.spec,...e},t}}function K(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}function Y(e,t,n){return e instanceof q?e.serialize({path:n,index:t}):e}function X(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),o=t.title||l?.title||"Create",r={};l&&l.schemaType&&(r.type=l.schemaType),t.templateId&&(r.template=t.templateId);let s=t.parameters?[r,t.parameters]:r,d=l&&n.get(l.schemaType),u=t.i18n||l?.i18n,c=new _(e).title(o).icon(l&&l.icon||d?.icon||a.AddIcon).intent({type:"create",params:s});return u&&(c=c.i18n(u)),c.serialize()})}let Q=Symbol("Document type list canHandleIntent"),J=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",o=n.options?.params||{},r=n.schemaTypeName?[n.schemaTypeName]:el(l,o),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&r.includes(t.type)||i&&r.includes(t.type)};J.identity=Q;let Z=["default","card","media","detail","block"];function ee(){}let et=(e,t,{pane:n,index:i})=>i<=1&&J(e,t,{pane:n});class en{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:M(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!Z.includes(i))throw new j(`\`layout\` must be one of ${Z.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>Y(e,t,n));return{id:k(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||ee,canHandleIntent:this.spec.canHandleIntent||et,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>I(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>P(e,t,n))}}}class ei extends en{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new j("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(w.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new j("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl(w.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,h.generateHelpUrl)(w.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||L(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new U(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||l.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new j(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl(w.QUERY_PROVIDED_FOR_FILTER);return n})(this.spec,e)}}}clone(e){let t=new ei(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:o,params:r}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(el(o,r)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:a.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=el(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function el(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let eo=e=>"listItem"===e.type,er=(e,t,n)=>(n.pane.items||[]).filter(ec).some(e=>e.schemaType.name===t.type&&e._id===t.id)||et(e,t,n),es=(e,t)=>{let n=(t.parent.items.filter(eo).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class ea extends en{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new j("`id` is required for lists",e.path,e.index).withHelpUrl(w.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new j("`items` must be an array of items",e.path,e.index).withHelpUrl(w.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),o=n.map((e,t)=>(function(e,t,n){if(e instanceof ed)return e.serialize({path:n,index:t});if(e instanceof A)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let o=e&&e.type||(e instanceof ea?"ListBuilder":(i=e,(0,l.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new j(`List items must be of type "listItem", got "${o}"${"array"===o?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl(w.INVALID_LIST_ITEM)}return e})(e,t,i)),r=o.filter((e,t)=>(0,g.default)(o,{id:e.id},t+1));if(r.length>0){let t=r.map(e=>e.id).slice(0,5),n=r.length>5?`${t.join(", ")}...`:t.join(", ");throw new j(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl(w.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||er,child:this.spec.child||es,items:o}}clone(e){let t=new ea(this._context);return t.spec={...this.spec,...e},t}}class ed{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:M(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new j("`id` is required for list items",e.path,e.index).withHelpUrl(w.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new j("`title` is required for list items",e.path,t).withHelpUrl(w.TITLE_REQUIRED);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new j(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl(w.SCHEMA_TYPE_NOT_FOUND);l=n}let o={path:e.path.concat(t),hint:"child"},r=i instanceof F||i instanceof ei||i instanceof U||i instanceof ea?i.serialize(o):i;if("function"==typeof r){let e=r;r=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:k(t,e.path,e.index),schemaType:l,child:r,title:n,type:"listItem"}}clone(e){let t=new ed(this._context);return t.spec={...this.spec,...e},t}}class eu extends ed{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new j("`schemaType` is required for document list items",e.path,e.index).withHelpUrl(w.SCHEMA_TYPE_REQUIRED);let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new U(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new eu(this._context);return t.spec={...this.spec,...e},t}}function ec(e){return(0,l.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class ep extends ei{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new ep(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new ep(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===Q?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let em=["sanity.imageAsset","sanity.fileAsset"];function eh(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!em.includes(e))})(e).map(t=>eg(e,t))}function eg(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,f.default)(t);return new ed(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,o="list"===l.type?l.items.find(e=>e.id===n):null,r=ef(e,t);return o&&o.title&&(r=r.title(o.title)),r})}function ef(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,o="string"==typeof l?l:l.name,r="string"==typeof t?{}:t,s=n.get(o);if(!s)throw Error(`Schema type with name "${o}" not found`);let d=s.title||(0,f.default)(o);return new ep(e).id(r.id||o).title(r.title||d).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(S.by).menuItemGroups(r.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:x}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:x}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:x}}}]).child(r.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(r.canHandleIntent||J).menuItems(r.menuItems||[...R(e,s),new _(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:x}}).title("Compact view").icon(a.StackCompactIcon).action("setLayout").params({layout:"default"}),new _(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:x}}).title("Detailed view").icon(a.StackIcon).action("setLayout").params({layout:"detail"})])}function ex({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,l.getConfigContextFromSource)(t),r={...t,getStructureBuilder:()=>a,resolveDocumentNode:t=>{let n=e?.(a,{...t,...i})||new U(r);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,o.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},a={defaults:()=>{let e;return e=eh(r),new ea(r).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:x}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>ef(r,...e),documentTypeListItem:(...e)=>eg(r,...e),documentTypeListItems:(...e)=>eh(r,...e),document:(...e)=>new U(r,...e),documentWithInitialValueTemplate:(...e)=>W(r,...e),defaultDocument:r.resolveDocumentNode,list:(...e)=>new ea(r,...e),listItem:(...e)=>new ed(r,...e),menuItem:(...e)=>new _(r,...e),menuItemGroup:(...e)=>new E(r,...e),menuItemsFromInitialValueTemplateItems:(...e)=>X(r,...e),documentList:(...e)=>new ei(r,...e),documentListItem:(...e)=>new eu(r,...e),orderingMenuItem:(...e)=>T(r,...e),orderingMenuItemsForType:(...e)=>R(r,...e),editor:(...e)=>G(r,...e),defaultInitialValueTemplateItems:(...e)=>K(r,...e),initialValueTemplateItem:(e,t)=>new q(r,{id:e,parameters:t,templateId:e}),component:e=>(0,s.isValidElementType)(e)?new F().component(e):new F(e),divider:e=>new A(e),view:$,context:r};return a}function eb({defaultDocumentNode:e,structure:t,children:o}){let[s,a]=(0,i.useState)(!1),d=(0,l.useSource)(),u=(0,l.useConfigContextFromSource)(d),c=(0,l.useDocumentStore)(),{perspectiveStack:p}=(0,l.usePerspective)(),m=(0,i.useMemo)(()=>ex({defaultDocumentNode:e,source:d,perspectiveStack:p}),[e,d,p]),h=(0,i.useMemo)(()=>t?t(m,{...u,documentStore:c,perspectiveStack:p}):m.defaults(),[t,m,u,c,p]),g=(0,i.useMemo)(()=>({backButton:s,resizablePanes:!s,reviewChanges:!s,splitPanes:!s,splitViews:!s}),[s]),f=(0,i.useMemo)(()=>({features:g,layoutCollapsed:s,setLayoutCollapsed:a,rootPaneNode:h,structureContext:m.context}),[g,s,h,m.context]);return(0,n.jsx)(r.StructureToolContext.Provider,{value:f,children:o})}e.s(["ComponentBuilder",()=>F,"ComponentViewBuilder",()=>O,"DEFAULT_INTENT_HANDLER",()=>Q,"DocumentBuilder",()=>U,"DocumentListBuilder",()=>ei,"DocumentListItemBuilder",()=>eu,"DocumentTypeListBuilder",()=>ep,"FormViewBuilder",()=>B,"GenericListBuilder",()=>en,"GenericViewBuilder",()=>V,"HELP_URL",()=>w,"InitialValueTemplateItemBuilder",()=>q,"ListBuilder",()=>ea,"ListItemBuilder",()=>ed,"MenuItemBuilder",()=>_,"MenuItemGroupBuilder",()=>E,"SerializeError",()=>j,"StructureToolProvider",()=>eb,"component",()=>N,"createStructureBuilder",()=>ex,"defaultInitialValueTemplateItems",()=>K,"defaultIntentChecker",()=>J,"documentFromEditor",()=>G,"documentFromEditorWithInitialValue",()=>W,"form",()=>H,"getExtendedProjection",()=>v,"getOrderingMenuItem",()=>T,"getOrderingMenuItemsForSchemaType",()=>R,"getTypeNamesFromFilter",()=>el,"isDocumentListItem",()=>ec,"maybeSerializeInitialValueTemplateItem",()=>Y,"maybeSerializeMenuItem",()=>I,"maybeSerializeMenuItemGroup",()=>P,"maybeSerializeView",()=>z,"menuItemsFromInitialValueTemplateItems",()=>X,"shallowIntentChecker",()=>et,"structureLocaleNamespace",()=>x,"structureUsEnglishLocaleBundle",()=>b],738465);var ey=e.i(881933),ev=e.i(341085),ej=e.i(537634),ew=e.i(652468),eS=e.i(815321),eC=e.i(997053),eI=e.i(872774),e_=e.i(846932),eT=e.i(88653),eR=e.i(597083),eP=e.i(201226),eE=e.i(835870),eD=e.i(898892),ek=e.i(368233),eM=e.i(100374),eF=e.i(449242),eA=e.i(94059),eL=e.i(992481),eV=e.i(58832),ez=e.i(827492),eO=e.i(218692),eB=e.i(374e3),eH=e.i(134352),eN=e.i(827341),e$=e.i(711308),eU=e.i(960739),eG=e.i(722249),eW=e.i(10839),eq=e.i(484973),eK=e.i(277497),eY=e.i(800879),eX=e.i(408659),eQ=e.i(245281),eJ=e.i(993817),eZ=e.i(602400),e0=e.i(839338),e1=e.i(878856),e2=e.i(330823),e3=e.i(807136),e4=e.i(817312),e5=e.i(96623),e6=e.i(172441),e8=e.i(254201),e7=e.i(873904),e9=e.i(55083),te=e.i(629437),tt=e.i(789196),tn=e.i(424981),ti=e.i(970725),tl=e.i(774010),to=e.i(972745),tr=e.i(273638),ts=e.i(482065),ta=e.i(348433),td=e.i(147956),tu=e.i(645456);let tc=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,tp=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},tm=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:o,clientWidth:r}=e;return{x:l?l/Math.max(1e-5,o-r):0,y:t?t/Math.max(1e-5,n-i):0}};function th(){return(th=Object.assign.bind()).apply(null,arguments)}function tg(e){return e.matches("body *")?e:window}class tf{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(tm(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=th({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tc(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!tp(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(tm(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tg(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tg(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;n&&o&&t.scrollTo({top:o*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return tm(this.elements.find(e=>tc(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=th({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var tx=e.i(591692),tb=e.i(432892),ty=e.i(224019),tv=e.i(653810),tj=e.i(760719),tw=e.i(787427),tS=e.i(42905),tC=e.i(663514),tI=e.i(349659),t_=e.i(462576),tT=e.i(47635),tR=e.i(83107),tP=e.i(945736),tE=e.i(991426),tD=e.i(408551);function tk(e,t){return"function"==typeof e?e(t):e}function tM(e,t){return n=>{t.setState(t=>({...t,[e]:tk(n,t[e])}))}}function tF(e){return e instanceof Function}function tA(e,t,n){let i,l=[];return o=>{let r,s;n.key&&n.debug&&(r=Date.now());let a=e(o);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-r)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%câ± ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function tL(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(247167);let tV="debugHeaders";function tz(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function tO(e,t,n,i){var l,o;let r=0,s=function(e,t){void 0===t&&(t=1),r=Math.max(r,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let r,s=[...o].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?r=e.column.parent:(r=e.column,d=!0),s&&(null==s?void 0:s.column)===r)s.subHeaders.push(e);else{let l=tz(n,r,{id:[i,t,r.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${o.filter(e=>e.column===r).length}`:void 0,depth:t,index:o.length});l.subHeaders.push(e),o.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(o,t-1)};d(t.map((e,t)=>tz(n,e,{depth:r,index:t})),r-1),a.reverse();let u=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],u(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return u(null!=(l=null==(o=a[0])?void 0:o.headers)?l:[]),a}let tB=(e,t,n,i,l,o,r)=>{let s={id:t,index:i,original:n,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:tA(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:tA(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),tL(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),tL(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:tA(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),tL(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},tH=(e,t,n)=>{var i,l;let o=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(o))};tH.autoRemove=e=>tQ(e);let tN=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};tN.autoRemove=e=>tQ(e);let t$=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};t$.autoRemove=e=>tQ(e);let tU=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};tU.autoRemove=e=>tQ(e);let tG=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});tG.autoRemove=e=>tQ(e)||!(null!=e&&e.length);let tW=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});tW.autoRemove=e=>tQ(e)||!(null!=e&&e.length);let tq=(e,t,n)=>e.getValue(t)===n;tq.autoRemove=e=>tQ(e);let tK=(e,t,n)=>e.getValue(t)==n;tK.autoRemove=e=>tQ(e);let tY=(e,t,n)=>{let[i,l]=n,o=e.getValue(t);return o>=i&&o<=l};tY.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(i)?-1/0:i,r=null===n||Number.isNaN(l)?1/0:l;if(o>r){let e=o;o=r,r=e}return[o,r]},tY.autoRemove=e=>tQ(e)||tQ(e[0])&&tQ(e[1]);let tX={includesString:tH,includesStringSensitive:tN,equalsString:t$,arrIncludes:tU,arrIncludesAll:tG,arrIncludesSome:tW,equals:tq,weakEquals:tK,inNumberRange:tY};function tQ(e){return null==e||""===e}function tJ(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let tZ={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},t0=()=>({left:[],right:[]}),t1={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},t2=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),t3=null;function t4(e){return"touchstart"===e.type}function t5(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let t6=()=>({pageIndex:0,pageSize:10}),t8=()=>({top:[],bottom:[]}),t7=(e,t,n,i,l)=>{var o;let r=l.getRow(t,!0);n?(r.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),r.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(o=r.subRows)&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(t=>t7(e,t.id,n,i,l))};function t9(e,t){let n=e.getState().rowSelection,i=[],l={},o=function(e,t){return e.map(e=>{var t;let r=ne(e,n);if(r&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),r)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:i,rowsById:l}}function ne(e,t){var n;return null!=(n=t[e.id])&&n}function nt(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,o=!1;return e.subRows.forEach(e=>{if((!o||l)&&(e.getCanSelect()&&(ne(e,t)?o=!0:l=!1),e.subRows&&e.subRows.length)){let n=nt(e,t);"all"===n?o=!0:("some"===n&&(o=!0),l=!1)}}),l?"all":!!o&&"some"}let nn=/([0-9]+)/gm;function ni(e,t){return e===t?0:e>t?1:-1}function nl(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function no(e,t){let n=e.split(nn).filter(Boolean),i=t.split(nn).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),o=parseInt(t,10),r=[l,o].sort();if(isNaN(r[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>o)return 1;if(o>l)return -1}return n.length-i.length}let nr={alphanumeric:(e,t,n)=>no(nl(e.getValue(n)).toLowerCase(),nl(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>no(nl(e.getValue(n)),nl(t.getValue(n))),text:(e,t,n)=>ni(nl(e.getValue(n)).toLowerCase(),nl(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>ni(nl(e.getValue(n)),nl(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>ni(e.getValue(n),t.getValue(n))},ns=[{createTable:e=>{e.getHeaderGroups=tA(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var o,r;let s=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(r=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[];return tO(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},tL(e.options,tV,"getHeaderGroups")),e.getCenterHeaderGroups=tA(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>tO(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),tL(e.options,tV,"getCenterHeaderGroups")),e.getLeftHeaderGroups=tA(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return tO(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},tL(e.options,tV,"getLeftHeaderGroups")),e.getRightHeaderGroups=tA(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return tO(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},tL(e.options,tV,"getRightHeaderGroups")),e.getFooterGroups=tA(()=>[e.getHeaderGroups()],e=>[...e].reverse(),tL(e.options,tV,"getFooterGroups")),e.getLeftFooterGroups=tA(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),tL(e.options,tV,"getLeftFooterGroups")),e.getCenterFooterGroups=tA(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),tL(e.options,tV,"getCenterFooterGroups")),e.getRightFooterGroups=tA(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),tL(e.options,tV,"getRightFooterGroups")),e.getFlatHeaders=tA(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),tL(e.options,tV,"getFlatHeaders")),e.getLeftFlatHeaders=tA(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),tL(e.options,tV,"getLeftFlatHeaders")),e.getCenterFlatHeaders=tA(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),tL(e.options,tV,"getCenterFlatHeaders")),e.getRightFlatHeaders=tA(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),tL(e.options,tV,"getRightFlatHeaders")),e.getCenterLeafHeaders=tA(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tL(e.options,tV,"getCenterLeafHeaders")),e.getLeftLeafHeaders=tA(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tL(e.options,tV,"getLeftLeafHeaders")),e.getRightLeafHeaders=tA(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tL(e.options,tV,"getRightLeafHeaders")),e.getLeafHeaders=tA(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,o,r,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(o=null==(r=t[0])?void 0:r.headers)?o:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},tL(e.options,tV,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:tM("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=tA(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),tL(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=tA(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],tL(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>tA(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),tL(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:tM("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=tA(e=>[t5(t,e)],t=>t.findIndex(t=>t.id===e.id),tL(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=t5(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=t5(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=tA(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var o=l;if(!(null!=t&&t.length)||!n)return o;let r=o.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(e=>o.find(t=>t.id===e)).filter(Boolean),...r]},tL(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:t0(),...e}),getDefaultOptions:e=>({onColumnPinningChange:tM("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,o,r,s,a;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"left":!!r&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=tA(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},tL(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=tA(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),tL(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=tA(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),tL(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?t0():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:t0())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let o=e.getState().columnPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.left)?void 0:i.length)||(null==(l=o.right)?void 0:l.length))},e.getLeftLeafColumns=tA(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tL(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=tA(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tL(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=tA(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},tL(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:tM("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?tX.includesString:"number"==typeof i?tX.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?tX.equals:Array.isArray(i)?tX.arrIncludes:tX.weakEquals},e.getFilterFn=()=>{var n,i;return tF(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:tX[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let o=e.getFilterFn(),r=null==t?void 0:t.find(t=>t.id===e.id),s=tk(n,r?r.value:void 0);if(tJ(o,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return r?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=tk(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&tJ(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:tM("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>tX.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return tF(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:tX[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:tM("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nr.datetime;if("string"==typeof n&&(i=!0,n.split(nn).length>1))return nr.alphanumeric}return i?nr.text:nr.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return tF(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nr[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),o=null!=n;t.setSorting(r=>{let s,a=null==r?void 0:r.find(t=>t.id===e.id),d=null==r?void 0:r.findIndex(t=>t.id===e.id),u=[],c=o?n:"desc"===l;if("toggle"!=(s=null!=r&&r.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=r&&r.length&&d!==r.length-1?"replace":a?"toggle":"replace")||o||l||(s="remove"),"add"===s){var p;(u=[...r,{id:e.id,desc:c}]).splice(0,u.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else u="toggle"===s?r.map(t=>t.id===e.id?{...t,desc:c}:t):"remove"===s?r.filter(t=>t.id!==e.id):[{id:e.id,desc:c}];return u})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let o=e.getFirstSortDir(),r=e.getIsSorted();return r?(r===o||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===r?"asc":"desc"):o},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:tM("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?tZ.sum:"[object Date]"===Object.prototype.toString.call(i)?tZ.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return tF(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:tZ[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:tM("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let o=!0===i||!!(null!=i&&i[e.id]),r={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{r[e]=!0}):r=i,n=null!=(l=n)?l:!o,!o&&n)return{...r,[e.id]:!0};if(o&&!n){let{[e.id]:t,...n}=r;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...t6(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:tM("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>tk(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?t6():null!=(n=e.initialState.pagination)?n:t6())},e.setPageIndex=t=>{e.setPagination(n=>{let i=tk(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,tk(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=tk(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=tA(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},tL(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:t8(),...e}),getDefaultOptions:e=>({onRowPinningChange:tM("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let o=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],r=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,i,l,o,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=r&&r.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=r&&r.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=r&&r.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=r&&r.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"top":!!r&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let o=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==o?void 0:o.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?t8():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:t8())},e.getIsSomeRowsPinned=t=>{var n,i,l;let o=e.getState().rowPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.top)?void 0:i.length)||(null==(l=o.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=tA(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),tL(e.options,"debugRows","getTopRows")),e.getBottomRows=tA(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),tL(e.options,"debugRows","getBottomRows")),e.getCenterRows=tA(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},tL(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:tM("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{t7(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=tA(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?t9(e,n):{rows:[],flatRows:[],rowsById:{}},tL(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=tA(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?t9(e,n):{rows:[],flatRows:[],rowsById:{}},tL(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=tA(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?t9(e,n):{rows:[],flatRows:[],rowsById:{}},tL(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(o=>{var r;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return o;let s={...o};return t7(s,e.id,n,null==(r=null==i?void 0:i.selectChildren)||r,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return ne(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===nt(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===nt(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>t1,getInitialState:e=>({columnSizing:{},columnSizingInfo:t2(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tM("columnSizing",e),onColumnSizingInfoChange:tM("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:t1.minSize,null!=(i=null!=o?o:e.columnDef.size)?i:t1.size),null!=(l=e.columnDef.maxSize)?l:t1.maxSize)},e.getStart=tA(e=>[e,t5(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),tL(t.options,"debugColumns","getStart")),e.getAfter=tA(e=>[e,t5(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),tL(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return o=>{if(!i||!l||(null==o.persist||o.persist(),t4(o)&&o.touches&&o.touches.length>1))return;let r=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=t4(o)?Math.round(o.touches[0].clientX):o.clientX,d={},u=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let o="rtl"===t.options.columnResizeDirection?-1:1,r=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*o,s=Math.max(r/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:r,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},c=e=>{u("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null),m={moveHandler:e=>u("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),c(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),u("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),c(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof t3)return t3;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return t3=e}()&&{passive:!1};t4(o)?(null==p||p.addEventListener("touchmove",h.moveHandler,g),null==p||p.addEventListener("touchend",h.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?t2():null!=(n=e.initialState.columnSizingInfo)?n:t2())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function na(e,t){var n,l,o;let r;return e?"function"==typeof(l=n=e)&&(r=Object.getPrototypeOf(l)).prototype&&r.prototype.isReactComponent||"function"==typeof n||"object"==typeof(o=n)&&"symbol"==typeof o.$$typeof&&["react.memo","react.forward_ref"].includes(o.$$typeof.description)?i.createElement(e,t):e:null}let nd="diffView",nu="previousDocument",nc="nextDocument";function np(){let e,t,n,i=(0,ey.c)(9),{navigate:l,state:o}=(0,eP.useRouter)();i[0]!==l||i[1]!==o?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,r={...(0,ta.default)(o._searchParams),...t?{[nd]:t}:{},...n?{[nu]:[n.type,n.id].join(",")}:{},...i?{[nc]:[i.type,i.id].join(",")}:{}};l({...o,_searchParams:(0,td.default)(r)})},i[0]=l,i[1]=o,i[2]=e):e=i[2];let r=e;i[3]!==l||i[4]!==o?(t=()=>{l({...o,_searchParams:(o._searchParams??[]).filter(nm)})},i[3]=l,i[4]=o,i[5]=t):t=i[5];let s=t;return i[6]!==s||i[7]!==r?(n={navigateDiffView:r,exitDiffView:s},i[6]=s,i[7]=r,i[8]=n):n=i[8],n}function nm(e){let[t]=e;return![nd,nu,nc].includes(t)}let nh=["version"];function ng({onParamsError:e}={}){let{state:t}=(0,eP.useRouter)(),n=new URLSearchParams(t._searchParams),l=n.get(nu),o=n.get(nc),r=n.get(nd),s=[l,o,r].some(e=>null!==e),a=(0,i.useMemo)(()=>(function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,o]=e.split(",").filter(Boolean),[r,s]=t.split(",").filter(Boolean);return nh.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof o>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof r>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:o},next:{type:r,id:s}}}}})({previousDocument:l??"",nextDocument:o??"",mode:r??""}),[r,o,l]);return(0,i.useEffect)(()=>{"error"===a.result&&s&&e?.(a.errors)},[s,e,a]),"error"===a.result?{isActive:!1}:{state:"ready",isActive:!0,...a.params}}function nf(e){return null!==e}function nx(e,t){return(0,o.isPublishedId)(e)?"published":(0,o.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,l.getReleaseIdFromReleaseDocumentId)(t)===(0,o.getVersionFromId)(e))}let nb=eC.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,ny=eC.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,nv=({documentId:e,state:t})=>{let{t:r}=(0,l.useTranslation)(x),{data:s}=(0,l.useDocumentVersions)({documentId:e}),{exitDiffView:d,navigateDiffView:u}=np(),{documents:c}=ng(),p=(0,l.useActiveReleases)(),m=s.flatMap(e=>(0,o.getVersionFromId)(e)??[]),h=(0,i.useMemo)(()=>p.data.filter(e=>{let t=(0,l.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&m.includes(t)}),[p.data,m]),g=(0,i.useCallback)(e=>{"u">typeof c?.previous&&u({previousDocument:{...c.previous,id:e}})},[c?.previous,u]),f=(0,i.useCallback)(e=>{"u">typeof c?.next&&u({nextDocument:{...c.next,id:e}})},[c?.next,u]);return(0,n.jsxs)(nb,{children:[(0,n.jsxs)(ny,{children:[(0,n.jsx)(ev.Box,{padding:4,children:(0,n.jsx)(ev.Text,{as:"h1",size:1,muted:!0,children:r("compare-versions.title")})}),"u">typeof c?.previous&&(0,n.jsx)(nj,{releases:h,onSelectRelease:g,role:"previous",documentId:e,state:t,document:c.previous})]}),(0,n.jsx)(ev.Flex,{align:"center",paddingX:3,children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(a.TransferIcon,{})})}),(0,n.jsxs)(ny,{children:["u">typeof c?.next&&(0,n.jsx)(nj,{releases:h,onSelectRelease:f,role:"next",documentId:e,state:t,document:c.next}),(0,n.jsx)(ev.Box,{padding:3,style:{justifySelf:"end"},children:(0,n.jsx)(ev.Button,{icon:a.CloseIcon,mode:"bleed",onClick:d,padding:2})})]})]})},nj=({releases:e=[],onSelectRelease:t,role:r,documentId:s,document:d})=>{let{published:u,draft:c}=(0,l.useEditState)((0,o.getPublishedId)(d.id),d.type),p=(0,i.useMemo)(()=>nx(d.id,e),[d.id,e]),{t:m}=(0,l.useTranslation)(x),{t:g}=(0,l.useTranslation)(),{document:{drafts:{enabled:f}}}=(0,l.useWorkspace)();return(0,n.jsx)(h.MenuButton,{id:r,button:(0,n.jsx)(ev.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function({selected:e,tCore:t,tStructure:i}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,l.isReleaseDocument)(e)){let i=e?(0,l.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,n.jsx)(l.ReleaseAvatar,{padding:1,tone:i}),iconRight:e&&(0,l.isReleaseScheduledOrScheduling)(e)?(0,n.jsx)(a.LockIcon,{}):void 0,tone:i}}let o="published"===e?"positive":"caution";return{text:i(["compare-versions.status",e].join(".")),icon:(0,n.jsx)(l.ReleaseAvatar,{padding:1,tone:o}),tone:o}}({selected:p,tCore:g,tStructure:m})}),menu:(0,n.jsxs)(ev.Menu,{children:[u&&(0,n.jsx)(nw,{type:"published",onSelect:t,isSelected:"published"===p,documentId:s}),f&&c&&(0,n.jsx)(nw,{type:"draft",onSelect:t,isSelected:"draft"===p,documentId:s}),e.map(e=>(0,n.jsx)(nw,{release:e,onSelect:t,isSelected:"string"!=typeof p&&p?._id===e._id,documentId:s},e._id))]})})},nw=({type:e,release:t,onSelect:r,isSelected:s,documentId:d})=>{let{t:u}=(0,l.useTranslation)(),{t:c}=(0,l.useTranslation)(x),p=(0,i.useCallback)(()=>{"draft"===e?r((0,o.getDraftId)(d)):"published"===e?r((0,o.getPublishedId)(d)):"u">typeof t?._id&&r((0,o.getVersionId)(d,(0,l.getReleaseIdFromReleaseDocumentId)(t._id)))},[e,r,d,t?._id]);if(e)return(0,n.jsx)(ev.MenuItem,{padding:1,paddingRight:3,onClick:p,pressed:s,children:(0,n.jsxs)(ev.Flex,{gap:1,children:[(0,n.jsx)(l.ReleaseAvatar,{padding:2,tone:"published"===e?"positive":"caution"}),(0,n.jsx)(ev.Box,{paddingY:2,children:(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:c(["compare-versions.status",e].join("."))})})]})});let m=t?(0,l.getReleaseTone)(t):"neutral";return(0,n.jsx)(ev.MenuItem,{padding:1,paddingRight:3,onClick:p,pressed:s,children:(0,n.jsxs)(ev.Flex,{gap:1,children:[(0,n.jsx)(l.ReleaseAvatar,{padding:2,tone:m}),(0,n.jsxs)(ev.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:t.metadata.title||u("release.placeholder-untitled-release")}),["asap","undecided"].includes(t.metadata.releaseType)&&(0,n.jsx)(ev.Text,{muted:!0,size:1,children:u(`release.type.${t.metadata.releaseType}`)}),"scheduled"===t.metadata.releaseType&&(0,n.jsx)(ev.Text,{muted:!0,size:1,children:(0,l.formatRelativeLocalePublishDate)(t)})]}),(0,n.jsx)(ev.Flex,{flex:"none",children:(0,l.isReleaseScheduledOrScheduling)(t)&&(0,n.jsx)(ev.Box,{padding:2,children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(a.LockIcon,{})})})})]})})},nS=eC.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function nC(e){return e.document?.components?.unstable_layout}function nI(e){return e.path}function n_(e,t){return(0,tb.default)(e.path,t.path)}let nT=eC.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,nR=(0,eC.styled)(ev.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,nP=(0,eC.styled)(ev.Container)`
  width: auto;
`,nE=(0,i.forwardRef)(function(e,t){let o,s,a,d,u,c,p,m,h,g,f,x,b=(0,ey.c)(36),{role:y,documentType:v,documentId:j,scrollElement:w,syncChannel:S,compareDocument:C}=e,I=(0,i.useRef)(null),[_,T]=(0,i.useState)(null),[R,P]=(0,i.useState)(null);b[0]!==C||b[1]!==j||b[2]!==v||b[3]!==y||b[4]!==w||b[5]!==S?(o=()=>(0,n.jsx)(nD,{compareDocument:C,documentId:j,documentType:v,role:y,scrollElement:w,syncChannel:S}),b[0]=C,b[1]=j,b[2]=v,b[3]=y,b[4]=w,b[5]=S,b[6]=o):o=b[6];let E=o;b[7]!==E?(s={pick:nC,defaultComponent:E},b[7]=E,b[8]=s):s=b[8];let D=(0,l.useMiddlewareComponents)(s);b[9]===Symbol.for("react.memo_cache_sentinel")?(a={isInteractive:!1,onOpenReviewChanges:tx.default,onSetFocus:tx.default,isReviewChangesOpen:!1},b[9]=a):a=b[9];let k=`${y}-document`;b[10]!==k?(d={"--grid-area":k},b[10]=k,b[11]=d):d=b[11];let M=d,F="next"===y,A="next"!==y&&"none";b[12]!==A?(u={"--scrollbar-width":A},b[12]=A,b[13]=u):u=b[13];let L=u;return b[14]!==D||b[15]!==j||b[16]!==v?(c=(0,n.jsx)(ej.DialogProvider,{position:"absolute",children:(0,n.jsx)(nP,{ref:I,padding:4,width:1,children:(0,n.jsx)(D,{documentId:j,documentType:v})})}),b[14]=D,b[15]=j,b[16]=v,b[17]=c):c=b[17],b[18]!==_||b[19]!==c?(p=(0,n.jsx)(ev.PortalProvider,{element:_,children:c}),b[18]=_,b[19]=c,b[20]=p):p=b[20],b[21]!==t||b[22]!==L||b[23]!==p?(m=(0,n.jsx)(nT,{ref:t,style:L,children:p}),b[21]=t,b[22]=L,b[23]=p,b[24]=m):m=b[24],b[25]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:T}),b[25]=h):h=b[25],b[26]!==m||b[27]!==M||b[28]!==F?(g=(0,n.jsxs)(nR,{ref:P,style:M,borderLeft:F,children:[m,h]}),b[26]=m,b[27]=M,b[28]=F,b[29]=g):g=b[29],b[30]!==R||b[31]!==g?(f=(0,n.jsx)(ev.BoundaryElementProvider,{element:R,children:g}),b[30]=R,b[31]=g,b[32]=f):f=b[32],b[33]!==w||b[34]!==f?(x=(0,n.jsx)(r.ReviewChangesContext.Provider,{value:a,children:(0,n.jsx)(l.ChangeIndicatorsTracker,{children:(0,n.jsx)(l.VirtualizerScrollInstanceProvider,{scrollElement:w,containerElement:I,children:f})})}),b[33]=w,b[34]=f,b[35]=x):x=b[35],x}),nD=({role:e,documentType:t,documentId:s,syncChannel:a,compareDocument:d})=>{var u,c;let p=function(e){let t,n,i,r=(0,ey.c)(4),{compareDocument:s}=e;r[0]!==s.id?(t=(0,o.getPublishedId)(s.id),r[0]=s.id,r[1]=t):t=r[1];let a=s.type;r[2]!==s.id?(n=(0,o.getVersionFromId)(s.id),r[2]=s.id,r[3]=n):n=r[3];let d=(0,l.useEditState)(t,a,"low",n);e:{if((0,o.isVersionId)(s.id)){i=d.version??void 0;break e}if((0,o.isDraftId)(s.id)){i=d.draft??void 0;break e}if((0,o.isPublishedId)(s.id)){i=d.published??void 0;break e}i=void 0}return i}({compareDocument:d}),{data:m}=(0,l.useActiveReleases)(),[h]=(0,i.useState)(()=>(0,l.createPatchChannel)()),g=(0,i.useMemo)(()=>nx(s,m),[s,m]),{formState:f,onChange:x,onFocus:b,onBlur:y,onSetActiveFieldGroup:v,onSetCollapsedFieldSet:j,onSetCollapsedPath:w,collapsedFieldSets:S,ready:C,collapsedPaths:I,schemaType:_,value:T,onProgrammaticFocus:R,...P}=(0,l.useDocumentForm)({documentId:(0,o.getPublishedId)(s),documentType:t,selectedPerspectiveName:(u=s,(0,o.isVersionId)(u)?(0,o.getVersionFromId)(u):(0,o.isPublishedId)(u)?"published":void 0),releaseId:(0,o.getVersionFromId)(s),comparisonValue:p,displayInlineChanges:!0}),E=null===f||!C,D=function(e){let t,n,i,l=(0,ey.c)(11),{syncChannel:o,id:r}=e;l[0]!==r||l[1]!==o?(t=e=>o.next({...e,source:r}),l[0]=r,l[1]=o,l[2]=t):t=l[2];let s=t;if(l[3]!==r||l[4]!==o){let e;l[6]!==r?(e=e=>{let{source:t}=e;return t!==r},l[6]=r,l[7]=e):e=l[7],n=o.pipe((0,eB.distinctUntilChanged)(n_),(0,eG.filter)(e),(0,eA.map)(nI)),l[3]=r,l[4]=o,l[5]=n}else n=l[5];let a=n;return l[8]!==a||l[9]!==s?(i={path:a,push:s},l[8]=a,l[9]=s,l[10]=i):i=l[10],i}({id:e,syncChannel:a}),k=(0,i.useCallback)(t=>{P.onPathOpen(t),D.push({source:e,path:t})},[P,D,e]);return(0,i.useEffect)(()=>{let e=D.path.subscribe(R);return()=>e.unsubscribe()},[R,D.path]),E?(0,n.jsx)(l.LoadingBlock,{showText:!0}):(0,n.jsx)(r.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,n.jsx)(l.FormBuilder,{__internal_patchChannel:h,id:`diffView-pane-${e}`,onChange:x,onPathFocus:b,onPathOpen:k,onPathBlur:y,onFieldGroupSelect:v,onSetFieldSetCollapsed:j,onSetPathCollapsed:w,collapsedPaths:I,collapsedFieldSets:S,focusPath:f.focusPath,changed:f.changed,focused:f.focused,groups:f.groups,validation:f.validation,members:f.members,perspective:"draft"===(c=g)?"drafts":c,hasUpstreamVersion:f.hasUpstreamVersion,presence:f.presence,schemaType:_,value:T,compareValue:p})})},nk=eC.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,nM=e=>{let t,i,l=(0,ey.c)(6),{children:o,documentId:r,documentType:s}=e;l[0]!==r||l[1]!==s?(t={intent:"edit",params:{id:r,type:s}},l[0]=r,l[1]=s,l[2]=t):t=l[2];let{href:a}=(0,eP.useIntentLink)(t);return l[3]!==o||l[4]!==a?(i=(0,n.jsx)(nk,{href:a,target:"_blank",rel:"noopener noreferrer",children:o}),l[3]=o,l[4]=a,l[5]=i):i=l[5],i},nF=e=>{var t;let l,o,s,a,d,u,c,p,m,g,f,x,b=(0,ey.c)(24),{documentId:y}=e,{documents:v,state:j,mode:w}=ng(),{exitDiffView:S}=np(),C=((m=(0,ey.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(p=new eX.Subject,m[0]=p):p=m[0],p),[I,_]=(0,i.useState)(null),[T,R]=(0,i.useState)(null),P=(0,i.useContext)(r.ReferenceInputOptionsContext);b[0]!==P?(l={...P,disableNew:!0,EditReferenceLinkComponent:nM},b[0]=P,b[1]=l):l=b[1];let E=l;return b[2]!==T||b[3]!==I?(o=[I,T],b[2]=T,b[3]=I,b[4]=o):o=b[4],t=o,(x=(0,ey.c)(3))[0]!==t?(g=()=>{let e=t.filter(nf);if(0===e.length)return;let n=new tf(e);return()=>n.destroy()},f=[t],x[0]=t,x[1]=g,x[2]=f):(g=x[1],f=x[2]),(0,i.useEffect)(g,f),b[5]!==y||b[6]!==w||b[7]!==j?(s="version"===w&&(0,n.jsx)(nv,{documentId:y,state:j}),b[5]=y,b[6]=w,b[7]=j,b[8]=s):s=b[8],b[9]!==v||b[10]!==T||b[11]!==I||b[12]!==j||b[13]!==C?(a="ready"===j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nE,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:_,scrollElement:I,syncChannel:C,compareDocument:v.previous}),(0,n.jsx)(nE,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:R,scrollElement:T,syncChannel:C,compareDocument:v.previous})]}),b[9]=v,b[10]=T,b[11]=I,b[12]=j,b[13]=C,b[14]=a):a=b[14],b[15]!==s||b[16]!==a?(d=(0,n.jsxs)(nS,{children:[s,a]}),b[15]=s,b[16]=a,b[17]=d):d=b[17],b[18]!==S||b[19]!==d?(u=(0,n.jsx)(h.Dialog,{id:"diffView",width:"auto",onClose:S,padding:!1,__unstable_hideCloseButton:!0,children:d}),b[18]=S,b[19]=d,b[20]=u):u=b[20],b[21]!==E||b[22]!==u?(c=(0,n.jsx)(r.ReferenceInputOptionsContext.Provider,{value:E,children:u}),b[21]=E,b[22]=u,b[23]=c):c=b[23],c},nA=e=>{let t,i,o,r=(0,ey.c)(9),{children:s,documentId:a}=e,d=(0,ej.useToast)(),{t:u}=(0,l.useTranslation)(x);r[0]!==u||r[1]!==d?(t={onParamsError:e=>{d.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,n.jsx)("ul",{children:e.map(e=>{let[t,i]=e;return(0,n.jsx)("li",{children:u(`compare-version.error.${t}`,{input:i})},t)})})})}},r[0]=u,r[1]=d,r[2]=t):t=r[2];let{isActive:c}=ng(t);return r[3]!==a||r[4]!==c?(i=c&&(0,n.jsx)(nF,{documentId:a}),r[3]=a,r[4]=c,r[5]=i):i=r[5],r[6]!==s||r[7]!==i?(o=(0,n.jsxs)(n.Fragment,{children:[s,i]}),r[6]=s,r[7]=i,r[8]=o):o=r[8],o};function nL(){let e=(0,i.useContext)(r.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let nV=(0,eC.styled)(ev.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function nz(e){let t,l,o=(0,ey.c)(7),{disabled:r,element:s}=e,{resize:a}=nL(),[d,u]=(0,i.useState)(!1);o[0]!==s||o[1]!==a?(t=e=>{if(!s)return;u(!0),e.preventDefault();let t=e.pageX;a("start",s,0);let n=e=>{e.preventDefault(),a("move",s,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",s,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},o[0]=s,o[1]=a,o[2]=t):t=o[2];let c=t,p=r?"":void 0,m=d?"":void 0;return o[3]!==c||o[4]!==p||o[5]!==m?(l=(0,n.jsx)(nV,{"data-disabled":p,"data-dragging":m,onMouseDown:c}),o[3]=c,o[4]=p,o[5]=m,o[6]=l):l=o[6],l}let nO=(0,eC.styled)(ev.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,nB=(0,i.forwardRef)(function(e,t){let o,s,a,d,u,c,p,m,h,g,f,x,b,y,v,j,w,S,C,I,_,T,R,P,E,D,k,M,F,A=(0,ey.c)(86);A[0]!==e?({children:o,currentMinWidth:a,currentMaxWidth:s,flex:m,id:d,minWidth:c,maxWidth:u,selected:h,...p}=e,A[0]=e,A[1]=o,A[2]=s,A[3]=a,A[4]=d,A[5]=u,A[6]=c,A[7]=p,A[8]=m,A[9]=h):(o=A[1],s=A[2],a=A[3],d=A[4],u=A[5],c=A[6],p=A[7],m=A[8],h=A[9]);let L=void 0===m?1:m,V=void 0!==h&&h,[z,O]=(0,i.useState)(null),{collapse:B,collapsed:H,expand:N,expandedElement:$,mount:U,panes:G}=nL();if(A[10]!==G||A[11]!==z){let e;A[14]!==z?(e=e=>e.element===z,A[14]=z,A[15]=e):e=A[15],f=(g=G.find(e))&&G.indexOf(g),A[10]=G,A[11]=z,A[12]=g,A[13]=f}else g=A[12],f=A[13];let W=f,q="number"==typeof W?G[W+1]:void 0,K=W===G.length-1,Y=$===z,X=!H&&(g?.collapsed||!1),Q=q?.collapsed||!1,J=(0,i.useRef)(null),Z=g?.flex??L,ee=g?.currentMinWidth??a,et=g?.currentMaxWidth??s;A[16]===Symbol.for("react.memo_cache_sentinel")?(x=()=>J.current,A[16]=x):x=A[16],(0,i.useImperativeHandle)(t,x),A[17]===Symbol.for("react.memo_cache_sentinel")?(b=e=>{O(e),J.current=e},A[17]=b):b=A[17];let en=b;A[18]!==s||A[19]!==a||A[20]!==L||A[21]!==d||A[22]!==u||A[23]!==c||A[24]!==U||A[25]!==z?(y=()=>{if(z)return U(z,{currentMinWidth:a,currentMaxWidth:s,flex:L,id:d,minWidth:c,maxWidth:u})},v=[a,s,L,d,c,u,U,z],A[18]=s,A[19]=a,A[20]=L,A[21]=d,A[22]=u,A[23]=c,A[24]=U,A[25]=z,A[26]=y,A[27]=v):(y=A[26],v=A[27]),(0,i.useLayoutEffect)(y,v),A[28]!==B||A[29]!==z?(j=()=>{z&&B(z)},A[28]=B,A[29]=z,A[30]=j):j=A[30];let ei=j;A[31]!==N||A[32]!==z?(w=()=>{z&&N(z)},A[31]=N,A[32]=z,A[33]=w):w=A[33];let el=w,eo=!H&&X;A[34]!==ei||A[35]!==el||A[36]!==K||A[37]!==W||A[38]!==z||A[39]!==eo?(S={collapse:ei,collapsed:eo,expand:el,index:W,isLast:K,rootElement:z},A[34]=ei,A[35]=el,A[36]=K,A[37]=W,A[38]=z,A[39]=eo,A[40]=S):S=A[40];let er=S;e:{if(H){C=void 0;break e}if(X){C=51;break e}if(0===ee||K){C=c||204;break e}C=ee||c||204}let es=C;t:{if(X){I=51;break t}if(H&&K){I=void 0;break t}if(K){if(u){I=et??u;break t}I=void 0;break t}I=et??u}let ea=I,ed=H&&!K;A[41]!==X||A[42]!==K||A[43]!==H||A[44]!==Q||A[45]!==z?(_=!K&&!H&&(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,n.jsx)(nz,{disabled:X||Q,element:z})}),A[41]=X,A[42]=K,A[43]=H,A[44]=Q,A[45]=z,A[46]=_):_=A[46];let eu=_,ec=ea===1/0?void 0:ea;A[47]!==Z||A[48]!==es||A[49]!==ec?(T={flex:Z,minWidth:es,maxWidth:ec},A[47]=Z,A[48]=es,A[49]=ec,A[50]=T):T=A[50];let ep=T,em=H?void 0:"hidden",eh=X?"":void 0,eg=V?"":void 0;return A[51]!==X||A[52]!==et||A[53]!==ee||A[54]!==Y||A[55]!==Z||A[56]!==ea||A[57]!==es||A[58]!==W?(R=!1,A[51]=X,A[52]=et,A[53]=ee,A[54]=Y,A[55]=Z,A[56]=ea,A[57]=es,A[58]=W,A[59]=R):R=A[59],A[60]!==o||A[61]!==ed?(P=!ed&&(0,n.jsx)(ev.Flex,{direction:"column",height:"fill",children:o}),A[60]=o,A[61]=ed,A[62]=P):P=A[62],A[63]!==z||A[64]!==P?(E=(0,n.jsx)(ev.BoundaryElementProvider,{element:z,children:P}),A[63]=z,A[64]=P,A[65]=E):E=A[65],A[66]!==ed||A[67]!==d||A[68]!==W||A[69]!==p||A[70]!==ep||A[71]!==em||A[72]!==eh||A[73]!==eg||A[74]!==R||A[75]!==E?(D=(0,n.jsxs)(nO,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ed,id:d,overflow:em,...p,"data-pane-collapsed":eh,"data-pane-index":W,"data-pane-selected":eg,ref:en,style:ep,children:[R,E]}),A[66]=ed,A[67]=d,A[68]=W,A[69]=p,A[70]=ep,A[71]=em,A[72]=eh,A[73]=eg,A[74]=R,A[75]=E,A[76]=D):D=A[76],A[77]!==K||A[78]!==D?(k=(0,n.jsx)(l.IsLastPaneProvider,{isLastPane:K,children:D}),A[77]=K,A[78]=D,A[79]=k):k=A[79],A[80]!==er||A[81]!==k?(M=(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"pane",children:(0,n.jsx)(r.PaneContext.Provider,{value:er,children:k})}),A[80]=er,A[81]=k,A[82]=M):M=A[82],A[83]!==eu||A[84]!==M?(F=(0,n.jsxs)(n.Fragment,{children:[M,eu]}),A[83]=eu,A[84]=M,A[85]=F):F=A[85],F}),nH=(0,eC.styled)(ev.Card)`
  position: relative;
  outline: none;
`;function nN(){let e=(0,i.useContext)(r.PaneContext);if(!e)throw Error("Pane: missing context value");return e}nH.displayName="PaneContent__root";let n$=(0,i.forwardRef)(function(e,t){let i,l,o,r,s,a,d=(0,ey.c)(14);d[0]!==e?({as:i,children:l,overflow:o,padding:r,...s}=e,d[0]=e,d[1]=i,d[2]=l,d[3]=o,d[4]=r,d[5]=s):(i=d[1],l=d[2],o=d[3],r=d[4],s=d[5]);let{collapsed:u}=nN(),{collapsed:c}=nL(),p=c?void 0:o;return d[6]!==i||d[7]!==l||d[8]!==u||d[9]!==r||d[10]!==t||d[11]!==s||d[12]!==p?(a=(0,n.jsx)(nH,{"data-testid":"pane-content",forwardedAs:i,...s,flex:1,hidden:u,overflow:p,padding:r,ref:t,tone:"inherit",children:l}),d[6]=i,d[7]=l,d[8]=u,d[9]=r,d[10]=t,d[11]=s,d[12]=p,d[13]=a):a=d[13],a});function nU(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let nG={constrainSize:!0,placement:"left-start",portal:!0};function nW(e){let t,i,o,r,s=(0,ey.c)(35),{disabled:a,isAfterGroup:d,node:u}=e,c=(0,l.useGetI18nText)("i18n"in u?u:void 0);if("divider"===u.type){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ev.MenuDivider,{}),s[0]=e):e=s[0],e}s[1]!==c||s[2]!==u?(t=c(u),s[1]=c,s[2]=u,s[3]=t):t=s[3];let{title:p}=t;if("group"===u.type){let e,t,i,l;if(0===u.children.length)return null;if(u.expanded){let e,t,i;return s[4]!==d?(e=d&&(0,n.jsx)(ev.MenuDivider,{}),s[4]=d,s[5]=e):e=s[5],s[6]!==a||s[7]!==u.children||s[8]!==u.disabled?(t=u.children.map((e,t)=>(0,n.jsx)(nW,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),s[6]=a,s[7]=u.children,s[8]=u.disabled,s[9]=t):t=s[9],s[10]!==e||s[11]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),s[10]=e,s[11]=t,s[12]=i):i=s[12],i}s[13]!==d?(e=d&&(0,n.jsx)(ev.MenuDivider,{}),s[13]=d,s[14]=e):e=s[14];let o=u.icon;return s[15]!==a||s[16]!==u.children||s[17]!==u.disabled?(t=u.children.map((e,t)=>(0,n.jsx)(nW,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),s[15]=a,s[16]=u.children,s[17]=u.disabled,s[18]=t):t=s[18],s[19]!==a||s[20]!==u.icon||s[21]!==t||s[22]!==p?(i=(0,n.jsx)(tr.MenuGroup,{disabled:a,icon:o,popover:nG,text:p,children:t}),s[19]=a,s[20]=u.icon,s[21]=t,s[22]=p,s[23]=i):i=s[23],s[24]!==e||s[25]!==i?(l=(0,n.jsxs)(n.Fragment,{children:[e,i]}),s[24]=e,s[25]=i,s[26]=l):l=s[26],l}return s[27]!==d?(i=d&&(0,n.jsx)(ev.MenuDivider,{}),s[27]=d,s[28]=i):i=s[28],s[29]!==a||s[30]!==u?(o=(0,n.jsx)(nq,{disabled:a,node:u}),s[29]=a,s[30]=u,s[31]=o):o=s[31],s[32]!==i||s[33]!==o?(r=(0,n.jsxs)(n.Fragment,{children:[i,o]}),s[32]=i,s[33]=o,s[34]=r):r=s[34],r}function nq(e){let t,i=(0,ey.c)(5),{node:l}=e;if(l.intent){let t;return i[0]!==l.intent||i[1]!==e?(t=(0,n.jsx)(nY,{...e,intent:l.intent}),i[0]=l.intent,i[1]=e,i[2]=t):t=i[2],t}return i[3]!==e?(t=(0,n.jsx)(nK,{...e}),i[3]=e,i[4]=t):t=i[4],t}function nK(e){let t,i,o,r,s=(0,ey.c)(17),{disabled:d,node:u}=e;s[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,n.jsx)(ev.Text,{size:1,children:u.disabled.reason}),s[0]=u.disabled,s[1]=t):t=s[1];let c=t,{title:p}=(0,l.useI18nText)(u),m=d||!!u.disabled;s[2]!==u.hotkey?(i=u.hotkey?.split("+"),s[2]=u.hotkey,s[3]=i):i=s[3];let g=u.iconRight||u.selected&&a.CheckmarkIcon,f=`action-${nU(u.title)}`;return s[4]!==u.icon||s[5]!==u.onAction||s[6]!==u.selected||s[7]!==u.tone||s[8]!==m||s[9]!==i||s[10]!==g||s[11]!==f||s[12]!==p?(o=(0,n.jsx)(h.MenuItem,{disabled:m,hotkeys:i,icon:u.icon,iconRight:g,onClick:u.onAction,pressed:u.selected,text:p,tone:u.tone,"data-testid":f}),s[4]=u.icon,s[5]=u.onAction,s[6]=u.selected,s[7]=u.tone,s[8]=m,s[9]=i,s[10]=g,s[11]=f,s[12]=p,s[13]=o):o=s[13],s[14]!==o||s[15]!==c?(r=(0,n.jsx)(l.TooltipOfDisabled,{content:c,placement:"left",children:o}),s[14]=o,s[15]=c,s[16]=r):r=s[16],r}function nY(e){let t,i,o,r,s,d,u=(0,ey.c)(23),{disabled:c,intent:p,node:m}=e;u[0]!==m.disabled?(t="object"==typeof m.disabled&&(0,n.jsx)(ev.Text,{size:1,children:m.disabled.reason}),u[0]=m.disabled,u[1]=t):t=u[1];let g=t;u[2]!==p.params||u[3]!==p.type?(i={intent:p.type,params:p.params},u[2]=p.params,u[3]=p.type,u[4]=i):i=u[4];let f=(0,eP.useIntentLink)(i);u[5]!==f||u[6]!==m?(o=e=>{f.onClick(e),m.onAction()},u[5]=f,u[6]=m,u[7]=o):o=u[7];let x=o,{title:b}=(0,l.useI18nText)(m),y=c||!!m.disabled;u[8]!==m.hotkey?(r=m.hotkey?.split("+"),u[8]=m.hotkey,u[9]=r):r=u[9];let v=m.selected?a.CheckmarkIcon:void 0;return u[10]!==x||u[11]!==f.href||u[12]!==m.icon||u[13]!==m.selected||u[14]!==m.tone||u[15]!==y||u[16]!==r||u[17]!==v||u[18]!==b?(s=(0,n.jsx)(h.MenuItem,{as:"a",disabled:y,hotkeys:r,href:f.href,icon:m.icon,iconRight:v,onClick:x,pressed:m.selected,text:b,tone:m.tone}),u[10]=x,u[11]=f.href,u[12]=m.icon,u[13]=m.selected,u[14]=m.tone,u[15]=y,u[16]=r,u[17]=v,u[18]=b,u[19]=s):s=u[19],u[20]!==s||u[21]!==g?(d=(0,n.jsx)(l.TooltipOfDisabled,{content:g,placement:"left",children:s}),u[20]=s,u[21]=g,u[22]=d):d=u[22],d}let nX={constrainSize:!0,placement:"bottom",portal:!0};function nQ(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&nQ(e.children,t))}function nJ(e){let t,o,r,s,a,d=(0,ey.c)(13),{nodes:u,actionsNodes:c}=e,p=(0,i.useId)(),m=nQ(u,"critical"),g=nQ(u,"caution"),f=m?"critical":g?"caution":void 0;return d[0]!==f?(t=(0,n.jsx)(l.ContextMenuButton,{tone:f,"data-testid":"pane-context-menu-button"}),d[0]=f,d[1]=t):t=d[1],d[2]!==c?(o=c&&(0,n.jsxs)(n.Fragment,{children:[c,(0,n.jsx)(ev.MenuDivider,{})]}),d[2]=c,d[3]=o):o=d[3],d[4]!==u?(r=u.map((e,t)=>{let i=u[t-1]?.type==="group";return(0,n.jsx)(nW,{isAfterGroup:i,node:e},e.key)}),d[4]=u,d[5]=r):r=d[5],d[6]!==o||d[7]!==r?(s=(0,n.jsxs)(ev.Menu,{children:[o,r]}),d[6]=o,d[7]=r,d[8]=s):s=d[8],d[9]!==p||d[10]!==t||d[11]!==s?(a=(0,n.jsx)(h.MenuButton,{button:t,id:p,menu:s,popover:nX}),d[9]=p,d[10]=t,d[11]=s,d[12]=a):a=d[12],a}let nZ=(0,eC.styled)(ev.Layer)`
  position: sticky;
  bottom: 0;
`,n0=(0,eC.styled)(ev.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,n1=(0,i.forwardRef)(function(e,t){let i,o,r=(0,ey.c)(7),{children:s,padding:a}=e,{collapsed:d}=nN();return r[0]!==s||r[1]!==a?(i=(0,n.jsx)(n0,{tone:"inherit",children:(0,n.jsx)(ev.Box,{padding:a,children:s})}),r[0]=s,r[1]=a,r[2]=i):i=r[2],r[3]!==d||r[4]!==t||r[5]!==i?(o=(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(nZ,{"data-testid":"pane-footer",hidden:d,ref:t,children:i})}),r[3]=d,r[4]=t,r[5]=i,r[6]=o):o=r[6],o}),n2=(0,eC.styled)(ev.Layer)(({$border:e})=>eC.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),n3=(0,eC.styled)(ev.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,n4=(0,eC.styled)(ev.Card)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return eC.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),n5=(0,eC.styled)(ej.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,n6=(0,eC.styled)(ev.Text)`
  cursor: default;
  outline: none;
`,n8=(0,i.forwardRef)(function(e,t){let i,o,r,s,a,d,u,c,p,m,h,g,f,x=(0,ey.c)(48),{actions:b,backButton:y,border:v,contentAfter:j,loading:w,subActions:S,tabs:C,tabIndex:I,title:_,appendTitle:T}=e,{collapse:R,collapsed:P,expand:E,rootElement:D}=nN(),k=(0,ej.useElementRect)(D||null),M=P?k?.height||window.innerHeight:void 0;x[0]!==M?(i={width:M},x[0]=M,x[1]=i):i=x[1];let F=i;x[2]!==R||x[3]!==P?(o=()=>{P||R()},x[2]=R,x[3]=P,x[4]=o):o=x[4];let A=o;x[5]!==P||x[6]!==E?(r=()=>{P&&E()},x[5]=P,x[6]=E,x[7]=r):r=x[7];let L=r,V=!!(!P&&(C||S)),z=P?"":void 0,O=P?"":void 0;x[8]!==y?(s=y&&(0,n.jsx)(ev.Box,{flex:"none",children:y}),x[8]=y,x[9]=s):s=x[9];let B=y?1:2;x[10]!==w?(a=w&&(0,n.jsx)(ev.Box,{children:(0,n.jsx)(n5,{animated:!0,radius:1,size:1})}),x[10]=w,x[11]=a):a=x[11],x[12]!==T||x[13]!==w||x[14]!==_?(d=!w&&(0,n.jsxs)(ev.Flex,{align:"center",gap:1,children:[(0,n.jsx)(n6,{size:1,textOverflow:"ellipsis",weight:"semibold",children:_}),T]}),x[12]=T,x[13]=w,x[14]=_,x[15]=d):d=x[15],x[16]!==A||x[17]!==B||x[18]!==a||x[19]!==d||x[20]!==I?(u=(0,n.jsxs)(n4,{__unstable_focusRing:!0,flex:1,onClick:A,paddingLeft:B,padding:2,tabIndex:I,children:[a,d]}),x[16]=A,x[17]=B,x[18]=a,x[19]=d,x[20]=I,x[21]=u):u=x[21],x[22]!==b||x[23]!==P?(c=b&&(0,n.jsx)(ev.Box,{hidden:P,children:(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"paneHeader",children:b})}),x[22]=b,x[23]=P,x[24]=c):c=x[24],x[25]!==u||x[26]!==c||x[27]!==s?(p=(0,n.jsxs)(ev.Flex,{align:"flex-start",gap:3,children:[s,u,c]}),x[25]=u,x[26]=c,x[27]=s,x[28]=p):p=x[28],x[29]!==P||x[30]!==V||x[31]!==S||x[32]!==C?(m=V&&(0,n.jsxs)(ev.Flex,{align:"center",hidden:P,overflow:"auto",children:[(0,n.jsx)(ev.Box,{flex:1,marginRight:3*!!S,children:C}),S]}),x[29]=P,x[30]=V,x[31]=S,x[32]=C,x[33]=m):m=x[33],x[34]!==L||x[35]!==F||x[36]!==p||x[37]!==m?(h=(0,n.jsxs)(n3,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:F,children:[p,m]}),x[34]=L,x[35]=F,x[36]=p,x[37]=m,x[38]=h):h=x[38];let H=!P&&j;return x[39]!==h||x[40]!==H||x[41]!==O?(g=(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,n.jsxs)(ev.Card,{"data-collapsed":O,tone:"inherit",children:[h,H]})}),x[39]=h,x[40]=H,x[41]=O,x[42]=g):g=x[42],x[43]!==v||x[44]!==t||x[45]!==g||x[46]!==z?(f=(0,n.jsx)(ev.LayerProvider,{zOffset:100,children:(0,n.jsx)(n2,{$border:v,"data-collapsed":z,"data-testid":"pane-header",ref:t,children:g})}),x[43]=v,x[44]=t,x[45]=g,x[46]=z,x[47]=f):f=x[47],f});function n7(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function n9(e){let t=(0,ey.c)(4),{node:i}=e;if("item"===i.type){let e;return t[0]!==i?(e=(0,n.jsx)(ie,{node:i}),t[0]=i,t[1]=e):e=t[1],e}if("group"===i.type){let e;return t[2]!==i?(e=(0,n.jsx)(ii,{node:i}),t[2]=i,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',i),null}function ie(e){let t,i,o,r,s,a=(0,ey.c)(23),{node:d}=e,{title:u}=(0,l.useI18nText)(d),{t:c}=(0,l.useTranslation)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,n.jsx)(it,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=n7(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:m,isDisabled:h}=t;a[5]!==m||a[6]!==c||a[7]!==u?(i=m||u||c("status-button.aria-label"),a[5]=m,a[6]=c,a[7]=u,a[8]=i):i=a[8],a[9]!==h||a[10]!==d.hotkey?(o=!h&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=h,a[10]=d.hotkey,a[11]=o):o=a[11];let g=h?p:u;return a[12]!==o||a[13]!==g?(r={hotkeys:o,content:g},a[12]=o,a[13]=g,a[14]=r):r=a[14],a[15]!==h||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==i||a[21]!==r?(s=(0,n.jsx)(l.StatusButton,{disabled:h,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":i,tooltipProps:r}),a[15]=h,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=i,a[21]=r,a[22]=s):s=a[22],s}function it(e){let t,i,o,r,s,a,d,u=(0,ey.c)(27),{intent:c,node:p}=e;u[0]!==c.params||u[1]!==c.type?(t={intent:c.type,params:c.params},u[0]=c.params,u[1]=c.type,u[2]=t):t=u[2];let m=(0,eP.useIntentLink)(t),{t:h}=(0,l.useTranslation)();u[3]!==m||u[4]!==p?(i=e=>{m.onClick(e),p.onAction()},u[3]=m,u[4]=p,u[5]=i):i=u[5];let g=i;u[6]!==p?(o=n7(p),u[6]=p,u[7]=o):o=u[7];let{disabledReason:f,ariaLabel:x,isDisabled:b}=o;u[8]!==x||u[9]!==p.title||u[10]!==h?(r=x||p.title||h("status-button.aria-label"),u[8]=x,u[9]=p.title,u[10]=h,u[11]=r):r=u[11],u[12]!==b||u[13]!==p.hotkey?(s=!b&&p.hotkey?p.hotkey.split("+"):void 0,u[12]=b,u[13]=p.hotkey,u[14]=s):s=u[14];let y=b?f:p.title;return u[15]!==s||u[16]!==y?(a={hotkeys:s,content:y,placement:"bottom",portal:!0},u[15]=s,u[16]=y,u[17]=a):a=u[17],u[18]!==g||u[19]!==m.href||u[20]!==b||u[21]!==p.icon||u[22]!==p.selected||u[23]!==p.tone||u[24]!==r||u[25]!==a?(d=(0,n.jsx)(l.StatusButton,{forwardedAs:"a",disabled:b,href:m.href,icon:p.icon,onClick:g,selected:p.selected,tone:p.tone,"aria-label":r,tooltipProps:a}),u[18]=g,u[19]=m.href,u[20]=b,u[21]=p.icon,u[22]=p.selected,u[23]=p.tone,u[24]=r,u[25]=a,u[26]=d):d=u[26],d}function ii(e){let t,o,r,s,d,u=(0,ey.c)(16),{node:c}=e,{title:p}=(0,l.useI18nText)(c),m=!!c.disabled,g=c.icon??a.UnknownIcon;u[0]!==c.title?(t={content:c.title,portal:!0},u[0]=c.title,u[1]=t):t=u[1],u[2]!==m||u[3]!==g||u[4]!==t||u[5]!==p?(o=(0,n.jsx)(h.Button,{disabled:m,icon:g,label:p,mode:"bleed",tooltipProps:t}),u[2]=m,u[3]=g,u[4]=t,u[5]=p,u[6]=o):o=u[6];let f=(0,i.useId)();return u[7]!==c.children||u[8]!==c.disabled?(r=c.children.map((e,t)=>(0,n.jsx)(nW,{disabled:!!c.disabled,isAfterGroup:c.children[t-1]?.type==="group",node:e},e.key)),u[7]=c.children,u[8]=c.disabled,u[9]=r):r=u[9],u[10]!==r?(s=(0,n.jsx)(ev.Menu,{children:r}),u[10]=r,u[11]=s):s=u[11],u[12]!==o||u[13]!==f||u[14]!==s?(d=(0,n.jsx)(h.MenuButton,{button:o,id:f,menu:s}),u[12]=o,u[13]=f,u[14]=s,u[15]=d):d=u[15],d}let il=(0,eC.styled)(ev.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,io=[];function ir(e){let t,l,o,s,a,d,u,c,p,m,h,g,f,x,b,y,v,j=(0,ey.c)(41);j[0]!==e?({children:t,minWidth:l,onCollapse:o,onExpand:s,...a}=e,j[0]=e,j[1]=t,j[2]=l,j[3]=o,j[4]=s,j[5]=a):(t=j[1],l=j[2],o=j[3],s=j[4],a=j[5]);let[w]=(0,i.useState)(is),[S,C]=(0,i.useState)(null),I=(0,ej.useElementRect)(S)?.width||0,_=void 0!==I&&l?I<l:void 0;j[6]===Symbol.for("react.memo_cache_sentinel")?(d={expandedElement:null,panes:[],resizing:!1},j[6]=d):d=j[6];let[T,R]=(0,i.useState)(d);j[7]!==w||j[8]!==S?(u=()=>w.setRootElement(S),c=[w,S],j[7]=w,j[8]=S,j[9]=u,j[10]=c):(u=j[9],c=j[10]),(0,i.useEffect)(u,c),j[11]!==w||j[12]!==I?(p=()=>w.setRootWidth(I),m=[w,I],j[11]=w,j[12]=I,j[13]=p,j[14]=m):(p=j[13],m=j[14]),(0,i.useEffect)(p,m),j[15]!==w?(h=()=>w.subscribe(R),g=[w],j[15]=w,j[16]=h,j[17]=g):(h=j[16],g=j[17]),(0,i.useEffect)(h,g),j[18]!==_||j[19]!==o||j[20]!==s?(f=()=>{void 0!==_&&(_&&o&&o(),!_&&s&&s())},x=[_,o,s],j[18]=_,j[19]=o,j[20]=s,j[21]=f,j[22]=x):(f=j[21],x=j[22]),(0,i.useEffect)(f,x),j[23]!==_||j[24]!==w.collapse||j[25]!==w.expand||j[26]!==w.mount||j[27]!==w.resize||j[28]!==T.expandedElement||j[29]!==T.panes||j[30]!==T.resizing?(b={collapse:w.collapse,collapsed:_,expand:w.expand,expandedElement:T.expandedElement,mount:w.mount,panes:T.panes,resize:w.resize,resizing:T.resizing},j[23]=_,j[24]=w.collapse,j[25]=w.expand,j[26]=w.mount,j[27]=w.resize,j[28]=T.expandedElement,j[29]=T.panes,j[30]=T.resizing,j[31]=b):b=j[31];let P=b,E=_?"":void 0,D=T.resizing?"":void 0,k=I?"":void 0;return j[32]!==t||j[33]!==a||j[34]!==E||j[35]!==D||j[36]!==k?(y=(0,n.jsx)(il,{"data-ui":"PaneLayout",...a,"data-collapsed":E,"data-resizing":D,"data-mounted":k,ref:C,children:t}),j[32]=t,j[33]=a,j[34]=E,j[35]=D,j[36]=k,j[37]=y):y=j[37],j[38]!==P||j[39]!==y?(v=(0,n.jsx)(r.PaneLayoutContext.Provider,{value:P,children:y}),j[38]=P,j[39]=y,j[40]=v):v=j[40],v}function is(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,s=null,a=new Map,d=!1;function u(e){i.delete(e),s=e,c()}return{collapse:function(e){i.add(e),s===e&&(s=null),c()},expand:u,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||io,l=n.get(t)||io,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),c()}},resize:function(e,i,o){let r=t.indexOf(i),s=n.get(i);if(!s)return;let u=t[r+1],p=n.get(u);if(p){if("start"===e&&(d=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:u,flex:p.flex||1,width:u.offsetWidth},c()),"move"===e&&l.left&&l.right){let e,t,n,r,d,m,h,g,f,x,b,y;a=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:S}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=p.minWidth??204,r=Math.min(s.maxWidth||1/0,e.width-n),d=Math.min(p.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-d)&&(m=h),g=l.right.width-n,g>(f=r-l.left.width)&&(g=f),x=Math.min(Math.max(o,m),g),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});a.set(i,{flex:w,width:v}),a.set(u,{flex:S,width:j}),c()}if("end"===e){d=!1;let e=a.get(i),t=a.get(u);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(u,{...p,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??p.flex}),a=new Map,delete l.left,delete l.right,c()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,c()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function c(){if(!r)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let o=new WeakMap,u=l.length,c=l[0],p=r-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===c,s=i.has(e),d=l>p,u=!r&&(s||d),m=a.get(e);o.set(e,{element:e,collapsed:u,currentMinWidth:m?.width??t.currentMinWidth,currentMaxWidth:m?.width??t.currentMaxWidth,flex:m?.flex??t.flex??1}),u?p-=51:p-=l-51}let m=[];for(let e of t){let t=o.get(e);t&&m.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:m,resizing:d})}}()}function ia(e){let t,i,l,o=(0,ey.c)(12),{children:r,currentMinWidth:s,flex:a,minWidth:d,paneKey:u,title:c,tone:p}=e,m=void 0===c?"Error":c,h=void 0===p?"critical":p;return o[0]!==m?(t=(0,n.jsx)(n8,{title:m}),o[0]=m,o[1]=t):t=o[1],o[2]!==r?(i=(0,n.jsx)(n$,{overflow:"auto",children:(0,n.jsx)(ev.Box,{paddingX:4,paddingY:5,children:r})}),o[2]=r,o[3]=i):i=o[3],o[4]!==s||o[5]!==a||o[6]!==d||o[7]!==u||o[8]!==t||o[9]!==i||o[10]!==h?(l=(0,n.jsxs)(nB,{currentMinWidth:s,flex:a,id:u,minWidth:d,tone:h,children:[t,i]}),o[4]=s,o[5]=a,o[6]=d,o[7]=u,o[8]=t,o[9]=i,o[10]=h,o[11]=l):l=o[11],l}function id(e){let t,l,o,r=(0,ey.c)(6),{children:s,ms:a}=e,d=void 0===a?0:a,[u,c]=(0,i.useState)(d<=0);if(r[0]!==d?(t=()=>{if(d<=0)return;let e=setTimeout(()=>c(!0),d);return()=>{clearTimeout(e)}},l=[d],r[0]=d,r[1]=t,r[2]=l):(t=r[1],l=r[2]),(0,i.useEffect)(t,l),!u||!s){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),r[3]=e):e=r[3],e}return r[4]!==s?(o="function"==typeof s?s():s,r[4]=s,r[5]=o):o=r[5],o}function iu(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(l.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" âž ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,eQ.of)(null);return(0,eJ.merge)(...t.map(e=>n.pipe((0,eM.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eF.delay)(e.ms))))}let ic=(0,eC.styled)(ev.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,ip=(0,i.memo)(e=>{let t,o,r,s,a,d,u,c,p,m,h=(0,ey.c)(28),{delay:g,flex:f,message:b,minWidth:y,paneKey:v,path:j,selected:w,title:S,tone:C}=e,I=void 0===g?300:g,_=void 0===b?iu:b,{t:T}=(0,l.useTranslation)(x);e:{if("function"==typeof _){let e;h[0]!==_||h[1]!==j?(e=_(j?j.split(";"):[]),h[0]=_,h[1]=j,h[2]=e):e=h[2],t=e;break e}t=_}let R=t;h[3]!==R||h[4]!==T?(o=()=>"string"==typeof R?R:T("panes.resolving.default-message"),h[3]=R,h[4]=T,h[5]=o):o=h[5];let[P,E]=(0,i.useState)(o);h[6]!==R||h[7]!==T?(r=()=>{if("object"!=typeof R||"function"!=typeof R.subscribe)return;let e=R.subscribe(e=>{E("messageKey"in e?T(e.messageKey):e.message)});return()=>e.unsubscribe()},s=[R,T],h[6]=R,h[7]=T,h[8]=r,h[9]=s):(r=h[8],s=h[9]),(0,i.useEffect)(r,s);let[D,k]=(0,i.useState)(null),[M,F]=(0,i.useState)(!1);h[10]!==D?(a=()=>{if(D)return(0,ej._raf2)(()=>F(!0))},d=[D],h[10]=D,h[11]=a,h[12]=d):(a=h[11],d=h[12]),(0,i.useEffect)(a,d);let A=M?"":void 0,L=S||P;h[13]!==L?(u=(0,n.jsx)(l.LoadingBlock,{showText:!0,title:L}),h[13]=L,h[14]=u):u=h[14],h[15]!==u||h[16]!==A?(c=(0,n.jsx)(ic,{align:"center","data-mounted":A,direction:"column",height:"fill",justify:"center",ref:k,children:u}),h[15]=u,h[16]=A,h[17]=c):c=h[17];let V=c;return h[18]!==V||h[19]!==I?(p=(0,n.jsx)(n$,{children:V}),h[18]=V,h[19]=I,h[20]=p):p=h[20],h[21]!==f||h[22]!==y||h[23]!==v||h[24]!==w||h[25]!==p||h[26]!==C?(m=(0,n.jsx)(nB,{flex:f,id:v,minWidth:y,selected:w,tone:C,children:p}),h[21]=f,h[22]=y,h[23]=v,h[24]=w,h[25]=p,h[26]=C,h[27]=m):m=h[27],m});function im(){let e=(0,i.useContext)(r.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function ih(e){let t,i,o=(0,ey.c)(8),{children:r,documentId:s,documentType:a}=e;return o[0]!==r||o[1]!==s||o[2]!==a?(t=(0,n.jsx)(ig,{documentId:s,documentType:a,children:r}),o[0]=r,o[1]=s,o[2]=a,o[3]=t):t=o[3],o[4]!==s||o[5]!==a||o[6]!==t?(i=(0,n.jsx)(l.CommentsEnabledProvider,{documentId:s,documentType:a,children:t}),o[4]=s,o[5]=a,o[6]=t,o[7]=i):i=o[7],i}function ig(e){let t,o,r,s,a,d,u=(0,ey.c)(26),{children:c,documentId:p,documentType:m}=e,{enabled:h}=(0,l.useCommentsEnabled)(),{connectionState:g,onPathOpen:f,inspector:x,openInspector:b}=im(),{selectedReleaseId:y}=(0,l.usePerspective)(),{params:v,setParams:j}=i7(),{resolveIntentLink:w}=(0,eP.useRouter)(),S=v?.comment,C=(0,i.useRef)(v);u[0]!==v?(t=()=>{C.current=v},o=[v],u[0]=v,u[1]=t,u[2]=o):(t=u[1],o=u[2]),(0,i.useLayoutEffect)(t,o),u[3]!==p||u[4]!==m||u[5]!==w?(r=e=>{let t=w("edit",{id:p,type:m,inspect:l.COMMENTS_INSPECTOR_NAME,comment:e});return`${window.location.origin}${t}`},u[3]=p,u[4]=m,u[5]=w,u[6]=r):r=u[6];let I=r;u[7]!==j?(s=()=>{j({...C.current,comment:void 0})},u[7]=j,u[8]=s):s=u[8];let _=s;u[9]!==x?.name||u[10]!==b?(a=()=>{x?.name!==l.COMMENTS_INSPECTOR_NAME&&b(l.COMMENTS_INSPECTOR_NAME)},u[9]=x?.name,u[10]=b,u[11]=a):a=u[11];let T=a;if(!h){let e;return u[12]!==c?(e=(0,n.jsx)(n.Fragment,{children:c}),u[12]=c,u[13]=e):e=u[13],e}let R=x?.name===l.COMMENTS_INSPECTOR_NAME,P="connecting"===g;return u[14]!==c||u[15]!==p||u[16]!==m||u[17]!==I||u[18]!==_||u[19]!==T||u[20]!==f||u[21]!==S||u[22]!==y||u[23]!==R||u[24]!==P?(d=(0,n.jsx)(l.CommentsProvider,{documentId:p,documentType:m,getCommentLink:I,isCommentsOpen:R,isConnecting:P,onClearSelectedComment:_,onCommentsOpen:T,onPathOpen:f,selectedCommentId:S,sortOrder:"desc",type:"field",releaseId:y,children:c}),u[14]=c,u[15]=p,u[16]=m,u[17]=I,u[18]=_,u[19]=T,u[20]=f,u[21]=S,u[22]=y,u[23]=R,u[24]=P,u[25]=d):d=u[25],d}function ix(){let e=(0,i.useContext)(r.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}ip.displayName="Memo(LoadingPane)";let ib={},iy="inspect:",iv=[{id:"inspectors"},{id:"links"}],ij="sanity/structure/history";function iw(e){let{documentId:t,documentType:o,inspectors:r,onMenuItems:s}=e,a=r.length,[d,u]=(0,i.useState)(()=>Array.from(Array(a)));(0,i.useEffect)(()=>{if(d.length!==a){let e=Array.from(Array(a));for(let t=0;t<a;t++)e[t]=d[t];u(e)}},[a,d]);let c=(0,i.useCallback)((e,t)=>{u(n=>{let i=[...n];return i[e]=t,i})},[]);(0,i.useEffect)(()=>{s(d.filter(Boolean))},[d,s]);let p=(0,i.useMemo)(()=>r.map((e,n)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:o,useMenuItem:r}){return(0,i.memo)(function(){let s,a,d,u=(0,ey.c)(4);u[0]===Symbol.for("react.memo_cache_sentinel")?(s={documentId:e,documentType:t},u[0]=s):s=u[0];let c=r(s),p=(0,l.useUnique)(c);return u[1]!==p?(a=()=>{o(n,p)},d=[p],u[1]=p,u[2]=a,u[3]=d):(a=u[2],d=u[3]),(0,i.useEffect)(a,d),null})}({documentId:t,documentType:o,index:n,setMenuItem:c,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,o,r,c]);return(0,n.jsx)(n.Fragment,{children:p.map(([e,t])=>t&&(0,n.jsx)(e,{},t))})}function iS(){let e,t,n,i,o=(0,ey.c)(22),{connectionState:r,schemaType:s,editState:a,isDeleted:d,lastRevisionDocument:u}=im(),{selectedPerspectiveName:c}=(0,l.usePerspective)(),{t:p}=(0,l.useTranslation)(x);e:{if(d){e=u;break e}if(c&&(0,l.isPublishedPerspective)(c)){e=a?.published;break e}e=a?.version||a?.draft||a?.published}let m=e,h=!!m;t:{if(d&&u&&s)try{let e;o[0]!==u||o[1]!==s?(e=(0,l.prepareForPreview)(u,s),o[0]=u,o[1]=s,o[2]=e):e=o[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let g=t,f=h&&!d;o[3]!==m||o[4]!==s||o[5]!==f?(n={enabled:f,schemaType:s,value:m},o[3]=m,o[4]=s,o[5]=f,o[6]=n):n=o[6];let{error:b,value:y}=(0,l.unstable_useValuePreview)(n);if("connecting"===r&&!h){let e;return o[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},o[7]=e):e=o[7],e}if(d&&g){let e;return o[8]!==g.title?(e={error:void 0,title:g.title},o[8]=g.title,o[9]=e):e=o[9],e}if(!y&&!d){let e,t,n=s?.title||s?.name;return o[10]!==p||o[11]!==n?(e=p("panes.document-header-title.new.text",{schemaType:n}),o[10]=p,o[11]=n,o[12]=e):e=o[12],o[13]!==e?(t={error:void 0,title:e},o[13]=e,o[14]=t):t=o[14],t}if(b){let e,t;return o[15]!==b.message||o[16]!==p?(e=p("panes.document-list-pane.error.text",{error:b.message}),o[15]=b.message,o[16]=p,o[17]=e):e=o[17],o[18]!==e?(t={error:e,title:void 0},o[18]=e,o[19]=t):t=o[19],t}let v=y?.title;return o[20]!==v?(i={error:void 0,title:v},o[20]=v,o[21]=i):i=o[21],i}iw.displayName="DocumentInspectorMenuItemsResolver";let iC=["patch","commit"],iI=(0,i.memo)(function(){let e,t,o,r,s,a=(0,ey.c)(13),{push:d}=(0,ej.useToast)(),{documentId:u,documentType:c,value:p}=im(),m=iS(),h=m.error,g=(0,l.useDocumentOperationEvent)(u,c),f=(0,i.useRef)(g),b=i7(),{t:y}=(0,l.useTranslation)(x),{handleOpenDialog:v}=(0,l.useDocumentLimitsUpsellContext)();e:{if(!m.title&&!h&&!iC.includes(g?.op)&&"string"==typeof p.title&&g?.type==="success"){e=p.title;break e}e=m.title}let j=e;a[0]!==y||a[1]!==j?(t=j||y("panes.document-operation-results.operation-undefined-title"),a[0]=y,a[1]=j,a[2]=t):t=a[2];let w=t;a[3]!==w?(o=w.length>25?`${w.slice(0,25)}...`:w,a[3]=w,a[4]=o):o=a[4];let S=o;return a[5]!==S||a[6]!==g||a[7]!==v||a[8]!==b||a[9]!==d||a[10]!==y?(r=()=>{let e;if(g&&g!==f.current){if("error"===g.type){if((0,l.isDocumentLimitError)(g.error))return void v("document_action");d({closable:!0,duration:3e4,status:"error",title:y("panes.document-operation-results.operation-error",{context:g.op}),description:(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:y("panes.document-operation-results.error.summary.title")}),g.error.message]})})}return"success"!==g.type||iC.includes(g.op)||d({closable:!0,status:"success",title:(0,n.jsx)(l.Translate,{context:g.op,i18nKey:"panes.document-operation-results.operation-success",t:y,values:{op:g.op,title:S},components:{Strong:"strong"}})}),"success"===g.type&&"delete"===g.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),f.current=g,()=>clearTimeout(e)}},s=[g,b,d,y,S,v],a[5]=S,a[6]=g,a[7]=v,a[8]=b,a[9]=d,a[10]=y,a[11]=r,a[12]=s):(r=a[11],s=a[12]),(0,i.useEffect)(r,s),null}),i_=(0,eC.styled)(ev.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function iT(e){let t,i,o,r,s,d,u,c,p,m,g,f,b=(0,ey.c)(25);b[0]!==e?({as:o,children:t,closeButtonLabel:i,onClose:r,title:d,...s}=e,b[0]=e,b[1]=t,b[2]=i,b[3]=o,b[4]=r,b[5]=s,b[6]=d):(t=b[1],i=b[2],o=b[3],r=b[4],s=b[5],d=b[6]);let{t:y}=(0,l.useTranslation)(x);return b[7]!==d?(u=(0,n.jsx)(ev.Box,{flex:1,padding:3,children:(0,n.jsx)(ev.Text,{as:"h1",size:1,weight:"medium",children:d})}),b[7]=d,b[8]=u):u=b[8],b[9]!==y?(c=y("document-inspector.close-button.tooltip"),b[9]=y,b[10]=c):c=b[10],b[11]!==c?(p={content:c},b[11]=c,b[12]=p):p=b[12],b[13]!==i||b[14]!==r||b[15]!==p?(m=(0,n.jsx)(ev.Box,{flex:"none",padding:1,children:(0,n.jsx)(h.Button,{"aria-label":i,icon:a.CloseIcon,mode:"bleed",onClick:r,tooltipProps:p})}),b[13]=i,b[14]=r,b[15]=p,b[16]=m):m=b[16],b[17]!==u||b[18]!==m?(g=(0,n.jsxs)(ev.Flex,{padding:2,children:[u,m]}),b[17]=u,b[18]=m,b[19]=g):g=b[19],b[20]!==t||b[21]!==o||b[22]!==s||b[23]!==g?(f=(0,n.jsxs)(i_,{...s,as:o,children:[g,t]}),b[20]=t,b[21]=o,b[22]=s,b[23]=g,b[24]=f):f=b[24],f}function iR(e){let t,i,o,r=(0,ey.c)(14),{documentId:s,documentType:a,flex:d}=e,{collapsed:u}=nN(),{closeInspector:c,inspector:p}=im(),{features:m}=ix();r[0]!==c||r[1]!==p?(t=()=>{p&&c(p.name)},r[0]=c,r[1]=p,r[2]=t):t=r[2];let h=t;if(u||!p)return null;let g=p.component;r[3]!==g||r[4]!==s||r[5]!==a||r[6]!==h?(i=(0,n.jsx)(g,{onClose:h,documentId:s,documentType:a}),r[3]=g,r[4]=s,r[5]=a,r[6]=h,r[7]=i):i=r[7];let f=i;if(m.resizablePanes){let e;return r[8]!==f||r[9]!==d?(e=(0,n.jsx)(l.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:d,resizerPosition:"left",maxWidth:540,minWidth:320,children:f}),r[8]=f,r[9]=d,r[10]=e):e=r[10],e}return r[11]!==f||r[12]!==d?(o=(0,n.jsx)(ev.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:d,children:f}),r[11]=f,r[12]=d,r[13]=o):o=r[13],o}function iP(e,t,n){let i,o,r,s,a=(0,ey.c)(16),d=(0,l.useKeyValueStore)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let u=i.join(".");if(a[3]!==n||a[4]!==d||a[5]!==u){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],o=d.getKey(u).pipe((0,eA.map)(e)),a[3]=n,a[4]=d,a[5]=u,a[6]=o}else o=a[6];let c=(0,eR.useObservable)(o,n);a[9]!==d||a[10]!==u||a[11]!==c?(r=e=>{e!==c&&d.setKey(u,e)},a[9]=d,a[10]=u,a[11]=c,a[12]=r):r=a[12];let p=r;return a[13]!==p||a[14]!==c?(s=[c,p],a[13]=p,a[14]=c,a[15]=s):s=a[15],s}let iE={id:"parsed",title:"document-inspector.view-mode.parsed"},iD={id:"raw",title:"document-inspector.view-mode.raw-json"},ik=[iE,iD],iM=new tj.default({maxSize:1e3});function iF(e){let{path:t}=e,n=iM.get(t);void 0!==n&&iM.set(t,!n)}function iA(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function iL(e){iA(e.currentTarget)}function iV(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),iA(e.currentTarget))}let iz=eC.styled.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return eC.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,ev.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,ev.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: 'â–¸ ';
      margin-left: calc(0 - ${(0,ev.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: 'â–¾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,ev.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,ev.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: 'â†”';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function iO(e){let t,i,o,r=(0,ey.c)(8),{onChange:s,query:d}=e;r[0]!==s?(t=e=>s(e.target.value),r[0]=s,r[1]=t):t=r[1];let u=t,{t:c}=(0,l.useTranslation)(x);r[2]!==c?(i=c("document-inspector.search.placeholder"),r[2]=c,r[3]=i):i=r[3];let p=d||"";return r[4]!==u||r[5]!==i||r[6]!==p?(o=(0,n.jsx)(ev.TextInput,{icon:a.SearchIcon,onChange:u,placeholder:i,radius:2,value:p}),r[4]=u,r[5]=i,r[6]=p,r[7]=o):o=r[7],o}function iB(e){let t,i,o,r,s,a,d,u,c,p,m,g,f,b,y,v,j=(0,ey.c)(49),{value:w}=e,{onInspectClose:S,paneKey:C}=im(),I=`${C}_inspect_`,[_,T]=iP("inspect-view-mode",null,"parsed");j[0]!==_?(t=ik.find(e=>e.id===_),j[0]=_,j[1]=t):t=j[1];let R=t;j[2]!==T?(i=()=>{T(iE.id)},j[2]=T,j[3]=i):i=j[3];let P=i;j[4]!==T?(o=()=>{T(iD.id)},j[4]=T,j[5]=o):o=j[5];let E=o,{t:D}=(0,l.useTranslation)(x),k=`${I}dialog`;j[6]!==D||j[7]!==w?(r=(0,l.isRecord)(w)&&(0,l.isString)(w._id)&&(0,l.isString)(w._type)?(0,n.jsx)(l.Translate,{t:D,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,n.jsx)("em",{children:(0,n.jsx)(rY,{document:w})})}}):(0,n.jsx)("em",{children:D("document-inspector.dialog.title-no-value")}),j[6]=D,j[7]=w,j[8]=r):r=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",bottom:0,zIndex:3},j[9]=s):s=j[9];let M=`${I}tabpanel`,F=`${I}tab-${iE.id}`;j[10]!==D?(a=D(iE.title),j[10]=D,j[11]=a):a=j[11];let A=R===iE;j[12]!==P||j[13]!==M||j[14]!==F||j[15]!==a||j[16]!==A?(d=(0,n.jsx)(h.Tab,{"aria-controls":M,id:F,label:a,onClick:P,selected:A}),j[12]=P,j[13]=M,j[14]=F,j[15]=a,j[16]=A,j[17]=d):d=j[17];let L=`${I}tabpanel`,V=`${I}tab-${iD.id}`;j[18]!==D?(u=D(iD.title),j[18]=D,j[19]=u):u=j[19];let z=R===iD;j[20]!==E||j[21]!==L||j[22]!==V||j[23]!==u||j[24]!==z?(c=(0,n.jsx)(h.Tab,{"aria-controls":L,id:V,label:u,onClick:E,selected:z}),j[20]=E,j[21]=L,j[22]=V,j[23]=u,j[24]=z,j[25]=c):c=j[25],j[26]!==d||j[27]!==c?(p=(0,n.jsx)(ev.Card,{padding:3,paddingTop:0,shadow:1,style:s,children:(0,n.jsxs)(ev.TabList,{space:1,children:[d,c]})}),j[26]=d,j[27]=c,j[28]=p):p=j[28];let O=`${I}tab-${_}`,B=`${I}tabpanel`;return j[29]===Symbol.for("react.memo_cache_sentinel")?(m={outline:"none"},j[29]=m):m=j[29],j[30]!==w||j[31]!==R?(g=R===iE&&(0,n.jsx)(iz,{children:(0,n.jsx)(tv.JsonInspector,{data:w,isExpanded:function e(t,n){let i=iM.get(t);return void 0===i?(iM.set(t,Array.isArray(n)||(0,l.isRecord)(n)),e(t,n)):i},onClick:iF,search:iO,filterOptions:{ignoreCase:!0}})}),j[30]=w,j[31]=R,j[32]=g):g=j[32],j[33]!==w||j[34]!==R?(f=R===iD&&(0,n.jsx)(ev.Code,{language:"json",tabIndex:0,onKeyDown:iV,onDoubleClick:iL,onFocus:iL,size:1,children:JSON.stringify(w,null,2)}),j[33]=w,j[34]=R,j[35]=f):f=j[35],j[36]!==O||j[37]!==B||j[38]!==g||j[39]!==f?(b=(0,n.jsxs)(ej.TabPanel,{"aria-labelledby":O,flex:1,id:B,overflow:"auto",padding:4,style:m,children:[g,f]}),j[36]=O,j[37]=B,j[38]=g,j[39]=f,j[40]=b):b=j[40],j[41]!==p||j[42]!==b?(y=(0,n.jsxs)(ev.Flex,{direction:"column",height:"fill",children:[p,b]}),j[41]=p,j[42]=b,j[43]=y):y=j[43],j[44]!==S||j[45]!==y||j[46]!==k||j[47]!==r?(v=(0,n.jsx)(h.Dialog,{bodyHeight:"fill",id:k,header:r,onClose:S,onClickOutside:S,padding:!1,width:2,children:y}),j[44]=S,j[45]=y,j[46]=k,j[47]=r,j[48]=v):v=j[48],v}function iH(e){let t,i,l,o,r,s,a,d,u,c,p,m=(0,ey.c)(22);m[0]!==e?({action:i,content:l,icon:t,tone:r,paddingY:s,...o}=e,m[0]=e,m[1]=t,m[2]=i,m[3]=l,m[4]=o,m[5]=r,m[6]=s):(t=m[1],i=m[2],l=m[3],o=m[4],r=m[5],s=m[6]);let g=void 0===r?"transparent":r,f=void 0===s?2:s;return m[7]!==t?(a=t&&(0,n.jsx)(ev.Text,{size:0,children:(0,n.jsx)(t,{})}),m[7]=t,m[8]=a):a=m[8],m[9]!==l?(d=(0,n.jsx)(ev.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:l}),m[9]=l,m[10]=d):d=m[10],m[11]!==i?(u=i&&(0,n.jsx)(h.Button,{...i,mode:i.mode||"ghost",tone:i.tone||"default"}),m[11]=i,m[12]=u):u=m[12],m[13]!==a||m[14]!==d||m[15]!==u?(c=(0,n.jsxs)(ev.Flex,{align:"center",gap:3,paddingX:2,children:[a,d,u]}),m[13]=a,m[14]=d,m[15]=u,m[16]=c):c=m[16],m[17]!==f||m[18]!==o||m[19]!==c||m[20]!==g?(p=(0,n.jsx)(ev.Box,{padding:1,children:(0,n.jsx)(ev.Card,{radius:3,paddingX:2,paddingY:f,tone:g,...o,children:c})}),m[17]=f,m[18]=o,m[19]=c,m[20]=g,m[21]=p):p=m[21],p}function iN(){let e=(0,ey.c)(3),{isDeleted:t,isDeleting:i,ready:o}=im(),{selectedPerspective:r}=(0,l.usePerspective)();if(!o)return null;if(!(0,l.isPublishedPerspective)(r)&&!(0,l.isDraftPerspective)(r)&&"archived"===r.state){let t;return e[0]!==r?(t=(0,n.jsx)(iU,{release:r}),e[0]=r,e[1]=t):t=e[1],t}if(t&&!i){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(i$,{}),e[2]=t):t=e[2],t}}function i$(){let e,t,i,o,r,s,d=(0,ey.c)(17),{documentId:u,documentType:c}=im(),{restore:p}=(0,l.useDocumentOperation)(u,c),{navigateIntent:m}=(0,eP.useRouter)();d[0]!==u||d[1]!==c||d[2]!==m||d[3]!==p?(e=()=>{p.execute("lastRevision"),m("edit",{id:u,type:c})},d[0]=u,d[1]=c,d[2]=m,d[3]=p,d[4]=e):e=d[4];let h=e,{t:g}=(0,l.useTranslation)(x);return d[5]!==g?(t=g("banners.deleted-document-banner.restore-button.text"),d[5]=g,d[6]=t):t=d[6],d[7]!==h||d[8]!==t?(i={onClick:h,text:t},d[7]=h,d[8]=t,d[9]=i):i=d[9],d[10]!==g?(o=g("banners.deleted-document-banner.text"),d[10]=g,d[11]=o):o=d[11],d[12]!==o?(r=(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:o}),d[12]=o,d[13]=r):r=d[13],d[14]!==i||d[15]!==r?(s=(0,n.jsx)(iH,{action:i,content:r,"data-testid":"deleted-document-banner",icon:a.ReadOnlyIcon}),d[14]=i,d[15]=r,d[16]=s):s=d[16],s}let iU=e=>{let t,i,o,r=(0,ey.c)(8),{release:s}=e,{t:d}=(0,l.useTranslation)();return r[0]!==s.metadata?.title||r[1]!==d?(t=s.metadata?.title||d("release.placeholder-untitled-release"),r[0]=s.metadata?.title,r[1]=d,r[2]=t):t=r[2],r[3]!==t?(i={title:t},r[3]=t,r[4]=i):i=r[4],r[5]!==d||r[6]!==i?(o=(0,n.jsx)(iH,{tone:"caution",content:(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:(0,n.jsx)(l.Translate,{t:d,i18nKey:"banners.deleted-release-banner.text",values:i})}),"data-testid":"deleted-release-banner",icon:a.DocumentRemoveIcon}),r[5]=d,r[6]=i,r[7]=o):o=r[7],o};function iG(){let e,t,i=(0,ey.c)(5),{schemaType:o}=im(),{t:r}=(0,l.useTranslation)(x);return(0,ew.isDeprecatedSchemaType)(o)?(i[0]!==r?(e=(0,n.jsx)(l.Translate,{t:r,i18nKey:"banners.deprecated-document-type-banner.text"}),i[0]=r,i[1]=e):e=i[1],i[2]!==o.deprecated.reason||i[3]!==e?(t=(0,n.jsx)(iH,{content:(0,n.jsxs)(ev.Text,{size:1,weight:"medium",children:[e," ",o.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:a.ErrorOutlineIcon}),i[2]=o.deprecated.reason,i[3]=e,i[4]=t):t=i[4],t):null}let iW=(0,tu.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),iq=(0,tu.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),iK=(0,eC.styled)(ev.Box)`
  box-sizing: border-box;
`;function iY(e){let t,o,r,s,a,d,u,c,p,m,g,f,b,y,v,j=(0,ey.c)(56),{onClose:w,onRequestSubmitted:S}=e,{t:C}=(0,l.useTranslation)(x),I=(0,ts.useTelemetry)(),_=`request-permissions-${(0,i.useId)()}`,T=(0,l.useProjectId)();j[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},j[0]=t):t=j[0];let R=(0,l.useClient)(t),P=(0,ej.useToast)(),E=(0,l.useZIndex)(),[D,k]=(0,i.useState)(!1),[M,F]=(0,i.useState)(""),[A,L]=(0,i.useState)(),[V,z]=(0,i.useState)(!1),[O,B]=(0,i.useState)(!1);e:{let e,t="administrator";if(!T||!R){let e;j[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eQ.of)(t),j[1]=e):e=j[1],o=e;break e}if(j[2]!==R.observable||j[3]!==T){let n,i;j[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(iQ).find(iX)?"editor":t,j[5]=n):n=j[5],j[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,eQ.of)(t),j[6]=i):i=j[6],e=R.observable.request({url:`/projects/${T}/roles`}).pipe((0,eA.map)(n),(0,eV.startWith)(t),(0,eL.catchError)(i)),j[2]=R.observable,j[3]=T,j[4]=e}else e=j[4];o=e}let H=(0,eR.useObservable)(o);j[7]!==R||j[8]!==M||j[9]!==S||j[10]!==T||j[11]!==H||j[12]!==I||j[13]!==P?(r=()=>{k(!0),R.request({url:`/access/project/${T}/requests`,method:"post",body:{note:M,requestUrl:window?.location.href,requestedRole:H,type:"role"}}).then(e=>{e&&(S&&S(),I.log(iq),P.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(z(!0),L(n)),409===t?(B(!0),L(n)):P.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{k(!1)})},j[7]=R,j[8]=M,j[9]=S,j[10]=T,j[11]=H,j[12]=I,j[13]=P,j[14]=r):r=j[14];let N=r,$=E.fullscreen;j[15]!==C?(s=C("request-permission-dialog.header.text"),j[15]=C,j[16]=s):s=j[16],j[17]!==C?(a=C("confirm-dialog.cancel-button.fallback-text"),j[17]=C,j[18]=a):a=j[18],j[19]!==w||j[20]!==a?(d={onClick:w,text:a},j[19]=w,j[20]=a,j[21]=d):d=j[21];let U=V||O;return j[22]!==C?(u=C("request-permission-dialog.confirm-button.text"),j[22]=C,j[23]=u):u=j[23],j[24]!==D||j[25]!==N||j[26]!==U||j[27]!==u?(c={onClick:N,loading:D,disabled:U,text:u,tone:"primary",type:"submit"},j[24]=D,j[25]=N,j[26]=U,j[27]=u,j[28]=c):c=j[28],j[29]!==c||j[30]!==d?(p={cancelButton:d,confirmButton:c},j[29]=c,j[30]=d,j[31]=p):p=j[31],j[32]!==C?(m=C("request-permission-dialog.description.text"),j[32]=C,j[33]=m):m=j[33],j[34]!==m?(g=(0,n.jsx)(ev.Text,{children:m}),j[34]=m,j[35]=g):g=j[35],j[36]!==O||j[37]!==V||j[38]!==D||j[39]!==A||j[40]!==M||j[41]!==N||j[42]!==C?(f=V||O?(0,n.jsx)(ev.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,n.jsxs)(ev.Text,{size:1,children:[V&&(0,n.jsx)(n.Fragment,{children:A??C("request-permission-dialog.warning.limit-reached.text")}),O&&(0,n.jsx)(n.Fragment,{children:A??C("request-permission-dialog.warning.denied.text")})]})}):(0,n.jsxs)(ev.Stack,{space:3,paddingBottom:0,children:[(0,n.jsx)(ev.TextInput,{placeholder:C("request-permission-dialog.note-input.placeholder.text"),disabled:D,onKeyDown:e=>{"Enter"===e.key&&N()},maxLength:150,value:M,onChange:e=>{F(e.currentTarget.value)}}),(0,n.jsx)(ev.Text,{align:"right",muted:!0,size:1,children:`${M.length}/150`})]}),j[36]=O,j[37]=V,j[38]=D,j[39]=A,j[40]=M,j[41]=N,j[42]=C,j[43]=f):f=j[43],j[44]!==g||j[45]!==f?(b=(0,n.jsx)(iK,{children:(0,n.jsxs)(ev.Stack,{space:4,children:[g,f]})}),j[44]=g,j[45]=f,j[46]=b):b=j[46],j[47]!==_||j[48]!==w||j[49]!==p||j[50]!==b||j[51]!==s?(y=(0,n.jsx)(h.Dialog,{width:1,id:_,header:s,footer:p,onClose:w,onClickOutside:w,children:b}),j[47]=_,j[48]=w,j[49]=p,j[50]=b,j[51]=s,j[52]=y):y=j[52],j[53]!==y||j[54]!==E.fullscreen?(v=(0,n.jsx)(ej.DialogProvider,{position:"fixed",zOffset:$,children:y}),j[53]=y,j[54]=E.fullscreen,j[55]=v):v=j[55],v}function iX(e){return"editor"===e.name}function iQ(e){return e?.appliesToUsers}(0,eC.styled)(ev.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let iJ={loading:!0,error:!1,status:void 0},iZ={loading:!1,error:!1,status:"none"},i0={loading:!1,error:!1,status:"declined"},i1={loading:!1,error:!1,status:"pending"},i2={loading:!1,error:!1,status:"expired"};function i3(e){let t,o,r,s,d,u,c,p,m=(0,ey.c)(29),{requiredPermission:h}=e,g=(0,l.useCurrentUser)(),{data:f,loading:b,error:y}=(()=>{let e,t,n,i=(0,ey.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let o=(0,l.useClient)(e),r=(0,l.useProjectId)();e:{var s,a;let e;if(!o||!r){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eQ.of)(iZ),i[1]=e):e=i[1],t=e;break e}i[2]!==o||i[3]!==r?(s=o,a=r,e=s.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eA.map)(e=>{if(!e||0===e.length)return iZ;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tw.isAfter)((0,tS.addWeeks)(new Date(n.createdAt),2),new Date)?i0:t.find(e=>"pending"===e.status&&(0,tw.isAfter)((0,tS.addWeeks)(new Date(e.createdAt),2),new Date))?i1:t.find(e=>"pending"===e.status&&(0,tC.isBefore)((0,tS.addWeeks)(new Date(e.createdAt),2),new Date))?i2:iZ}),(0,eL.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,eQ.of)({loading:!1,error:!0,status:void 0}))),(0,eV.startWith)(iJ)),i[2]=o,i[3]=r,i[4]=e):e=i[4],t=e}let d=t,{loading:u,error:c,status:p}=(0,eR.useObservable)(d,iJ);return i[5]!==c||i[6]!==u||i[7]!==p?(n={data:p,loading:u,error:c},i[5]=c,i[6]=u,i[7]=p,i[8]=n):n=i[8],n})(),[v,j]=(0,i.useState)(!1),w="pending"===f||"declined"===f||v,S=g?.roles||[],C=1===S.length&&"viewer"===S[0].name,[I,_]=(0,i.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},m[0]=t):t=m[0];let T=(0,l.useListFormat)(t),{t:R}=(0,l.useTranslation)(x),P=(0,ts.useTelemetry)(),E=S.map(i5),D=T.formatToParts(E).map(i4);return m[1]!==D?(o={Roles:()=>(0,n.jsx)(n.Fragment,{children:D})},m[1]=D,m[2]=o):o=m[2],m[3]!==E||m[4]!==D.length?(r={count:D.length,roles:E},m[3]=E,m[4]=D.length,m[5]=r):r=m[5],m[6]!==h||m[7]!==R||m[8]!==o||m[9]!==r?(s=(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:(0,n.jsx)(l.Translate,{t:R,i18nKey:"banners.permission-check-banner.missing-permission",components:o,values:r,context:h})}),m[6]=h,m[7]=R,m[8]=o,m[9]=r,m[10]=s):s=m[10],m[11]!==C||m[12]!==w||m[13]!==y||m[14]!==b||m[15]!==f||m[16]!==_||m[17]!==R||m[18]!==P?(d=C&&f&&!y&&!b?{onClick:w?void 0:()=>{_(!0),P.log(iW)},text:R(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,m[11]=C,m[12]=w,m[13]=y,m[14]=b,m[15]=f,m[16]=_,m[17]=R,m[18]=P,m[19]=d):d=m[19],m[20]!==s||m[21]!==d?(u=(0,n.jsx)(iH,{content:s,action:d,"data-testid":"permission-check-banner",icon:a.ReadOnlyIcon}),m[20]=s,m[21]=d,m[22]=u):u=m[22],m[23]!==_||m[24]!==I?(c=I&&(0,n.jsx)(iY,{onClose:()=>_(!1),onRequestSubmitted:()=>{j(!0),_(!1)}}),m[23]=_,m[24]=I,m[25]=c):c=m[25],m[26]!==u||m[27]!==c?(p=(0,n.jsxs)(n.Fragment,{children:[u,c]}),m[26]=u,m[27]=c,m[28]=p):p=m[28],p}function i4(e){return"element"===e.type?(0,n.jsx)("code",{children:e.value},e.value):e.value}function i5(e){return e.title}let i6=(0,i.memo)(()=>{let e=(0,l.useDocumentPreviewStore)(),{selectedReleaseId:t}=(0,l.usePerspective)(),{params:r,groupIndex:s,routerPanesState:d,replaceCurrent:u,BackLink:c}=i7(),p=d[s]?.[0].id,m=d[s-1]?.[0],h=m?.id,g=!!m?.params?.rev,f=(0,i.useMemo)(()=>r?.parentRefPath&&(0,ti.fromString)(r.parentRefPath)||null,[r?.parentRefPath]),{t:b}=(0,l.useTranslation)(x),y=(0,i.useMemo)(()=>{let n=f?.[0];if(!h||!n||!f)return(0,eQ.of)({loading:!1});let i=(0,o.getPublishedId)(h),l=(0,ti.fromString)(n),r=l.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,eZ.concat)((0,eQ.of)({loading:!0}),e.unstable_observePathsDocumentPair(i,-1===r?l:l.slice(0,r),{version:t}).pipe((0,ez.debounceTime)(750),(0,eA.map)(({draft:e,published:t,version:n})=>({loading:!1,result:{availability:{draft:e.availability,published:t.availability,...n?.availability?{version:n.availability}:{}},refValue:(0,ti.get)(n?.snapshot||e.snapshot||t.snapshot,f)?._ref}}))))},[t,e,h,f]),v=(0,eR.useObservable)(y,{loading:!0}),j=(0,i.useCallback)(()=>{v.loading||v.result?.refValue&&u({id:v.result.refValue,params:r})},[v.loading,v.result,u,r]);return h&&f&&!g&&!v.loading&&(v.result?.availability.draft.available||v.result?.availability.published.available)&&v.result?.refValue!==p?(0,n.jsx)(iH,{action:v.result?.refValue?{onClick:j,icon:a.SyncIcon,text:b("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:c,icon:a.CloseIcon,text:b("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:b(v.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:a.WarningOutlineIcon,tone:"caution"}):null});function i8(){let e,t=(0,ey.c)(2),{t:i}=(0,l.useTranslation)(x);return t[0]!==i?(e=(0,n.jsx)(iH,{tone:"caution",icon:a.WarningOutlineIcon,content:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{t:i,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),t[0]=i,t[1]=e):e=t[1],e}function i7(){return(0,i.useContext)(r.PaneRouterContext)}function i9(){let{t:e}=(0,l.useTranslation)(x),{t:t}=(0,l.useTranslation)(),{data:o}=(0,l.useArchivedReleases)(),{params:r,setParams:s}=i7(),a=(0,i.useMemo)(()=>o.find(e=>(0,l.getReleaseIdFromReleaseDocumentId)(e._id)===r?.historyVersion),[o,r?.historyVersion]),d=(0,i.useMemo)(()=>a?.state==="published"?"banners.published-release.description":a&&(0,l.isCardinalityOneRelease)(a)?"banners.archived-scheduled-draft.description":"banners.archived-release.description",[a]),u=a?.metadata.title||t("release.placeholder-untitled-release");return(0,n.jsx)(iH,{tone:"caution",content:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{t:e,i18nKey:d,values:{title:u},components:{VersionBadge:(0,l.getVersionInlineBadge)(a)}})}),action:r?.archivedRelease?void 0:{text:"Go back to published version",onClick:()=>{s({...r,rev:r?.historyEvent||void 0,since:void 0,historyVersion:void 0})}}})}i6.displayName="Memo(ReferenceChangedBanner)";let le=eC.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,lt=e=>{let t,o,r,s,d,u,c,p,m,g,f,b,y=(0,ey.c)(22),{onClose:v}=e,{t:j}=(0,l.useTranslation)(x),w=(0,i.useRef)(null);return y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[w.current],y[0]=t):t=y[0],(0,ev.useClickOutsideEvent)(v,t),y[1]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(le,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),y[1]=o):o=y[1],y[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(ev.Text,{size:1,weight:"semibold",children:"Canvas"}),y[2]=r):r=y[2],y[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsxs)(ev.Flex,{paddingY:1,gap:2,children:[r,(0,n.jsx)(ev.Text,{size:1,muted:!0,children:(0,n.jsx)(a.ComposeSparklesIcon,{})})]}),y[3]=s):s=y[3],y[4]!==j?(d=j("canvas.banner.popover-heading"),y[4]=j,y[5]=d):d=y[5],y[6]!==d?(u=(0,n.jsx)(ev.Box,{paddingTop:3,children:(0,n.jsx)(ev.Heading,{size:1,children:d})}),y[6]=d,y[7]=u):u=y[7],y[8]!==j?(c=j("canvas.banner.popover-description"),y[8]=j,y[9]=c):c=y[9],y[10]!==c?(p=(0,n.jsx)(ev.Box,{paddingTop:4,children:(0,n.jsx)(ev.Text,{size:1,children:c})}),y[10]=c,y[11]=p):p=y[11],y[12]!==u||y[13]!==p?(m=(0,n.jsxs)(ev.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[s,u,p]}),y[12]=u,y[13]=p,y[14]=m):m=y[14],y[15]!==j?(g=j("canvas.banner.popover-button-text"),y[15]=j,y[16]=g):g=y[16],y[17]!==g?(f=(0,n.jsx)(ev.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,n.jsx)(h.Button,{mode:"bleed",text:g,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:a.LaunchIcon})}),y[17]=g,y[18]=f):f=y[18],y[19]!==f||y[20]!==m?(b=(0,n.jsx)(ev.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,n.jsxs)(ev.Container,{width:0,children:[o,m,f]})}),y[19]=f,y[20]=m,y[21]=b):b=y[21],b},ln=e=>{let t,o,r,s,d,u,c,p,m=(0,ey.c)(17),{documentId:g}=e,{t:f}=(0,l.useTranslation)(x),[b,y]=(0,i.useState)(!1),v=(0,l.getDocumentVariantType)(g);e:{let e;if("published"===v){let e;m[0]!==f?(e=f("canvas.banner.linked-text.published"),m[0]=f,m[1]=e):e=m[1],t=e;break e}if("draft"===v){let e;m[2]!==f?(e=f("canvas.banner.linked-text.draft"),m[2]=f,m[3]=e):e=m[3],t=e;break e}m[4]!==f?(e=f("canvas.banner.linked-text.version"),m[4]=f,m[5]=e):e=m[5],t=e}let j=t;m[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>y(ll),m[6]=o):o=m[6];let w=o;m[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>y(!1),m[7]=r):r=m[7];let S=r;return m[8]!==j?(s=(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:j}),m[8]=j,m[9]=s):s=m[9],m[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(lt,{onClose:S}),u=(0,n.jsx)(h.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:a.InfoOutlineIcon,onClick:w}),m[10]=d,m[11]=u):(d=m[10],u=m[11]),m[12]!==b?(c=(0,n.jsx)(h.Popover,{open:b,size:0,tone:"default",portal:!0,placement:"bottom-start",content:d,children:u}),m[12]=b,m[13]=c):c=m[13],m[14]!==s||m[15]!==c?(p=(0,n.jsxs)(ev.Flex,{align:"center",gap:2,children:[s,c]}),m[14]=s,m[15]=c,m[16]=p):p=m[16],p};function li(){let e,t,i,o,r=(0,ey.c)(10),{documentId:s,displayed:a}=im(),{t:d}=(0,l.useTranslation)(x),u=a?._id||s,{companionDoc:c}=(0,l.useCanvasCompanionDoc)(u),p=(0,l.useNavigateToCanvasDoc)(c?.canvasDocumentId,"banner");return c?(r[0]!==u?(e=(0,n.jsx)(ln,{documentId:u}),r[0]=u,r[1]=e):e=r[1],r[2]!==d?(t=d("canvas.banner.edit-in-canvas-action"),r[2]=d,r[3]=t):t=r[3],r[4]!==p||r[5]!==t?(i={mode:"ghost",text:t,onClick:p},r[4]=p,r[5]=t,r[6]=i):i=r[6],r[7]!==e||r[8]!==i?(o=(0,n.jsx)(iH,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:i}),r[7]=e,r[8]=i,r[9]=o):o=r[9],o):null}function ll(e){return!e}let lo=e=>{let t,i,o,r,s,d,u,c,p,m=(0,ey.c)(27),{schemaType:h,selectedPerspective:g,reason:f}=e,{t:b}=(0,l.useTranslation)(x),{document:y}=(0,l.useWorkspace)(),{drafts:v}=y,{enabled:j}=v;m[0]!==j||m[1]!==h?(t=e=>{let{perspective:t}=e;return{disabled:!(0,l.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:j,schemaType:h}).result}},m[0]=j,m[1]=h,m[2]=t):t=m[2];let w=t;return m[3]!==f||m[4]!==b?(i="PUBLISHED_NOT_WRITEABLE"===f&&b("banners.choose-new-document-destination.cannot-create-published-document"),m[3]=f,m[4]=b,m[5]=i):i=m[5],m[6]!==f||m[7]!==b?(o="DRAFTS_NOT_WRITEABLE"===f&&b("banners.choose-new-document-destination.cannot-create-draft-document"),m[6]=f,m[7]=b,m[8]=o):o=m[8],m[9]!==f||m[10]!==g||m[11]!==b?(r="RELEASE_NOT_ACTIVE"===f&&(0,l.isReleaseDocument)(g)&&(0,n.jsx)(l.Translate,{t:b,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:g.metadata.title},components:{VersionBadge:(0,l.getVersionInlineBadge)(g)}}),m[9]=f,m[10]=g,m[11]=b,m[12]=r):r=m[12],m[13]!==b?(s=b("banners.choose-new-document-destination.choose-destination"),m[13]=b,m[14]=s):s=m[14],m[15]!==s?(d=(0,n.jsxs)(n.Fragment,{children:[" ",s]}),m[15]=s,m[16]=d):d=m[16],m[17]!==i||m[18]!==o||m[19]!==r||m[20]!==d?(u=(0,n.jsxs)(ev.Text,{size:1,children:[i,o,r,d]}),m[17]=i,m[18]=o,m[19]=r,m[20]=d,m[21]=u):u=m[21],m[22]!==w?(c=(0,n.jsx)(l.ReleasesNav,{menuItemProps:w}),m[22]=w,m[23]=c):c=m[23],m[24]!==c||m[25]!==u?(p=(0,n.jsx)(iH,{tone:"caution",icon:a.WarningOutlineIcon,content:(0,n.jsxs)(ev.Flex,{align:"center",gap:2,children:[u,c]})}),m[24]=c,m[25]=u,m[26]=p):p=m[26],p};function lr(){let e,t,i=(0,ey.c)(5),{value:o}=im(),{documentLinkedBannerContent:r}=(0,l.useSanityCreateConfig)().components??{};i[0]!==o?(e=(0,l.getSanityCreateLinkMetadata)(o),i[0]=o,i[1]=e):e=i[1];let s=e;return r&&s?(i[2]!==r||i[3]!==s?(t=(0,n.jsx)(iH,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,n.jsx)(r,{metadata:s})}),i[2]=r,i[3]=s,i[4]=t):t=i[4],t):null}function ls({documentId:e,currentRelease:t,isScheduledRelease:o}){let r=(0,l.getReleaseTone)(t??l.LATEST),{t:s}=(0,l.useTranslation)(x),{t:a}=(0,l.useTranslation)(),{createVersion:d}=(0,l.useVersionOperations)(),[u,c]=(0,i.useState)(),p=(0,ej.useToast)(),m=(0,i.useCallback)(async()=>{if(t._id){c({status:"creating",lastUpdate:new Date});try{await d((0,l.getReleaseIdFromReleaseDocumentId)(t._id),e),c({status:"created",lastUpdate:new Date})}catch(e){p.push({status:"error",closable:!0,title:s("banners.release.error.title"),description:s("banners.release.error.description",{message:e.message})}),c(void 0)}}},[d,t._id,e,s,p]),h=function(e){let t,n,l,o=(0,ey.c)(4);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,o[0]=t):t=o[0];let[r,s]=(0,i.useState)(t);return 200!==o[1]?(n=()=>{let e=setInterval(()=>{s(new Date)},200);return()=>clearInterval(e)},l=[200],o[1]=200,o[2]=n,o[3]=l):(n=o[2],l=o[3]),(0,i.useEffect)(n,l),r}(200);return(0,l.useConditionalToast)({status:"info",id:"add-document-to-release",enabled:u?.status==="created"&&h.getTime()-u.lastUpdate.getTime()>1e3,closable:!0,title:s("banners.release.waiting.title"),description:s("banners.release.waiting.description")}),(0,n.jsx)(iH,{tone:r,content:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{i18nKey:"banners.release.not-in-release",t:s,values:{title:t?.metadata?.title||a("release.placeholder-untitled-release")},components:{VersionBadge:(0,l.getVersionInlineBadge)(t)}})}),action:o?void 0:{text:s("banners.release.action.add-to-release"),tone:r,disabled:!!u,onClick:m,mode:"default"}})}let la=(0,tu.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),ld=e=>{let t,r,s,d,u,c,p,m,g,f,b,y,v,j,w,S=(0,ey.c)(47),{displayed:C,documentId:I,schemaType:_,i18nKey:T,isEditBlocking:R}=e,{t:P}=(0,l.useTranslation)(x),[E,D]=(0,i.useState)(!1),[k,M]=(0,i.useState)(!1),F=(0,ts.useTelemetry)(),{publish:A,discardChanges:L}=(0,l.useDocumentOperation)(I,C?._type||"");S[0]!==A||S[1]!==F?(t=()=>{A.execute(),D(!0),F.log(la,{liveEditResolveType:"publish"})},S[0]=A,S[1]=F,S[2]=t):t=S[2];let V=t;S[3]!==L||S[4]!==F?(r=()=>{L.execute(),M(!0),F.log(la,{liveEditResolveType:"discard"})},S[3]=L,S[4]=F,S[5]=r):r=S[5];let z=r;S[6]===Symbol.for("react.memo_cache_sentinel")?(s=()=>()=>{D(!1),M(!1)},S[6]=s):s=S[6],(0,i.useEffect)(s);let O=np();S[7]!==O||S[8]!==C?._id||S[9]!==_.name?(d=()=>{typeof C?._id>"u"||O.navigateDiffView({mode:"version",previousDocument:{type:_.name,id:(0,o.getPublishedId)(C?._id)},nextDocument:{type:_.name,id:(0,o.getDraftId)(C?._id)}})},S[7]=O,S[8]=C?._id,S[9]=_.name,S[10]=d):d=S[10];let B=d;return S[11]!==_.title?(u={schemaType:_.title},S[11]=_.title,S[12]=u):u=S[12],S[13]!==T||S[14]!==P||S[15]!==u?(c=(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:(0,n.jsx)(l.Translate,{t:P,i18nKey:T,values:u})}),S[13]=T,S[14]=P,S[15]=u,S[16]=c):c=S[16],S[17]!==P?(p=P("banners.obsolete-draft.actions.compare-draft.text"),S[17]=P,S[18]=p):p=S[18],S[19]!==B||S[20]!==p?(m=(0,n.jsx)(h.Button,{text:p,mode:"ghost",onClick:B}),S[19]=B,S[20]=p,S[21]=m):m=S[21],S[22]!==P?(g=P("banners.obsolete-draft.actions.publish-draft.text"),S[22]=P,S[23]=g):g=S[23],S[24]!==R||S[25]!==P?(f=R?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},S[24]=R,S[25]=P,S[26]=f):f=S[26],S[27]!==V||S[28]!==E||S[29]!==f||S[30]!==g?(b=(0,n.jsx)(h.Button,{onClick:V,text:g,tooltipProps:f,loading:E,tone:"positive"}),S[27]=V,S[28]=E,S[29]=f,S[30]=g,S[31]=b):b=S[31],S[32]!==P?(y=P("banners.obsolete-draft.actions.discard-draft.text"),S[32]=P,S[33]=y):y=S[33],S[34]!==R||S[35]!==P?(v=R?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},S[34]=R,S[35]=P,S[36]=v):v=S[36],S[37]!==z||S[38]!==k||S[39]!==y||S[40]!==v?(j=(0,n.jsx)(h.Button,{onClick:z,text:y,tooltipProps:v,loading:k,tone:"caution"}),S[37]=z,S[38]=k,S[39]=y,S[40]=v,S[41]=j):j=S[41],S[42]!==b||S[43]!==j||S[44]!==c||S[45]!==m?(w=(0,n.jsx)(iH,{content:(0,n.jsxs)(ev.Flex,{align:"center",justify:"space-between",gap:2,children:[c,m,b,j]}),"data-testid":"live-edit-type-banner",icon:a.ErrorOutlineIcon}),S[42]=b,S[43]=j,S[44]=c,S[45]=m,S[46]=w):w=S[46],w};function lu(e){let t,i,r=(0,ey.c)(4),{documentId:s,isPinnedDraftOrPublished:a}=e;r[0]!==s?(t={documentId:s},r[0]=s,r[1]=t):t=r[1];let d=(0,l.useOnlyHasVersions)(t);return(0,o.isVersionId)(s)&&d&&a?(r[2]!==s?(i=(0,n.jsx)(lc,{documentId:s}),r[2]=s,r[3]=i):i=r[3],i):null}function lc({documentId:e}){let{data:t}=(0,l.useActiveReleases)(),r=(0,l.useSetPerspective)(),s=(0,o.getVersionFromId)(e)??"",a=(0,i.useMemo)(()=>t.find(e=>e._id.includes(s)),[t,s]),{t:d}=(0,l.useTranslation)(),{data:u}=(0,l.useDocumentVersions)({documentId:e}),c=(0,i.useMemo)(()=>t.filter(e=>u.find(t=>{let n=(0,o.getVersionFromId)(t)??"";return(0,l.getReleaseIdFromReleaseDocumentId)(e._id)===n})).map(e=>e.metadata.title||d("release.placeholder-untitled-release")),[t,u,d]),p=a&&(0,l.getReleaseTone)(a),{t:m}=(0,l.useTranslation)(x),h=(0,i.useCallback)(async()=>{r(s)},[s,r]);return(0,n.jsx)(iH,{tone:p,"data-testid":"open-release-to-edit-banner",content:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(ev.Flex,{direction:"row",gap:1,wrap:"wrap",children:c.length>1?(0,n.jsx)(l.Translate,{t:m,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,n.jsxs)(l.VersionInlineBadge,{children:[" ",c[0]]})},values:{count:c.length-1}}):(0,n.jsx)(l.Translate,{t:m,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,n.jsxs)(l.VersionInlineBadge,{children:[" ",c[0]]})}})})}),action:{text:m("banners.release.action.open-to-edit"),tone:p,onClick:h,mode:"default"}})}function lp(){let e,t,i=(0,ey.c)(4),{revisionNotFound:o}=im(),{t:r}=(0,l.useTranslation)(x);return o?(i[0]!==r?(e=r("banners.revision-not-found.description"),i[0]=r,i[1]=e):e=i[1],i[2]!==e?(t=(0,n.jsx)(iH,{tone:"caution","data-test-id":"revision-not-found-banner",icon:a.WarningOutlineIcon,content:(0,n.jsx)(ev.Text,{size:1,children:e})}),i[2]=e,i[3]=t):t=i[3],t):null}function lm(e){let t,i,o,r,s,d=(0,ey.c)(12),{currentRelease:u}=e,c=u??l.LATEST;d[0]!==c?(t=(0,l.getReleaseTone)(c),d[0]=c,d[1]=t):t=d[1];let p=t,{t:m}=(0,l.useTranslation)();return d[2]!==u?(i=(0,l.formatRelativeLocalePublishDate)(u),d[2]=u,d[3]=i):i=d[3],d[4]!==i?(o={date:i},d[4]=i,d[5]=o):o=d[5],d[6]!==o||d[7]!==m?(r=(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{t:m,i18nKey:"release.banner.scheduled-for-publishing-on",values:o})}),d[6]=o,d[7]=m,d[8]=r):r=d[8],d[9]!==r||d[10]!==p?(s=(0,n.jsx)(iH,{tone:p,icon:a.LockIcon,content:r}),d[9]=r,d[10]=p,d[11]=s):s=d[11],s}function lh(){let e=(0,ey.c)(18),{value:t,editState:i}=im(),{selectedPerspective:o}=(0,l.usePerspective)(),r=(0,l.isGoingToUnpublish)(t)||i?.version&&(0,l.isGoingToUnpublish)(i?.version),{t:s}=(0,l.useTranslation)(x),{t:d}=(0,l.useTranslation)();if((0,l.isReleaseDocument)(o)&&r){let t,i,r,u,c,p,m;e[0]!==o.metadata?.title||e[1]!==d?(t=o.metadata?.title||d("release.placeholder-untitled-release"),e[0]=o.metadata?.title,e[1]=d,e[2]=t):t=e[2];let h=t;return e[3]!==h?(i={title:h},e[3]=h,e[4]=i):i=e[4],e[5]!==o?(r=(0,l.getVersionInlineBadge)(o),e[5]=o,e[6]=r):r=e[6],e[7]!==r?(u={VersionBadge:r},e[7]=r,e[8]=u):u=e[8],e[9]!==s||e[10]!==i||e[11]!==u?(c=(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{t:s,i18nKey:"banners.unpublished-release-banner.text",values:i,components:u})}),e[9]=s,e[10]=i,e[11]=u,e[12]=c):c=e[12],e[13]!==s?(p=(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{t:s,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=s,e[14]=p):p=e[14],e[15]!==c||e[16]!==p?(m=(0,n.jsx)(iH,{tone:"critical",content:(0,n.jsxs)(ev.Stack,{space:2,children:[c,p]}),icon:a.UnpublishIcon}),e[15]=c,e[16]=p,e[17]=m):m=e[17],m}return null}let lg=(0,eC.styled)(ev.Stack)`
  ${({theme:e})=>eC.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,lf=e=>{let t,i,o,r,s=(0,ey.c)(14),{documentId:d,schemaType:u,title:c}=e,p=d===u.name,m=u.description,{t:g}=(0,l.useTranslation)(x);if(!1===u.__experimental_formPreviewTitle)return null;s[0]!==m||s[1]!==p||s[2]!==u.name||s[3]!==u.title?(t=!p&&(0,n.jsxs)(ev.Inline,{space:1,children:[(0,n.jsx)(ev.Text,{muted:!0,size:1,children:u.title??u.name}),m&&(0,n.jsx)(h.Tooltip,{content:m,placement:"right",children:(0,n.jsx)(a.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),s[0]=m,s[1]=p,s[2]=u.name,s[3]=u.title,s[4]=t):t=s[4];let f=!c;return s[5]!==g||s[6]!==c?(i=c??g("document-view.form-view.form-title-fallback"),s[5]=g,s[6]=c,s[7]=i):i=s[7],s[8]!==f||s[9]!==i?(o=(0,n.jsx)(ev.Heading,{as:"h2","data-heading":!0,muted:f,"data-testid":"document-panel-document-title",children:i}),s[8]=f,s[9]=i,s[10]=o):o=s[10],s[11]!==t||s[12]!==o?(r=(0,n.jsxs)(lg,{marginBottom:6,space:4,children:[t,o]}),s[11]=t,s[12]=o,s[13]=r):r=s[13],r},lx=e=>e.preventDefault(),lb=(0,i.forwardRef)(function(e,t){let o,r,s,a,d,u,c,p,m,h,g,f,b,y,v,j=(0,ey.c)(77),{hidden:w,margins:S}=e,{collapsedFieldSets:C,collapsedPaths:I,displayed:_,editState:T,documentId:R,documentType:P,fieldActions:E,onChange:D,validation:k,ready:M,formState:F,onFocus:A,connectionState:L,onBlur:V,onSetCollapsedPath:z,onPathOpen:O,onSetCollapsedFieldSet:B,onSetActiveFieldGroup:H,openPath:N,compareValue:$,hasUpstreamVersion:U}=im(),{selectedReleaseId:G,selectedPerspective:W}=(0,l.usePerspective)(),q=(0,l.useDocumentStore)(),K=(0,l.useDocumentPresence)(R),{title:Y}=iS(),[X]=(0,i.useState)(ly),Q=T?.transactionSyncLock?.enabled,{t:J}=(0,l.useTranslation)(x);j[0]!==J?(o=J("document-view.form-view.sync-lock-toast.title"),j[0]=J,j[1]=o):o=j[1],j[2]!==J?(r=J("document-view.form-view.sync-lock-toast.description"),j[2]=J,j[3]=r):r=j[3],j[4]!==Q||j[5]!==o||j[6]!==r?(s={id:"sync-lock",status:"warning",enabled:Q,title:o,description:r,closable:!0},j[4]=Q,j[5]=o,j[6]=r,j[7]=s):s=j[7],(0,l.useConditionalToast)(s),j[8]!==R||j[9]!==q.pair||j[10]!==P||j[11]!==X||j[12]!==G?(a=()=>{let e=q.pair.documentEvents(R,P,G).pipe((0,eO.tap)(e=>{var t,n;let i,o,r;"mutation"===e.type&&X.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,l.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&X.publish((o=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),r=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,l.fromMutationPatches)("remote",o).concat((0,l.fromMutationPatches)("local",r))}))})).subscribe();return()=>{e.unsubscribe()}},j[8]=R,j[9]=q.pair,j[10]=P,j[11]=X,j[12]=G,j[13]=a):a=j[13],j[14]!==R||j[15]!==q||j[16]!==P||j[17]!==X||j[18]!==G?(d=[R,q,P,X,G],j[14]=R,j[15]=q,j[16]=P,j[17]=X,j[18]=G,j[19]=d):d=j[19],(0,i.useEffect)(a,d);let Z=!!_?._rev;j[20]!==X||j[21]!==_?(u=()=>{X.publish({type:"mutation",patches:[],snapshot:_})},j[20]=X,j[21]=_,j[22]=u):u=j[22];let ee=(0,t_.useEffectEvent)(u);j[23]!==ee||j[24]!==Z?(c=()=>{Z&&ee()},j[23]=ee,j[24]=Z,j[25]=c):c=j[25],j[26]!==Z?(p=[Z],j[26]=Z,j[27]=p):p=j[27],(0,i.useEffect)(c,p);let[et,en]=(0,i.useState)(null),[ei,el]=(0,i.useState)(!1);j[28]!==ei||j[29]!==et||j[30]!==F?.focusPath.length||j[31]!==M?(m=()=>{!ei&&M&&!F?.focusPath.length&&et&&(el(!0),(0,ej.focusFirstDescendant)(et))},j[28]=ei,j[29]=et,j[30]=F?.focusPath.length,j[31]=M,j[32]=m):m=j[32];let eo=F?.focusPath.length;j[33]!==ei||j[34]!==et||j[35]!==M||j[36]!==eo?(h=[ei,et,eo,M],j[33]=ei,j[34]=et,j[35]=M,j[36]=eo,j[37]=h):h=j[37],(0,i.useEffect)(m,h),j[38]!==t?(g=e=>{en(e),"function"==typeof t?t(e):t&&(t.current=e)},j[38]=t,j[39]=g):g=j[39];let er=g,es="reconnecting"===L||F?.readOnly||!T?.ready,ea=es?"true":void 0;return j[40]!==C||j[41]!==I||j[42]!==$||j[43]!==L||j[44]!==R||j[45]!==T?.draft||j[46]!==T?.published||j[47]!==E||j[48]!==F||j[49]!==U||j[50]!==w||j[51]!==es||j[52]!==V||j[53]!==D||j[54]!==A||j[55]!==O||j[56]!==H||j[57]!==B||j[58]!==z||j[59]!==N||j[60]!==X||j[61]!==K||j[62]!==W||j[63]!==J||j[64]!==Y||j[65]!==k?(f="connecting"!==L||T?.draft||T?.published?null===F||w?(0,n.jsx)(ev.Box,{padding:2,children:(0,n.jsx)(ev.Text,{children:J("document-view.form-view.form-hidden")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(lf,{documentId:R,schemaType:F.schemaType,title:Y}),(0,n.jsx)(l.FormBuilder,{__internal_fieldActions:E,__internal_patchChannel:X,changed:F.changed,collapsedFieldSets:C,collapsedPaths:I,compareValue:$??void 0,focused:F.focused,focusPath:F.focusPath,groups:F.groups,id:"root",members:F.members,onChange:D,onFieldGroupSelect:H,onPathBlur:V,onPathFocus:A,onPathOpen:O,onSetFieldSetCollapsed:B,onSetPathCollapsed:z,openPath:N,perspective:W,hasUpstreamVersion:U,presence:K,readOnly:es,schemaType:F.schemaType,validation:k,value:F.value})]}):(0,n.jsx)(id,{ms:300,children:(0,n.jsxs)(ev.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,n.jsx)(ev.Spinner,{muted:!0}),(0,n.jsx)(ev.Box,{marginTop:3,children:(0,n.jsx)(ev.Text,{align:"center",muted:!0,size:1,children:J("document-view.form-view.loading")})})]})}),j[40]=C,j[41]=I,j[42]=$,j[43]=L,j[44]=R,j[45]=T?.draft,j[46]=T?.published,j[47]=E,j[48]=F,j[49]=U,j[50]=w,j[51]=es,j[52]=V,j[53]=D,j[54]=A,j[55]=O,j[56]=H,j[57]=B,j[58]=z,j[59]=N,j[60]=X,j[61]=K,j[62]=W,j[63]=J,j[64]=Y,j[65]=k,j[66]=f):f=j[66],j[67]!==er||j[68]!==ea||j[69]!==f?(b=(0,n.jsx)(ev.Box,{as:"form",onSubmit:lx,ref:er,"data-testid":"form-view","data-read-only":ea,children:f}),j[67]=er,j[68]=ea,j[69]=f,j[70]=b):b=j[70],j[71]!==S||j[72]!==b?(y=(0,n.jsx)(l.PresenceOverlay,{margins:S,children:b}),j[71]=S,j[72]=b,j[73]=y):y=j[73],j[74]!==w||j[75]!==y?(v=(0,n.jsx)(ev.Container,{hidden:w,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:y}),j[74]=w,j[75]=y,j[76]=v):v=j[76],v});function ly(){return(0,l.createPatchChannel)()}function lv(){let e,t,i=(0,ey.c)(11),{activeViewId:l,paneKey:o,views:r}=im(),s=`${o}tabpanel`;if(i[0]!==l||i[1]!==o||i[2]!==s||i[3]!==r){let t;i[5]!==l||i[6]!==o||i[7]!==s?(t=(e,t)=>(0,n.jsx)(lj,{icon:e.icon,id:`${o}tab-${e.id}`,isActive:l===e.id,label:e.title,tabPanelId:s,viewId:0===t?null:e.id??null},e.id),i[5]=l,i[6]=o,i[7]=s,i[8]=t):t=i[8],e=r.map(t),i[0]=l,i[1]=o,i[2]=s,i[3]=r,i[4]=e}else e=i[4];return i[9]!==e?(t=(0,n.jsx)(ev.TabList,{space:1,children:e}),i[9]=e,i[10]=t):t=i[10],t}function lj(e){let t,i,l,o,r,s,a,d,u,c=(0,ey.c)(20);c[0]!==e?({icon:t,id:i,isActive:l,label:o,tabPanelId:s,viewId:a,...r}=e,c[0]=e,c[1]=t,c[2]=i,c[3]=l,c[4]=o,c[5]=r,c[6]=s,c[7]=a):(t=c[1],i=c[2],l=c[3],o=c[4],r=c[5],s=c[6],a=c[7]);let{ready:p,editState:m}=im(),{setView:g}=i7();c[8]!==g||c[9]!==a?(d=()=>g(a),c[8]=g,c[9]=a,c[10]=d):d=c[10];let f=d,x=!p&&!m?.draft&&!m?.published;return c[11]!==f||c[12]!==t||c[13]!==i||c[14]!==l||c[15]!==o||c[16]!==r||c[17]!==x||c[18]!==s?(u=(0,n.jsx)(h.Tab,{...r,"aria-controls":s,disabled:x,icon:t,id:i,label:o,onClick:f,selected:l}),c[11]=f,c[12]=t,c[13]=i,c[14]=l,c[15]=o,c[16]=r,c[17]=x,c[18]=s,c[19]=u):u=c[19],u}function lw(){let e,t,i=(0,ey.c)(18),{connectionState:o,schemaType:r,title:s,value:a}=im(),{title:d,error:u}=iS(),{t:c}=(0,l.useTranslation)(x);if("connecting"===o&&!a){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),i[0]=e):e=i[0],e}if(s){let e;return i[1]!==s?(e=(0,n.jsx)(n.Fragment,{children:s}),i[1]=s,i[2]=e):e=i[2],e}if(!a){let e,t,l=r?.title||r?.name;return i[3]!==c||i[4]!==l?(e=c("panes.document-header-title.new.text",{schemaType:l}),i[3]=c,i[4]=l,i[5]=e):e=i[5],i[6]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),i[6]=e,i[7]=t):t=i[7],t}if(u){let e,t;return i[8]!==u||i[9]!==c?(e=c("panes.document-header-title.error.text",{error:u}),i[8]=u,i[9]=c,i[10]=e):e=i[10],i[11]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),i[11]=e,i[12]=t):t=i[12],t}return i[13]!==d||i[14]!==c?(e=d||(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:c("panes.document-header-title.untitled.text")}),i[13]=d,i[14]=c,i[15]=e):e=i[15],i[16]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),i[16]=e,i[17]=t):t=i[17],t}let lS=e=>{let t,i,o,r,s,d,u=(0,ey.c)(16);u[0]!==e?({documentExists:t,...i}=e,u[0]=e,u[1]=t,u[2]=i):(t=u[1],i=u[2]);let{isFavorited:c,isReady:p,favorite:m,unfavorite:g}=(0,l.useManageFavorite)(i),{t:f}=(0,l.useTranslation)(x),b=c?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";u[3]!==f||u[4]!==b?(o=f(b),u[3]=f,u[4]=b,u[5]=o):o=u[5];let y=o,v=c?g:m,j=!p||!t;return u[6]!==y?(r={content:(0,n.jsx)(ev.Text,{size:1,children:y}),placement:"right"},u[6]=y,u[7]=r):r=u[7],u[8]!==c?(s=(0,n.jsx)(ev.Text,{size:1,children:c?(0,n.jsx)(a.StarFilledIcon,{}):(0,n.jsx)(a.StarIcon,{})}),u[8]=c,u[9]=s):s=u[9],u[10]!==y||u[11]!==v||u[12]!==j||u[13]!==r||u[14]!==s?(d=(0,n.jsx)(h.Button,{mode:"bleed",onClick:v,disabled:j,"aria-label":y,"aria-live":"assertive",tooltipProps:r,children:s}),u[10]=y,u[11]=v,u[12]=j,u[13]=r,u[14]=s,u[15]=d):d=u[15],d},lC=(0,i.memo)(function(){let e,t,i,o,r,s,d=(0,ey.c)(24),{editState:u,connectionState:c,views:p,documentId:m,displayed:g}=im(),{features:f}=ix(),{index:b,BackLink:y}=i7(),{activeWorkspace:v}=(0,l.useActiveWorkspace)(),j=p.length>1,{collapsed:w,isLast:S}=nN(),C=S&&!w?-1:0,I=f.backButton&&b>0,{t:_}=(0,l.useTranslation)(x);d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(lw,{}),d[0]=e):e=d[0];let T=e;d[1]!==j?(t=j&&(0,n.jsx)(lv,{}),d[1]=j,d[2]=t):t=d[2];let R=t;d[3]!==y||d[4]!==I||d[5]!==_?(i=I&&(0,n.jsx)(h.Button,{as:y,"data-as":"a",icon:a.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:_("pane-header.back-button.text")}}),d[3]=y,d[4]=I,d[5]=_,d[6]=i):i=d[6];let P=i,E=g?._id??m,D=g?._type??"";d[7]!==v.dataset||d[8]!==v.projectId?(o=[v.projectId,v.dataset],d[7]=v.dataset,d[8]=v.projectId,d[9]=o):o=d[9];let k=o.join("."),M=(u?.ready&&(u.version??u.draft??u.published)!==null)??!1;d[10]!==v.dataset||d[11]!==v.name||d[12]!==v.projectId||d[13]!==E||d[14]!==D||d[15]!==k||d[16]!==M?(r=(0,n.jsx)(l.CapabilityGate,{capability:"comlink",condition:"available",children:(0,n.jsx)(lS,{resourceType:"studio",documentId:E,documentType:D,resourceId:k,schemaName:v.name,projectId:v.projectId,dataset:v.dataset,documentExists:M})}),d[10]=v.dataset,d[11]=v.name,d[12]=v.projectId,d[13]=E,d[14]=D,d[15]=k,d[16]=M,d[17]=r):r=d[17];let F=r,A="connecting"===c&&!u?.draft&&!u?.published;return d[18]!==P||d[19]!==F||d[20]!==A||d[21]!==C||d[22]!==R?(s=(0,n.jsx)(n8,{loading:A,title:T,tabs:R,tabIndex:C,backButton:P,appendTitle:F}),d[18]=P,d[19]=F,d[20]=A,d[21]=C,d[22]=R,d[23]=s):s=d[23],s}),lI=(0,eC.styled)(ev.Box)({position:"relative"}),l_=(0,eC.styled)(l.ScrollContainer)(({$disabled:e})=>e?{height:"100%"}:eC.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),lT=function(e){let t,r,s,a,d,u,c,p,m,h,g,f,x,b,y,v,j=(0,ey.c)(109),{footerHeight:w,headerHeight:S,isInspectOpen:C,rootElement:I,setDocumentPanelPortalElement:_,footer:T}=e,{activeViewId:R,displayed:P,documentId:E,editState:D,inspector:k,value:M,views:F,ready:A,schemaType:L,permissions:V,isPermissionsLoading:z}=im();if(j[0]!==M){let e=(0,l.getSanityCreateLinkMetadata)(M);t=(0,l.isSanityCreateLinked)(e),j[0]=M,j[1]=t}else t=j[1];let O=t,{params:B}=i7(),{collapsed:H}=nL(),{collapsed:N}=nN(),$=(0,ev.usePortal)(),{features:U}=ix(),[G,W]=(0,i.useState)(null),[q,K]=(0,i.useState)(null),Y=(0,i.useRef)(null),X=(0,l.useWorkspace)(),Q=M._createdAt?"update":"create";j[2]!==R||j[3]!==F?(r=F.find(e=>e.id===R)||F[0]||{type:"form"},j[2]=R,j[3]=F,j[4]=r):r=j[4];let J=r,Z=U.splitPanes&&G||$.element;e:{let e;if(H){let e,t=S||0,n=w?w+2:2;j[5]!==t||j[6]!==n?(e=[t,0,n,0],j[5]=t,j[6]=n,j[7]=e):e=j[7],s=e;break e}j[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],j[8]=e):e=j[8],s=e}let ee=s,et="form"!==J.type;j[9]!==J.component||j[10]!==J.options||j[11]!==J.type||j[12]!==P||j[13]!==E||j[14]!==D?.draft||j[15]!==D?.published||j[16]!==L||j[17]!==M?(a=()=>{if("component"===J.type&&J.component){let e=J.component;return(0,n.jsx)(e,{document:{draft:D?.draft||null,displayed:P||M,historical:P,published:D?.published||null},documentId:E,options:J.options,schemaType:L})}return!1},j[9]=J.component,j[10]=J.options,j[11]=J.type,j[12]=P,j[13]=E,j[14]=D?.draft,j[15]=D?.published,j[16]=L,j[17]=M,j[18]=a):a=j[18],j[19]!==a?(d=a(),j[19]=a,j[20]=d):d=j[20];let en=d;j[21]!==q?(u=()=>{q?.scrollTo&&q.scrollTo(0,0)},j[21]=q,j[22]=u):u=j[22],j[23]!==E||j[24]!==q?(c=[E,q],j[23]=E,j[24]=q,j[25]=c):c=j[25],(0,i.useEffect)(u,c),j[26]!==Z||j[27]!==_?(p=()=>{Z&&_(Z)},m=[Z,_],j[26]=Z,j[27]=_,j[28]=p,j[29]=m):(p=j[28],m=j[29]),(0,i.useEffect)(p,m),j[30]!==P||j[31]!==C||j[32]!==M?(h=C?(0,n.jsx)(iB,{value:P||M}):null,j[30]=P,j[31]=C,j[32]=M,j[33]=h):h=j[33];let ei=h,el=!!(!N&&k),{selectedPerspective:eo,selectedReleaseId:er}=(0,l.usePerspective)(),es=B?.historyVersion;j[34]!==P||j[35]!==E||j[36]!==es?(g={historyVersion:es,displayed:P,documentId:E},j[34]=P,j[35]=E,j[36]=es,j[37]=g):g=j[37];let ea=(0,l.useFilteredReleases)(g);t:{let e,t,i,r,s,a,d,u,c,p,m,h,g,x;if(B?.historyVersion){let e;j[38]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(i9,{}),j[38]=e):e=j[38],f=e;break t}j[39]!==eo?(e=(0,l.isReleaseDocument)(eo)&&(0,l.isReleaseScheduledOrScheduling)(eo),j[39]=eo,j[40]=e):e=j[40];let b=e,y=!!(b&&P?._id&&(0,o.getVersionFromId)(P?._id)===er);if(j[41]!==D||j[42]!==L||j[43]!==eo||j[44]!==X.document.drafts.enabled?(i=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,l.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,l.isPerspectiveWriteable)({selectedPerspective:eo,isDraftModelEnabled:X.document.drafts.enabled,schemaType:L}),editState:D}),j[41]=D,j[42]=L,j[43]=eo,j[44]=X.document.drafts.enabled,j[45]=t,j[46]=i):(t=j[45],i=j[46]),i){let e;j[47]!==t.reason||j[48]!==t.result||j[49]!==L||j[50]!==eo?(e=!t.result&&(0,n.jsx)(lo,{schemaType:L,selectedPerspective:eo,reason:t.reason}),j[47]=t.reason,j[48]=t.result,j[49]=L,j[50]=eo,j[51]=e):e=j[51],f=e;break t}if(y){let e;j[52]!==eo?(e=(0,n.jsx)(lm,{currentRelease:eo}),j[52]=eo,j[53]=e):e=j[53],f=e;break t}let v=ea.currentReleases.some(l.isCardinalityOneRelease);if("drafts"===eo&&v){let e;j[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(i8,{}),j[54]=e):e=j[54],f=e;break t}j[55]!==eo?(r=(0,l.isSystemBundle)(eo),j[55]=eo,j[56]=r):r=j[56];let w=r,S=D?.version&&(0,l.isGoingToUnpublish)(D?.version);if(P?._id&&(0,o.getVersionFromId)(P._id)!==er&&A&&!w&&!1===(0,l.isNewDocument)(D)&&!S){let e;j[57]!==b||j[58]!==eo||j[59]!==M._id?(e=(0,n.jsx)(ls,{documentId:M._id,currentRelease:eo,isScheduledRelease:b}),j[57]=b,j[58]=eo,j[59]=M._id,j[60]=e):e=j[60],f=e;break t}let C=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return!1===i?{result:!1}:l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:D,workspace:X,schemaType:L});if("form"===J.type&&!er&&C.result){if("DRAFT_MODEL_INACTIVE"===C.reason){let e;j[61]!==P||j[62]!==E||j[63]!==L?(e=(0,n.jsx)(ld,{displayed:P,documentId:E,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),j[61]=P,j[62]=E,j[63]=L,j[64]=e):e=j[64],f=e;break t}if("LIVE_EDIT_ACTIVE"===C.reason){let e;j[65]!==P||j[66]!==E||j[67]!==L?(e=(0,n.jsx)(ld,{displayed:P,documentId:E,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),j[65]=P,j[66]=E,j[67]=L,j[68]=e):e=j[68],f=e;break t}}if("form"!==J.type||z){f=null;break t}j[69]!==O?(s=O&&(0,n.jsx)(lr,{}),j[69]=O,j[70]=s):s=j[70],j[71]!==V?.granted||j[72]!==Q?(a=!V?.granted&&(0,n.jsx)(i3,{requiredPermission:Q}),j[71]=V?.granted,j[72]=Q,j[73]=a):a=j[73],j[74]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(lp,{}),u=(0,n.jsx)(i6,{}),c=(0,n.jsx)(iG,{}),p=(0,n.jsx)(li,{}),m=(0,n.jsx)(iN,{}),h=(0,n.jsx)(lh,{}),j[74]=d,j[75]=u,j[76]=c,j[77]=p,j[78]=m,j[79]=h):(d=j[74],u=j[75],c=j[76],p=j[77],m=j[78],h=j[79]);let I=P?._id??E;j[80]!==w||j[81]!==I?(g=(0,n.jsx)(lu,{documentId:I,isPinnedDraftOrPublished:w}),j[80]=w,j[81]=I,j[82]=g):g=j[82],j[83]!==s||j[84]!==a||j[85]!==g?(x=(0,n.jsxs)(n.Fragment,{children:[s,a,d,u,c,p,m,h,g]}),j[83]=s,j[84]=a,j[85]=g,j[86]=x):x=j[86],f=x}let ed=f;j[87]!==q?(x={documentScrollElement:q},j[87]=q,j[88]=x):x=j[88];let eu=x,ec=U.resizablePanes||!el;return j[89]!==en||j[90]!==ed||j[91]!==q||j[92]!==T||j[93]!==et||j[94]!==ei||j[95]!==H||j[96]!==ee||j[97]!==Z||j[98]!==eu||j[99]!==ec?(b=ec&&(0,n.jsxs)(ev.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,n.jsxs)(l.LegacyLayerProvider,{zOffset:"paneHeader",children:[ed,(0,n.jsx)(lC,{})]}),(0,n.jsx)(lI,{flex:2,children:(0,n.jsx)(ev.PortalProvider,{element:Z,__unstable_elements:eu,children:(0,n.jsx)(ev.BoundaryElementProvider,{element:q,children:(0,n.jsxs)(l.VirtualizerScrollInstanceProvider,{scrollElement:q,containerElement:Y,children:[(0,n.jsxs)(l_,{$disabled:H||!1,"data-testid":"document-panel-scroller",ref:K,children:[(0,n.jsx)(lb,{hidden:et,margins:ee,ref:Y}),en]}),ei,(0,n.jsx)("div",{"data-testid":"document-panel-portal",ref:W})]})})})}),T]}),j[89]=en,j[90]=ed,j[91]=q,j[92]=T,j[93]=et,j[94]=ei,j[95]=H,j[96]=ee,j[97]=Z,j[98]=eu,j[99]=ec,j[100]=b):b=j[100],j[101]!==E||j[102]!==I||j[103]!==L||j[104]!==el?(y=el&&(0,n.jsx)(ev.BoundaryElementProvider,{element:I,children:(0,n.jsx)(iR,{documentId:E,documentType:L.name,flex:1})}),j[101]=E,j[102]=I,j[103]=L,j[104]=el,j[105]=y):y=j[105],j[106]!==b||j[107]!==y?(v=(0,n.jsx)(n$,{children:(0,n.jsxs)(ev.Flex,{height:"fill",children:[b,y]})}),j[106]=b,j[107]=y,j[108]=v):v=j[108],v};function lR(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}lT.displayName="DocumentPanel";let lP=(0,to.default)(lR);function lE(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&r.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...r,...l]}let lD=Object.freeze({}),lk=Symbol("LOADING_PANE"),lM="documentPanelPortalElement",lF=["left","bottom"],lA={small:0,medium:1,large:2,full:"auto"};function lL(e){let t,i,o,r=(0,ey.c)(16),{dialog:s,referenceElement:a}=e,{t:d}=(0,l.useTranslation)(x),{cancelButtonIcon:u,cancelButtonText:c,confirmButtonIcon:p,confirmButtonText:m,message:h,onCancel:g,onConfirm:f,tone:b}=s;return r[0]!==c||r[1]!==d?(t=c||d("confirm-dialog.cancel-button.fallback-text"),r[0]=c,r[1]=d,r[2]=t):t=r[2],r[3]!==m||r[4]!==d?(i=m||d("confirm-dialog.confirm-button.fallback-text"),r[3]=m,r[4]=d,r[5]=i):i=r[5],r[6]!==u||r[7]!==p||r[8]!==h||r[9]!==g||r[10]!==f||r[11]!==a||r[12]!==t||r[13]!==i||r[14]!==b?(o=(0,n.jsx)(tr.ConfirmPopover,{cancelButtonIcon:u,cancelButtonText:t,confirmButtonIcon:p,confirmButtonText:i,message:h,onCancel:g,onConfirm:f,open:!0,referenceElement:a,tone:b,placement:"top",fallbackPlacements:lF}),r[6]=u,r[7]=p,r[8]=h,r[9]=g,r[10]=f,r[11]=a,r[12]=t,r[13]=i,r[14]=b,r[15]=o):o=r[15],o}function lV(e){let t,o,r,s=(0,ey.c)(12),{dialog:a}=e,d=(0,i.useId)();s[0]!==a.footer?(t=a.footer&&(0,n.jsx)(ev.Box,{paddingX:4,paddingY:3,children:a.footer}),s[0]=a.footer,s[1]=t):t=s[1];let u=t,c=!1===a.showCloseButton,p=void 0===a.width?1:lA[a.width];return s[2]!==a.content?(o=(0,n.jsx)(ev.Box,{padding:4,children:a.content}),s[2]=a.content,s[3]=o):o=s[3],s[4]!==a.header||s[5]!==a.onClose||s[6]!==d||s[7]!==u||s[8]!==c||s[9]!==p||s[10]!==o?(r=(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,n.jsx)(ej.Dialog,{animate:!0,__unstable_hideCloseButton:c,footer:u,header:a.header,id:d,onClose:a.onClose,onClickOutside:a.onClose,width:p,children:o})}),s[4]=a.header,s[5]=a.onClose,s[6]=d,s[7]=u,s[8]=c,s[9]=p,s[10]=o,s[11]=r):r=s[11],r}function lz(e){let t,i,l=(0,ey.c)(5),{dialog:o,referenceElement:r}=e;return l[0]!==o?(t=(0,n.jsx)(lO,{dialog:o}),l[0]=o,l[1]=t):t=l[1],l[2]!==r||l[3]!==t?(i=(0,n.jsx)(ev.Popover,{content:t,fallbackPlacements:lF,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:r}),l[2]=r,l[3]=t,l[4]=i):i=l[4],i}function lO(e){let t,l,o,r=(0,ey.c)(6),{dialog:s}=e,{content:a,onClose:d}=s,{isTopLayer:u}=(0,ev.useLayer)(),c=(0,i.useRef)(null);return r[0]!==u||r[1]!==d?(t=e=>{"Escape"===e.key&&u&&d()},r[0]=u,r[1]=d,r[2]=t):t=r[2],(0,ev.useGlobalKeyDown)(t),r[3]===Symbol.for("react.memo_cache_sentinel")?(l=()=>[c.current],r[3]=l):l=r[3],(0,ev.useClickOutsideEvent)(u&&d,l),r[4]!==a?(o=(0,n.jsx)("div",{ref:c,children:a}),r[4]=a,r[5]=o):o=r[5],o}function lB(e){let t,i=(0,ey.c)(3),{children:l}=e,{element:o,elements:r}=(0,ev.usePortal)(),s=r?.[lM]||o;return i[0]!==l||i[1]!==s?(t=(0,n.jsx)(ev.PortalProvider,{element:s,children:l}),i[0]=l,i[1]=s,i[2]=t):t=i[2],t}function lH(e){let t,l,o=(0,ey.c)(17),{dialog:r,referenceElement:s}=e,a=void 0===s?null:s,d=(0,i.useId)();if("confirm"===r.type){let e;return o[0]!==r||o[1]!==a?(e=(0,n.jsx)(lL,{dialog:r,referenceElement:a}),o[0]=r,o[1]=a,o[2]=e):e=o[2],e}if("popover"===r.type){let e;return o[3]!==r||o[4]!==a?(e=(0,n.jsx)(lz,{dialog:r,referenceElement:a}),o[3]=r,o[4]=a,o[5]=e):e=o[5],e}if("dialog"===r.type||!r.type){let e;return o[6]!==r?(e=(0,n.jsx)(lB,{children:(0,n.jsx)(lV,{dialog:r})}),o[6]=r,o[7]=e):e=o[7],e}if("custom"===r.type){let e,t=r?.component;return o[8]!==t?(e=(0,n.jsx)(lB,{children:t}),o[8]=t,o[9]=e):e=o[9],e}return console.warn(`Unsupported modal type ${r.type}`),o[10]!==r.content||o[11]!==r.type?(t=r.content||(0,n.jsxs)(ev.Text,{size:1,children:["Unexpected modal type (",(0,n.jsx)("code",{children:r.type}),")"]}),o[10]=r.content,o[11]=r.type,o[12]=t):t=o[12],o[13]!==d||o[14]!==t||o[15]!==r.onClose?(l=(0,n.jsx)(h.Dialog,{id:d,onClose:r.onClose,onClickOutside:r.onClose,width:1,children:t}),o[13]=d,o[14]=t,o[15]=r.onClose,o[16]=l):l=o[16],l}let lN=(0,i.memo)(function(e){let t,o,r,s,a=(0,ey.c)(9),{actionStates:d,children:u,referenceElement:c}=e,[p,m]=(0,i.useState)(-1),h=d[p];a[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{m(e)},a[0]=t):t=a[0];let g=t;a[1]!==u?(o=u({handleAction:g}),a[1]=u,a[2]=o):o=a[2];let f=o;return a[3]!==h||a[4]!==c?(r=h&&h.dialog&&(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(lH,{dialog:h.dialog,referenceElement:c})}),a[3]=h,a[4]=c,a[5]=r):r=a[5],a[6]!==f||a[7]!==r?(s=(0,n.jsxs)(n.Fragment,{children:[r,f]}),a[6]=f,a[7]=r,a[8]=s):s=a[8],s});function l$(e){let t,o,r,s=(0,ey.c)(10),{actionStates:a,disabled:d}=e,u=(0,i.useId)(),[c,p]=(0,i.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},s[0]=t):t=s[0];let m=t,{t:g}=(0,l.useTranslation)(x);s[1]!==a||s[2]!==d||s[3]!==u||s[4]!==g?(o=e=>{let{handleAction:t}=e;return(0,n.jsx)(h.MenuButton,{id:`${u}-action-menu`,button:(0,n.jsx)(l.ContextMenuButton,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:d,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,n.jsx)(ev.Menu,{padding:1,children:a.map((e,i)=>(0,n.jsx)(lU,{actionState:e,disabled:d,index:i,onAction:t},i))}),popover:m,ref:p})},s[1]=a,s[2]=d,s[3]=u,s[4]=g,s[5]=o):o=s[5];let f=o;return s[6]!==a||s[7]!==c||s[8]!==f?(r=(0,n.jsx)(lN,{actionStates:a,referenceElement:c,children:f}),s[6]=a,s[7]=c,s[8]=f,s[9]=r):r=s[9],r}function lU(e){let t,i,l,o,r=(0,ey.c)(18),{actionState:s,disabled:a,index:d,onAction:u}=e,{onHandle:c}=s;r[0]!==d||r[1]!==u||r[2]!==c?(t=()=>{u(d),c&&c()},r[0]=d,r[1]=u,r[2]=c,r[3]=t):t=r[3];let p=t;r[4]!==s.shortcut?(i=s.shortcut?String(s.shortcut).split("+").map(lG):void 0,r[4]=s.shortcut,r[5]=i):i=r[5];let m=i,g=`action-${s.label.replace(" ","")}`,f=a||!!s.disabled;return r[6]!==s.disabled||r[7]!==s.title?(l=s.disabled&&{tooltipProps:{content:s.title}},r[6]=s.disabled,r[7]=s.title,r[8]=l):l=r[8],r[9]!==s.icon||r[10]!==s.label||r[11]!==s.tone||r[12]!==p||r[13]!==m||r[14]!==g||r[15]!==f||r[16]!==l?(o=(0,n.jsx)(h.MenuItem,{"data-testid":g,disabled:f,hotkeys:m,icon:s.icon,onClick:p,text:s.label,tone:s.tone,...l}),r[9]=s.icon,r[10]=s.label,r[11]=s.tone,r[12]=p,r[13]=m,r[14]=g,r[15]=f,r[16]=l,r[17]=o):o=r[17],o}function lG(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let lW={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},lq=e=>{let t,o,r,s,d,u=(0,ey.c)(36),{id:c,type:p,draft:m,onComplete:h,release:g}=e,{setIsDeleting:f}=im(),{delete:b}=(0,l.useDocumentOperation)(c,p,g),[y,v]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),{t:S}=(0,l.useTranslation)(x);u[0]!==h?(t=()=>{w(!1),h()},u[0]=h,u[1]=t):t=u[1];let C=t;u[2]!==b||u[3]!==h||u[4]!==f?(o=()=>{v(!0),w(!1),f(!0),b.execute(),h()},u[2]=b,u[3]=h,u[4]=f,u[5]=o):o=u[5];let I=o;u[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{w(!0)},u[6]=r):r=u[6];let _=r;u[7]!==c||u[8]!==g||u[9]!==p?(s={id:c,type:p,version:g,permission:"delete"},u[7]=c,u[8]=g,u[9]=p,u[10]=s):s=u[10];let[T,R]=(0,l.useDocumentPairPermissions)(s),P=(0,l.useCurrentUser)();e:{let e,t,i,o;if(!R&&!T?.granted){let e,t,i;u[11]!==S?(e=S("action.delete.label"),u[11]=S,u[12]=e):e=u[12],u[13]!==P?(t=(0,n.jsx)(l.InsufficientPermissionsMessage,{context:"delete-document",currentUser:P}),u[13]=P,u[14]=t):t=u[14],u[15]!==e||u[16]!==t?(i={tone:"critical",icon:a.TrashIcon,disabled:!0,label:e,title:t},u[15]=e,u[16]=t,u[17]=i):i=u[17],d=i;break e}let r=y||!!b.disabled||R;u[18]!==b.disabled||u[19]!==S?(e=b.disabled&&S(lW[b.disabled])||"",u[18]=b.disabled,u[19]=S,u[20]=e):e=u[20],u[21]!==y||u[22]!==S?(t=S(y?"action.delete.running.label":"action.delete.label"),u[21]=y,u[22]=S,u[23]=t):t=u[23],u[24]!==m?._id||u[25]!==C||u[26]!==I||u[27]!==c||u[28]!==j||u[29]!==p?(i=j&&{type:"custom",component:(0,n.jsx)(ss,{action:"delete",id:m?._id||c,type:p,onCancel:C,onConfirm:I})},u[24]=m?._id,u[25]=C,u[26]=I,u[27]=c,u[28]=j,u[29]=p,u[30]=i):i=u[30],u[31]!==r||u[32]!==e||u[33]!==t||u[34]!==i?(o={tone:"critical",icon:a.TrashIcon,disabled:r,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:_,dialog:i},u[31]=r,u[32]=e,u[33]=t,u[34]=i,u[35]=o):o=u[35],d=o}return d};lq.action="delete",lq.displayName="DeleteAction";let lK={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},lY=({id:e,type:t,published:r,liveEdit:s,onComplete:d,release:u})=>{let{discardChanges:c}=(0,l.useDocumentOperation)(e,t,u),[p,m]=(0,i.useState)(!1),[h,g]=(0,l.useDocumentPairPermissions)({id:e,type:t,version:u,permission:"discardDraft"}),f=(0,l.useCurrentUser)(),{displayed:b}=im(),{t:y}=(0,l.useTranslation)(x),v=b?._id&&(0,o.isPublishedId)(b?._id),j=(0,i.useCallback)(()=>{c.execute(),d()},[c,d]),w=(0,i.useCallback)(()=>{m(!0)},[]),S=(0,i.useMemo)(()=>p&&{type:"confirm",tone:"critical",onCancel:d,onConfirm:j,message:y("action.discard-changes.confirm-dialog.confirm-discard-changes")},[j,p,d,y]);return(0,i.useMemo)(()=>!r||s||v?null:g||h?.granted?{tone:"critical",icon:a.ResetIcon,disabled:!!c.disabled||g,title:y(c.disabled&&lK[c.disabled]||""),label:y("action.discard-changes.label"),onHandle:w,dialog:S}:{tone:"critical",icon:a.ResetIcon,disabled:!0,label:y("action.discard-changes.label"),title:(0,n.jsx)(l.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:f})},[f,S,c.disabled,w,g,v,s,h?.granted,r,y])};lY.action="discardChanges",lY.displayName="DiscardChangesAction";let lX={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},lQ=({id:e,type:t,onComplete:o,release:r,mapDocument:s})=>{let d=(0,l.useDocumentStore)(),{duplicate:u}=(0,l.useDocumentOperation)(e,t,r),{navigateIntent:c}=(0,eP.useRouter)(),[p,m]=(0,i.useState)(!1),[h,g]=(0,l.useDocumentPairPermissions)({id:e,type:t,version:r,permission:"duplicate"}),{t:f}=(0,l.useTranslation)(x),b=(0,l.useCurrentUser)(),y=(0,i.useCallback)(async()=>{let n=(0,eS.uuid)();m(!0);let i=(0,e0.firstValueFrom)(d.pair.operationEvents(e,t).pipe((0,eG.filter)(e=>"duplicate"===e.op&&"success"===e.type)));u.execute(n,{mapDocument:s}),await i,c("edit",{id:n,type:t}),o()},[d.pair,u,e,s,c,o,t]);return(0,i.useMemo)(()=>g||h?.granted?{icon:a.CopyIcon,disabled:p||!!u.disabled||g,label:f(p?"action.duplicate.running.label":"action.duplicate.label"),title:u.disabled?f(lX[u.disabled]):"",onHandle:y}:{icon:a.CopyIcon,disabled:!0,label:f("action.duplicate.label"),title:(0,n.jsx)(l.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:b})},[b,u.disabled,y,p,g,h?.granted,f])};lQ.action="duplicate",lQ.displayName="DuplicateAction";let lJ=e=>{let t,n,o,r,s,d,u=(0,ey.c)(27),{id:c,type:p,revision:m,onComplete:h,release:g}=e,{restore:f}=(0,l.useDocumentOperation)(c,p,g),{revisionNotFound:b}=im(),y=(0,l.useDocumentOperationEvent)(c,p),{navigateIntent:v}=(0,eP.useRouter)(),j=(0,i.useRef)(y),[w,S]=(0,i.useState)(!1),{t:C}=(0,l.useTranslation)(x);u[0]!==h||u[1]!==f||u[2]!==m?(t=()=>{f.execute(m),h()},u[0]=h,u[1]=f,u[2]=m,u[3]=t):t=u[3];let I=t;u[4]!==y||u[5]!==c||u[6]!==v||u[7]!==p?(n=()=>{y&&y!==j.current&&("success"===y.type&&"restore"===y.op&&v("edit",{id:c,type:p}),j.current=y)},o=[y,c,v,p],u[4]=y,u[5]=c,u[6]=v,u[7]=p,u[8]=n,u[9]=o):(n=u[8],o=u[9]),(0,i.useEffect)(n,o),u[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{S(!0)},u[10]=r):r=u[10];let _=r;e:{if(w){let e,t;u[11]!==C?(e=C("action.restore.confirm.message"),u[11]=C,u[12]=e):e=u[12],u[13]!==I||u[14]!==h||u[15]!==e?(t={type:"confirm",tone:"critical",onCancel:h,onConfirm:I,message:e},u[13]=I,u[14]=h,u[15]=e,u[16]=t):t=u[16],s=t;break e}s=null}let T=s,R="@initial"===m,P=void 0===m;t:{let e,t,n;if(P||b){d=null;break t}u[17]!==C?(e=C("action.restore.label"),u[17]=C,u[18]=e):e=u[18];let i=R?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";u[19]!==C||u[20]!==i?(t=C(i),u[19]=C,u[20]=i,u[21]=t):t=u[21],u[22]!==T||u[23]!==R||u[24]!==e||u[25]!==t?(n={label:e,tone:"caution",onHandle:_,title:t,icon:a.RevertIcon,dialog:T,disabled:R},u[22]=T,u[23]=R,u[24]=e,u[25]=t,u[26]=n):n=u[26],d=n}return d};lJ.action="restore",lJ.displayName="HistoryRestoreAction";let lZ=(0,tu.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),l0={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},l1={status:"published"};function l2(e,t,i){return"ALREADY_PUBLISHED"===e&&t?(0,n.jsx)(l3,{publishedAt:t}):i(l0[e])}function l3(e){let t,i,o,r=(0,ey.c)(6),{publishedAt:s}=e,{t:a}=(0,l.useTranslation)(x);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},r[0]=t):t=r[0];let d=(0,l.useRelativeTime)(s,t);return r[1]!==a||r[2]!==d?(i=a("action.publish.already-published.tooltip",{timeSincePublished:d}),r[1]=a,r[2]=d,r[3]=i):i=r[3],r[4]!==i?(o=(0,n.jsx)("span",{children:i}),r[4]=i,r[5]=o):o=r[5],o}let l4=e=>{let t,r,s,d,u,c,p,m,h,g,f,b=(0,ey.c)(79),{id:y,type:v,liveEdit:j,draft:w,published:S,release:C}=e,[I,_]=(0,i.useState)(null),{publish:T}=(0,l.useDocumentOperation)(y,v),R=(0,l.useValidationStatus)(y,v),P=(0,l.useSyncState)(y,v),{changesOpen:E,documentId:D,documentType:k,value:M}=im(),F=(0,l.useEditState)(D,k),{t:A}=(0,l.useTranslation)(x);b[0]!==F?.draft||b[1]!==F?.published?(t=F?.draft||F?.published||{},b[0]=F?.draft,b[1]=F?.published,b[2]=t):t=b[2];let L=t._rev;b[3]!==R.validation?(r=R.validation.some(ew.isValidationErrorMarker),b[3]=R.validation,b[4]=r):r=b[4];let V=r,[z,O]=(0,i.useState)(!1),B=P.isSyncing,H=R.isValidating;b[5]!==y||b[6]!==v?(s={id:y,type:v,permission:"publish"},b[5]=y,b[6]=v,b[7]=s):s=b[7];let[N,$]=(0,l.useDocumentPairPermissions)(s),U=(0,l.useCurrentUser)();b[8]!==V||b[9]!==T.disabled||b[10]!==S||b[11]!==A?(d=T.disabled?l2(T.disabled,(S||{})._updatedAt,A)||"":V?A("action.publish.validation-issues.tooltip"):"",b[8]=V,b[9]=T.disabled,b[10]=S,b[11]=A,b[12]=d):d=b[12];let G=d,W=S?._rev;b[13]!==W||b[14]!==T?(u=()=>{T.execute(),_({status:"publishing",publishRevision:W})},b[13]=W,b[14]=T,b[15]=u):u=b[15];let q=u;b[16]!==q||b[17]!==V||b[18]!==B||b[19]!==z||b[20]!==L||b[21]!==R.isValidating||b[22]!==R.revision?(c=()=>{let e=!1===R.isValidating&&R.revision!==L;z&&!B&&e&&(V||q(),O(!1))},b[16]=q,b[17]=V,b[18]=B,b[19]=z,b[20]=L,b[21]=R.isValidating,b[22]=R.revision,b[23]=c):c=b[23],b[24]!==q||b[25]!==V||b[26]!==B||b[27]!==H||b[28]!==z||b[29]!==L||b[30]!==R.isValidating||b[31]!==R.revision?(p=[B,q,V,z,R.revision,L,H,R.isValidating],b[24]=q,b[25]=V,b[26]=B,b[27]=H,b[28]=z,b[29]=L,b[30]=R.isValidating,b[31]=R.revision,b[32]=p):p=b[32],(0,i.useEffect)(c,p),b[33]!==W||b[34]!==I?(m=()=>{let e=I?.status==="publishing"&&W!==I.publishRevision,t=e?l1:null,n=setTimeout(()=>{_(t)},e?200:4e3);return()=>clearTimeout(n)},b[33]=W,b[34]=I,b[35]=m):m=b[35],b[36]!==E||b[37]!==W||b[38]!==I?(h=[E,I,W],b[36]=E,b[37]=W,b[38]=I,b[39]=h):h=b[39],(0,i.useEffect)(m,h);let K=(0,ts.useTelemetry)();b[40]!==q||b[41]!==w?._createdAt||b[42]!==S||b[43]!==L||b[44]!==P.isSyncing||b[45]!==K||b[46]!==R.isValidating||b[47]!==R.revision?(g=()=>{K.log(lZ,{publishedImmediately:!w?._createdAt,previouslyPublished:!!S}),P.isSyncing||R.isValidating||R.revision!==L?O(!0):q()},b[40]=q,b[41]=w?._createdAt,b[42]=S,b[43]=L,b[44]=P.isSyncing,b[45]=K,b[46]=R.isValidating,b[47]=R.revision,b[48]=g):g=b[48];let Y=g;e:{let e,t,i;if(C||j){f=null;break e}if((0,o.isPublishedId)(M._id)&&null!==w){let e,t,n;b[49]!==A?(e=A("action.publish.label"),b[49]=A,b[50]=e):e=b[50];let i=S?._updatedAt;b[51]!==A||b[52]!==i?(t=l2("ALREADY_PUBLISHED",i,A),b[51]=A,b[52]=i,b[53]=t):t=b[53],b[54]!==e||b[55]!==t?(n={tone:"default",icon:a.PublishIcon,label:e,title:t,disabled:!0},b[54]=e,b[55]=t,b[56]=n):n=b[56],f=n;break e}if(!$&&!N?.granted){let e,t,i;b[57]!==A?(e=A("action.publish.label"),b[57]=A,b[58]=e):e=b[58],b[59]!==U?(t=(0,n.jsx)(l.InsufficientPermissionsMessage,{context:"publish-document",currentUser:U}),b[59]=U,b[60]=t):t=b[60],b[61]!==e||b[62]!==t?(i={tone:"default",icon:a.PublishIcon,label:e,title:t,disabled:!0},b[61]=e,b[62]=t,b[63]=i):i=b[63],f=i;break e}let r=!!(z||F?.transactionSyncLock?.enabled||I?.status==="publishing"||I?.status==="published"||V||T.disabled),s=r||$;b[64]!==z||b[65]!==I?.status||b[66]!==A?(e=A(I?.status==="published"?"action.publish.published.label":z||I?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),b[64]=z,b[65]=I?.status,b[66]=A,b[67]=e):e=b[67],b[68]!==z||b[69]!==I?.status||b[70]!==A||b[71]!==G?(t=z?A("action.publish.waiting"):I?.status==="published"||I?.status==="publishing"?null:G,b[68]=z,b[69]=I?.status,b[70]=A,b[71]=G,b[72]=t):t=b[72];let d=r||z?null:"Ctrl+Alt+P";b[73]!==Y||b[74]!==s||b[75]!==e||b[76]!==t||b[77]!==d?(i={disabled:s,tone:"default",label:e,icon:a.PublishIcon,title:t,shortcut:d,onHandle:Y},b[73]=Y,b[74]=s,b[75]=e,b[76]=t,b[77]=d,b[78]=i):i=b[78],f=i}return f};l4.action="publish",l4.displayName="PublishAction";let l5={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},l6=({id:e,type:t,draft:o,onComplete:r,liveEdit:s,release:d})=>{let{unpublish:u}=(0,l.useDocumentOperation)(e,t),[c,p]=(0,i.useState)(!1),[m,h]=(0,l.useDocumentPairPermissions)({id:e,type:t,permission:"unpublish"}),g=(0,l.useCurrentUser)(),{t:f}=(0,l.useTranslation)(x),{selectedPerspective:b}=(0,l.usePerspective)(),y="drafts"===b,v=(0,i.useCallback)(()=>{p(!1),r()},[r]),j=(0,i.useCallback)(()=>{p(!1),u.execute(),r()},[r,u]),w=(0,i.useMemo)(()=>c?{type:"dialog",onClose:r,content:(0,n.jsx)(ss,{id:o?._id||e,type:t,action:"unpublish",onCancel:v,onConfirm:j})}:null,[o,e,v,j,c,r,t]);return(0,i.useMemo)(()=>d||y||s?null:h||m?.granted?{tone:"critical",icon:a.UnpublishIcon,disabled:!!u.disabled||h,label:f("action.unpublish.label"),title:u.disabled?f(l5[u.disabled]):"",onHandle:()=>p(!0),dialog:w}:{tone:"critical",icon:a.UnpublishIcon,label:"Unpublish",title:(0,n.jsx)(l.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:g}),disabled:!0},[d,y,s,h,m?.granted,u.disabled,f,w,g])};l6.action="unpublish",l6.displayName="UnpublishAction";let l8=(0,i.memo)(function(e){let t,o,r,s,a,d,u,c,p,m=(0,ey.c)(37),{disabled:g,states:f}=e,{__internal_tasks:x}=(0,l.useSource)(),{editState:b}=im(),{params:y}=i7(),v=!!y?.rev,{selectedReleaseId:j}=(0,l.usePerspective)();m[0]!==f?([t,...o]=f,m[0]=f,m[1]=t,m[2]=o):(t=m[1],o=m[2]);let[w,S]=(0,i.useState)(null);e:{let e,i,l,o;if(!t||!t.title&&!t.shortcut){r=null;break e}m[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},m[3]=e):e=m[3],m[4]!==t.title?(i=t.title&&(0,n.jsx)(ev.Text,{size:1,children:t.title}),m[4]=t.title,m[5]=i):i=m[5],m[6]!==t.shortcut?(l=t.shortcut&&(0,n.jsx)(h.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ot)}),m[6]=t.shortcut,m[7]=l):l=m[7],m[8]!==i||m[9]!==l?(o=(0,n.jsxs)(ev.Flex,{style:e,align:"center",gap:3,children:[i,l]}),m[8]=i,m[9]=l,m[10]=o):o=m[10],r=o}let C=r;m[11]!==b?.liveEdit||m[12]!==t||m[13]!==j||m[14]!==v?(s=v?!!t:j?t&&!(0,l.isSanityDefinedAction)(t):t&&!b?.liveEdit,m[11]=b?.liveEdit,m[12]=t,m[13]=j,m[14]=v,m[15]=s):s=m[15];let I=s;m[16]!==t||m[17]!==o||m[18]!==I?(a=I?o:[t,...o],m[16]=t,m[17]=o,m[18]=I,m[19]=a):a=m[19];let _=a,T=x&&x.footerAction;return m[20]!==g||m[21]!==t||m[22]!==I||m[23]!==C?(d=I&&(0,n.jsx)(ev.LayerProvider,{zOffset:200,children:(0,n.jsx)(h.Tooltip,{disabled:!C,content:C,placement:"top",children:(0,n.jsx)(ev.Stack,{children:(0,n.jsx)(h.Button,{"data-testid":`action-${nU(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:S,text:t.label,tone:t.tone||"primary"})})})}),m[20]=g,m[21]=t,m[22]=I,m[23]=C,m[24]=d):d=m[24],m[25]!==g||m[26]!==_?(u=_.length>0&&(0,n.jsx)(l$,{actionStates:_,disabled:g}),m[25]=g,m[26]=_,m[27]=u):u=m[27],m[28]!==w||m[29]!==t||m[30]!==I?(c=I&&t&&t.dialog&&(0,n.jsx)(lH,{dialog:t.dialog,referenceElement:w}),m[28]=w,m[29]=t,m[30]=I,m[31]=c):c=m[31],m[32]!==T||m[33]!==d||m[34]!==u||m[35]!==c?(p=(0,n.jsxs)(ev.Flex,{align:"center",gap:1,children:[T,d,u,c]}),m[32]=T,m[33]=d,m[34]=u,m[35]=c,m[36]=p):p=m[36],p}),l7=(0,i.memo)(function(){let e,t,i,l,o,r=(0,ey.c)(14),{actions:s,connectionState:a,documentId:d,editState:u,isInitialValueLoading:c}=im();r[0]!==s?(e=s??[],r[0]=s,r[1]=e):e=r[1],r[2]!==e?(t=e.filter(on),r[2]=e,r[3]=t):t=r[3];let p=t;r[4]!==u||r[5]!==c?(i=u?{...u,initialValueResolved:!c}:null,r[4]=u,r[5]=c,r[6]=i):i=r[6];let m=i;r[7]!==a||r[8]!==d?(l=e=>{let{states:t}=e;return(0,n.jsx)(l8,{disabled:"connected"!==a,states:t},d)},r[7]=a,r[8]=d,r[9]=l):l=r[9];let h=l;return 0!==p.length&&m?(r[10]!==m||r[11]!==p||r[12]!==h?(o=(0,n.jsx)(sw,{actions:p,actionProps:m,group:"default",children:h}),r[10]=m,r[11]=p,r[12]=h,r[13]=o):o=r[13],o):null}),l9=(0,i.memo)(function(){let e,t,i,l,o=(0,ey.c)(13),{actions:r,connectionState:s,editState:a,revisionId:d,isInitialValueLoading:u}=im(),c=(a?.draft||a?.published||{})._rev===d;o[0]!==a||o[1]!==u||o[2]!==d?(e=a?{...a,revision:d||void 0,initialValueResolved:!u}:null,o[0]=a,o[1]=u,o[2]=d,o[3]=e):e=o[3];let p=e;o[4]!==r?(t=(r??[]).filter(oe).slice(-1),o[4]=r,o[5]=t):t=o[5];let m=t;o[6]!==s||o[7]!==c?(i=e=>{let{states:t}=e;return(0,n.jsx)(l8,{disabled:"connected"!==s||!!c,states:t})},o[6]=s,o[7]=c,o[8]=i):i=o[8];let h=i;return p?(o[9]!==p||o[10]!==m||o[11]!==h?(l=(0,n.jsx)(sw,{actions:m,actionProps:p,group:"default",children:h}),o[9]=p,o[10]=m,o[11]=h,o[12]=l):l=o[12],l):null});function oe(e){return e.action===lJ.action}function ot(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function on(e){return!oe(e)}let oi=e=>{let t=(0,ey.c)(16),{release:i}=e,{t:o}=(0,l.useTranslation)();if("archived"===i.state){let e,i;return t[0]!==o?(e=o("release.chip.tooltip.archived"),t[0]=o,t[1]=e):e=t[1],t[2]!==e?(i=(0,n.jsx)(ev.Text,{size:1,children:e}),t[2]=e,t[3]=i):i=t[3],i}if("asap"===i.metadata.releaseType){let e,i;return t[4]!==o?(e=o("release.type.asap"),t[4]=o,t[5]=e):e=t[5],t[6]!==e?(i=(0,n.jsx)(ev.Text,{size:1,children:e}),t[6]=e,t[7]=i):i=t[7],i}if("scheduled"===i.metadata.releaseType){let e,r="active"===i.state;return t[8]!==r||t[9]!==i||t[10]!==o?(e=i.metadata.intendedPublishAt&&(0,n.jsx)(ev.Text,{size:1,children:r?(0,n.jsx)(l.Translate,{t:o,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,l.formatRelativeLocalePublishDate)(i)}}):(0,n.jsx)(l.Translate,{t:o,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,l.formatRelativeLocalePublishDate)(i)}})}),t[8]=r,t[9]=i,t[10]=o,t[11]=e):e=t[11],e}if("undecided"===i.metadata.releaseType){let e,i;return t[12]!==o?(e=o("release.type.undecided"),t[12]=o,t[13]=e):e=t[13],t[14]!==e?(i=(0,n.jsx)(ev.Text,{size:1,children:e}),t[14]=e,t[15]=i):i=t[15],i}return null},ol={dateStyle:"medium",timeStyle:"short"},oo=(0,i.memo)(function(){let{selectedReleaseId:e,selectedPerspectiveName:t}=(0,l.usePerspective)(),{t:r}=(0,l.useTranslation)(),s=(0,l.useSetPerspective)(),{params:a,setParams:d}=i7(),u=(0,l.useDateTimeFormat)(ol),{loading:c}=(0,l.useActiveReleases)(),p=(0,l.useSchema)(),{editState:m,displayed:h,documentType:g,documentId:f}=im(),x=h&&!h._createdAt,b=(0,l.useGetDefaultPerspective)(),y=(0,l.useFilteredReleases)({historyVersion:a?.historyVersion,displayed:h,documentId:f}),v=(0,l.useOnlyHasVersions)({documentId:f}),j=(0,l.useWorkspace)(),{onSetScheduledDraftPerspective:w}=(0,l.useSingleDocRelease)(),S=(0,i.useCallback)(e=>()=>{if((0,l.isReleaseDocument)(e)&&(0,l.isCardinalityOneRelease)(e))return void w((0,l.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&a?.historyVersion&&d({...a,rev:a?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,l.isReleaseDocument)(e)?(0,l.getReleaseIdFromReleaseDocumentId)(e._id):e===b?"":e;a?.scheduledDraft?d({...a,scheduledDraft:void 0},{perspective:t}):s(t)},[s,d,a,b,w]),C=p.get(g),I=!!C&&!0===C.liveEdit,_=(0,i.useMemo)(()=>(!I||!!e)&&!m?.published,[I,e,m?.published]),T=(0,i.useCallback)(e=>{if(!a?.historyVersion){let t=m?.version&&(0,l.isGoingToUnpublish)(m?.version)&&(0,l.getReleaseIdFromReleaseDocumentId)(e._id)===(0,o.getVersionFromId)(m?.version?._id);return{selected:!!((0,l.getReleaseIdFromReleaseDocumentId)(e._id)===(0,o.getVersionFromId)(h?._id||"")||t)}}let t=(0,l.getReleaseIdFromReleaseDocumentId)(e._id)===a.historyVersion;return{selected:t,disabled:t}},[h?._id,m?.version,a?.historyVersion]),R=(0,i.useMemo)(()=>!!(I&&!m?.draft?._id&&!e||(0,o.isPublishedId)(h?._id||"")&&(0,l.isPublishedPerspective)(t||"")),[h?._id,m?.draft?._id,I,t,e]),P=(0,i.useMemo)(()=>{let e=h?._id||"";return!(R||a?.historyVersion||t||(0,o.isVersionId)(e))&&(!!(0,o.isDraftId)(e)||!((0,o.isPublishedId)(e)&&m?.published&&(0,l.isPublishedPerspective)(t||"")))},[h?._id,m?.published,R,a?.historyVersion,t]),E=(0,i.useMemo)(()=>!!v||!!x&&!!e||(!!m?.draft||!!I)&&!!(x&&e||I),[m?.draft,x,I,v,e]),D=j.document.drafts?.enabled;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.VersionChip,{tooltipContent:(0,n.jsx)(ev.Text,{size:1,children:m?.published&&m?.published?._updatedAt?(0,n.jsx)(l.Translate,{t:r,i18nKey:"release.chip.tooltip.published-date",values:{date:u.format(new Date(m?.published._updatedAt))}}):(0,n.jsx)(n.Fragment,{children:r("release.chip.tooltip.not-published")})}),disabled:_,onClick:S("published"),selected:R,text:r("release.chip.published"),tone:"positive",contextValues:{documentId:m?.published?._id||m?.id||"",menuReleaseId:m?.published?._id||m?.id||"",releases:y.notCurrentReleases,releasesLoading:c,documentType:g,fromRelease:"published",isVersion:!1,disabled:!m?.published}}),D&&(0,n.jsx)(l.VersionChip,{tooltipContent:(0,n.jsx)(ev.Text,{size:1,children:m?.draft?(0,n.jsx)(n.Fragment,{children:m?.draft._updatedAt?(0,n.jsx)(l.Translate,{t:r,i18nKey:"release.chip.tooltip.edited-date",values:{date:u.format(new Date(m?.draft._updatedAt))}}):(0,n.jsx)(l.Translate,{t:r,i18nKey:"release.chip.tooltip.created-date",values:{date:u.format(new Date(m?.draft._createdAt))}})}):(0,n.jsx)(n.Fragment,{children:r(I?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:P,disabled:E,text:r("release.chip.draft"),tone:m?.draft?"caution":"neutral",onClick:S("drafts"),contextValues:{documentId:m?.draft?._id||m?.published?._id||m?.id||"",menuReleaseId:m?.draft?._id||m?.published?._id||m?.id||"",releases:y.notCurrentReleases,releasesLoading:c,documentType:g,fromRelease:"draft",isVersion:!1}}),y.inCreation&&(0,n.jsx)(l.VersionChip,{tooltipContent:(0,n.jsx)(oi,{release:y.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,l.getReleaseTone)(y.inCreation),text:y.inCreation.metadata.title||r("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:h?._id||"",menuReleaseId:y.inCreation._id,releases:y.notCurrentReleases,releasesLoading:c,documentType:g,fromRelease:(0,l.getReleaseIdFromReleaseDocumentId)(y.inCreation._id),releaseState:y.inCreation.state,isVersion:!0,release:y.inCreation}}),h&&y.currentReleases?.map(e=>(0,n.jsx)(l.VersionChip,{tooltipContent:(0,n.jsx)(oi,{release:e}),...T(e),onClick:S(e),text:e.metadata.title||r("release.placeholder-untitled-release"),tone:(0,l.getReleaseTone)(e),locked:(0,l.isReleaseScheduledOrScheduling)(e),contextValues:{documentId:h?._id||"",menuReleaseId:e._id,releases:y.notCurrentReleases,releasesLoading:c,documentType:g,fromRelease:(0,l.getReleaseIdFromReleaseDocumentId)(e._id),releaseState:e.state,isVersion:!0,isGoingToUnpublish:!!m?.version&&(0,l.isGoingToUnpublish)(m?.version),release:e}},e._id))]})}),or=(0,eC.styled)(ev.Card)(e=>{let t=(0,tT.getTheme_v2)(e.theme);return eC.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&eC.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tT.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),os=(0,i.memo)((0,i.forwardRef)(function(e,t){let{menuItems:o}=e,{actions:r,editState:s,onMenuAction:d,isInitialValueLoading:u,onPaneClose:c,onPaneSplit:p,menuItemGroups:m,schemaType:g,connectionState:f,views:b,unstable_languageFilter:y}=im(),{features:v}=ix(),{index:j,BackLink:w,hasGroupSiblings:S}=i7(),{actions:C}=(0,l.useFieldActions)(),[I,_]=(0,i.useState)(null),T=(0,i.useRef)(null),R=function(e){let t,n,l=(0,ey.c)(3),[o,r]=(0,i.useState)(!1);return l[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void r(!1);let{scrollLeft:l}=t;r(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&r(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,i.useEffect)(t,n),o}(T),P=(0,i.useMemo)(()=>(r??[]).filter(e=>!oe(e)),[r]),E=(0,i.useMemo)(()=>lE({actionHandler:d,fieldActions:C,menuItems:o,menuItemGroups:m}),[d,C,m,o]),D=(0,i.useMemo)(()=>E.filter(lR),[E]),k=(0,i.useMemo)(()=>E.filter(lP),[E]),{collapsed:M,isLast:F}=nN(),A=v.splitViews&&p&&b.length>1,L=A&&S,V=v.backButton&&j>0,z=!L&&!V&&!!w,{t:O}=(0,l.useTranslation)(x),B=(0,i.useCallback)(({states:e})=>(0,n.jsx)(oa,{contextMenuNodes:k,setReferenceElement:_,referenceElement:I,states:e}),[k,I]),H=(0,i.useMemo)(()=>(0,n.jsx)(lw,{}),[]),N=(0,i.useMemo)(()=>V&&(0,n.jsx)(h.Button,{as:w,"data-as":"a",icon:a.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:O("pane-header.back-button.text")}}),[w,V,O]),$=(0,i.useMemo)(()=>(0,n.jsxs)(ev.Flex,{align:"center",gap:1,children:[y.length>0&&(0,n.jsx)(n.Fragment,{children:y.map((e,t)=>(0,n.jsx)(e,{schemaType:g},`language-filter-${t}`))}),D.map(e=>(0,n.jsx)(n9,{node:e},e.key)),s&&(0,n.jsx)(sw,{actions:P,actionProps:{...s,initialValueResolved:!u},group:"paneActions",children:B}),A&&(0,n.jsx)(h.Button,{"aria-label":O("buttons.split-pane-button.aria-label"),icon:a.SplitVerticalIcon,mode:"bleed",onClick:p,tooltipProps:{content:O("buttons.split-pane-button.tooltip")}},"split-pane-button"),L&&(0,n.jsx)(h.Button,{icon:a.CloseIcon,mode:"bleed",onClick:c,tooltipProps:{content:O("buttons.split-pane-close-button.title")}},"close-view-button"),z&&(0,n.jsx)(h.Button,{icon:a.CloseIcon,mode:"bleed",tooltipProps:{content:O("buttons.split-pane-close-group-button.title")},as:w},"close-view-button")]}),[w,P,s,u,D,c,p,B,g,z,A,L,O,y]);return(0,n.jsx)(h.TooltipDelayGroupProvider,{children:M?(0,n.jsx)(n8,{border:!0,ref:t,loading:"connecting"===f&&!s?.draft&&!s?.published,title:H,tabIndex:F&&!M?-1:0,backButton:N}):(0,n.jsx)(ev.Card,{hidden:M,style:{lineHeight:0},borderBottom:!0,children:(0,n.jsxs)(ev.Flex,{gap:3,paddingY:3,children:[(0,n.jsx)(or,{$showGradient:R,children:(0,n.jsx)(ev.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:T,children:(0,n.jsx)(oo,{})})}),(0,n.jsx)(ev.Box,{flex:"none",paddingRight:3,children:$})]})})})})),oa=(0,i.memo)(function(e){let t,l=(0,ey.c)(5),{setReferenceElement:o,referenceElement:r,contextMenuNodes:s}=e,a=(0,i.useDeferredValue)(e.states);return l[0]!==s||l[1]!==r||l[2]!==o||l[3]!==a?(t=(0,n.jsx)(od,{setReferenceElement:o,referenceElement:r,contextMenuNodes:s,states:a}),l[0]=s,l[1]=r,l[2]=o,l[3]=a,l[4]=t):t=l[4],t}),od=(0,i.memo)(function(e){let t,i,l=(0,ey.c)(8),{states:o,setReferenceElement:r,contextMenuNodes:s,referenceElement:a}=e;l[0]!==s||l[1]!==r||l[2]!==o?(t=e=>{let{handleAction:t}=e;return(0,n.jsx)("div",{ref:r,children:(0,n.jsx)(nJ,{nodes:s,actionsNodes:o.length>0?o.map((e,i)=>(0,n.jsx)(lU,{actionState:e,disabled:!!e.disabled,index:i,onAction:t},e.label)):void 0},"context-menu")})},l[0]=s,l[1]=r,l[2]=o,l[3]=t):t=l[3];let d=t;return l[4]!==a||l[5]!==d||l[6]!==o?(i=(0,n.jsx)(lN,{actionStates:o,referenceElement:a,children:d}),l[4]=a,l[5]=d,l[6]=o,l[7]=i):i=l[7],i});function ou(e){let t,i,l=(0,ey.c)(3),{size:o}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},l[0]=t):t=l[0],l[1]!==o?(i=(0,n.jsx)(h.Button,{"aria-hidden":!0,disabled:!0,size:o,style:t,text:"-"}),l[1]=o,l[2]=i):i=l[2],i}let oc={primary:"primary",success:"positive",warning:"caution",danger:"critical"},op=(0,i.memo)(function(e){let t,i,l=(0,ey.c)(4),{states:o}=e;return 0===o.length?null:(l[0]!==o?(t=o.map(of),l[0]=o,l[1]=t):t=l[1],l[2]!==t?(i=(0,n.jsx)(ev.Inline,{space:1,children:t}),l[2]=t,l[3]=i):i=l[3],i)}),om=(0,i.memo)(function(e){let t,l=(0,ey.c)(2),o=(0,i.useDeferredValue)(e.states);return l[0]!==o?(t=(0,n.jsx)(op,{states:o}),l[0]=o,l[1]=t):t=l[1],t});function oh(){let e,t=(0,ey.c)(3),{badges:i,editState:l}=im();return l&&i?(t[0]!==i||t[1]!==l?(e=(0,n.jsx)(sI,{badges:i,badgeProps:l,children:og}),t[0]=i,t[1]=l,t[2]=e):e=t[2],e):null}function og(e){let{states:t}=e;return(0,n.jsx)(om,{states:t})}function of(e,t){return(0,n.jsx)(h.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,n.jsx)(ev.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?oc[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let ox={create:a.AddIcon,delete:a.TrashIcon,discardDraft:a.CloseIcon,initial:a.AddIcon,editDraft:a.EditIcon,editLive:a.EditIcon,publish:a.PublishIcon,unpublish:a.UnpublishIcon},ob=(0,eC.styled)(a.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function oy(e){let t,i,o,r,s,a=(0,ey.c)(14),{isExpanded:d,onExpand:u}=e,{t:c}=(0,l.useTranslation)(x);a[0]!==d||a[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(oA);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(d),u()},a[0]=d,a[1]=u,a[2]=t):t=a[2];let p=t;return a[3]!==d?(i=(0,n.jsx)(ob,{"data-expanded":d}),a[3]=d,a[4]=i):i=a[4],a[5]!==d||a[6]!==c?(o=c(d?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=d,a[6]=c,a[7]=o):o=a[7],a[8]!==o?(r={content:o},a[8]=o,a[9]=r):r=a[9],a[10]!==p||a[11]!==i||a[12]!==r?(s=(0,n.jsx)(h.Button,{mode:"bleed",icon:i,tooltipProps:r,onClick:p}),a[10]=p,a[11]=i,a[12]=r,a[13]=s):s=a[13],s}let ov=(0,eC.styled)(ev.Stack)`
  max-width: 200px;
`,oj=(0,eC.styled)(ev.Flex)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,ow=(0,eC.styled)(ev.Box)(({$visible:e})=>eC.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&eC.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),oS={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function oC(e){let t,i,o=(0,ey.c)(9),{maxLength:r,userIds:s,size:a,withTooltip:d}=e,u=void 0===d||d;if(o[0]!==s||o[1]!==u){let e;o[3]!==u?(e=e=>(0,n.jsx)(l.UserAvatar,{user:e,withTooltip:u},e),o[3]=u,o[4]=e):e=o[4],t=s.map(e),o[0]=s,o[1]=u,o[2]=t}else t=o[2];return o[5]!==r||o[6]!==a||o[7]!==t?(i=(0,n.jsx)(ev.AvatarStack,{maxLength:r,size:a,children:t}),o[5]=r,o[6]=a,o[7]=t,o[8]=i):i=o[8],i}let oI=(0,eC.styled)(ev.Flex)(e=>{let t=(0,tT.getTheme_v2)(e.theme),n=e.$color;return eC.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),o_={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},oT={minimal:!0,useTemporalPhrase:!0},oR=(0,eC.styled)(ej.Skeleton)(e=>{let t=(0,tT.getTheme_v2)(e.theme);return eC.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),oP=e=>{let t,i,o,r=(0,ey.c)(10),{userId:s}=e,[a,d]=(0,l.useUser)(s);return r[0]!==d||r[1]!==a?(t=(0,n.jsx)(ev.Box,{children:d||!a?(0,n.jsx)(l.AvatarSkeleton,{animated:!0}):(0,n.jsx)(l.UserAvatar,{user:a})}),r[0]=d,r[1]=a,r[2]=t):t=r[2],r[3]!==d||r[4]!==a?(i=(0,n.jsx)(ev.Box,{children:d||!a?.displayName?(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(oR,{animated:!0})}):(0,n.jsx)(ev.Text,{muted:!0,size:1,children:a.displayName})}),r[3]=d,r[4]=a,r[5]=i):i=r[5],r[6]!==t||r[7]!==i||r[8]!==s?(o=(0,n.jsxs)(ev.Flex,{align:"center",gap:2,padding:1,children:[t,i]},s),r[6]=t,r[7]=i,r[8]=s,r[9]=o):o=r[9],o},oE=e=>{let t,i,o,r,s=(0,ey.c)(9),{collaborators:a}=e,{t:d}=(0,l.useTranslation)("studio");return s[0]!==d?(t=d("timeline.changes.title"),s[0]=d,s[1]=t):t=s[1],s[2]!==t?(i=(0,n.jsx)(ev.Box,{padding:1,paddingBottom:2,children:(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:t})}),s[2]=t,s[3]=i):i=s[3],s[4]!==a?(o=a.map(ok),s[4]=a,s[5]=o):o=s[5],s[6]!==i||s[7]!==o?(r=(0,n.jsxs)(ev.Stack,{paddingBottom:1,children:[i,o]}),s[6]=i,s[7]=o,s[8]=r):r=s[8],r};function oD(e){let t,i,o,r,s,a,d,u,c,p,m,g,f,x,b,y,v,j,w,S,C,I=(0,ey.c)(55),{chunk:_,isSelected:T,onSelect:R,collaborators:P,optionsMenu:E}=e,{t:D}=(0,l.useTranslation)("studio"),{type:k,endTimestamp:M}=_;I[0]!==k?(t=ox[k],I[0]=k,I[1]=t):t=I[1];let F=t;I[2]!==_.authors?(i=Array.from(_.authors),I[2]=_.authors,I[3]=i):i=I[3];let A=i;I[4]!==P?(o=P?Array.from(P):[],I[4]=P,I[5]=o):o=I[5];let L=o,V="delete"!==k;I[6]===Symbol.for("react.memo_cache_sentinel")?(r={dateStyle:"medium",timeStyle:"short"},I[6]=r):r=I[6];let z=(0,l.useDateTimeFormat)(r);I[7]!==M?(s=new Date(M),I[7]=M,I[8]=s):s=I[8];let O=(0,l.useRelativeTime)(s||"",oT);if(I[9]!==z||I[10]!==M){let e=new Date(M);a=z.format(e),I[9]=z,I[10]=M,I[11]=a}else a=I[11];let B=a;I[12]!==_||I[13]!==V||I[14]!==R?(d=e=>{e.preventDefault(),e.stopPropagation(),V&&R(_)},I[12]=_,I[13]=V,I[14]=R,I[15]=d):d=I[15];let H=d;I[16]===Symbol.for("react.memo_cache_sentinel")?(u={position:"relative"},I[16]=u):u=I[16],I[17]!==A?(c=(0,n.jsx)(oC,{maxLength:3,userIds:A,size:2}),I[17]=A,I[18]=c):c=I[18];let N=o_[k];return I[19]!==F?(p=F&&(0,n.jsx)(F,{}),I[19]=F,I[20]=p):p=I[20],I[21]!==p?(m=(0,n.jsx)(ev.Text,{size:0,children:p}),I[21]=p,I[22]=m):m=I[22],I[23]!==N||I[24]!==m?(g=(0,n.jsx)(oI,{align:"center",justify:"center",$color:N,children:m}),I[23]=N,I[24]=m,I[25]=g):g=I[25],I[26]!==g||I[27]!==c?(f=(0,n.jsxs)("div",{style:u,children:[c,g]}),I[26]=g,I[27]=c,I[28]=f):f=I[28],I[29]!==D||I[30]!==k?(x=D(oS[k])||(0,n.jsx)("code",{children:k}),I[29]=D,I[30]=k,I[31]=x):x=I[31],I[32]!==x?(b=(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:x}),I[32]=x,I[33]=b):b=I[33],I[34]!==B||I[35]!==M||I[36]!==O?(y=(0,n.jsx)(ev.Text,{as:"time",size:1,muted:!0,dateTime:M,title:B,children:O}),I[34]=B,I[35]=M,I[36]=O,I[37]=y):y=I[37],I[38]!==b||I[39]!==y?(v=(0,n.jsxs)(ev.Stack,{space:2,children:[b,y]}),I[38]=b,I[39]=y,I[40]=v):v=I[40],I[41]!==L?(j=L.length>0&&(0,n.jsx)(ev.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,n.jsx)(h.Tooltip,{placement:"top",content:(0,n.jsx)(oE,{collaborators:L}),portal:!0,children:(0,n.jsx)(ev.Box,{paddingLeft:2,paddingY:2,children:(0,n.jsx)(oC,{maxLength:3,userIds:L,size:0,withTooltip:!1})})})}),I[41]=L,I[42]=j):j=I[42],I[43]!==f||I[44]!==v||I[45]!==j?(w=(0,n.jsxs)(ev.Flex,{align:"center",gap:3,children:[f,v,j]}),I[43]=f,I[44]=v,I[45]=j,I[46]=w):w=I[46],I[47]!==_.id||I[48]!==H||I[49]!==T||I[50]!==w?(S=(0,n.jsx)(ev.Card,{as:"button",onClick:H,padding:2,pressed:T,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":_.id,children:w}),I[47]=_.id,I[48]=H,I[49]=T,I[50]=w,I[51]=S):S=I[51],I[52]!==E||I[53]!==S?(C=(0,n.jsxs)(ev.Flex,{align:"center",gap:1,children:[S,E]}),I[52]=E,I[53]=S,I[54]=C):C=I[54],C}function ok(e){return(0,n.jsx)(oP,{userId:e},e)}let oM=e=>"publish"!==e.type,oF=e=>"publish"===e.type,oA="timeline-list-wrapper",oL=({chunks:e,hasMoreChunks:t,lastChunk:o,onLoadMore:r,onSelect:s,listMaxHeight:a="calc(100vh - 280px)"})=>{let[d,u]=(0,i.useState)(!1),{t:c}=(0,l.useTranslation)("studio"),p=o?.id,m=(0,i.useMemo)(()=>(function(e){let t=[];for(let n of e){if(oF(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(oM(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(oF(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}oM(n)&&t.push(n)}return t})(e),[e]),[h,g]=(0,i.useState)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&oM(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,i.useEffect)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&oM(e)&&e.parentId){let t=e.parentId;g(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[m,p]);let f=(0,i.useMemo)(()=>m.filter(e=>!!oF(e)||!e.parentId||h.has(e.parentId)),[m,h]);(0,i.useEffect)(()=>{f.length<16&&t&&r()},[f,t,r]);let x=(0,i.useCallback)(e=>()=>g(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),b=(0,i.useMemo)(()=>p?f.findIndex(e=>e.id===p):-1,[p,f]),y=(0,i.useCallback)(t=>{let n=e.find(e=>e.id===t.id);n?s(n):(console.error("TimelineItem: chunk not found"),s(t))},[e,s]),v=(0,i.useCallback)((e,{activeIndex:i})=>(0,n.jsxs)(ev.Box,{paddingBottom:1,paddingTop:+(0===i),paddingRight:1,paddingLeft:oM(e)&&e.parentId?4:1,children:[(0,n.jsx)(oD,{chunk:e,isSelected:p===e.id,onSelect:y,collaborators:oF(e)?e.collaborators:void 0,optionsMenu:oF(e)&&e.children.length>0?(0,n.jsx)(oy,{isExpanded:h.has(e.id),onExpand:x(e.id)}):null}),i===f.length-1&&t&&(0,n.jsx)(l.LoadingBlock,{})]}),[h,f.length,x,y,t,p]);return(0,i.useEffect)(()=>u(!0),[]),(0,n.jsxs)(ow,{$visible:!b||d,"data-ui":"timeline",children:[0===f.length&&(0,n.jsxs)(ov,{padding:3,space:3,children:[(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:c("timeline.error.no-document-history-title")}),(0,n.jsx)(ev.Text,{muted:!0,size:1,children:c("timeline.error.no-document-history-description")})]}),f.length>0&&(0,n.jsx)(oj,{direction:"column",$maxHeight:a,id:oA,children:(0,n.jsx)(l.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:c("timeline.list.aria-label"),autoFocus:"list",initialIndex:b,initialScrollAlign:"center",itemHeight:57,items:f,onEndReached:r,onEndReachedIndexOffset:20,overscan:5,renderItem:v,wrapAround:!1})})]})};function oV(e){let t,i,o,r,s,d,u=(0,ey.c)(14),{versionError:c}=e,{t:p}=(0,l.useTranslation)("studio");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(l.TextWithTone,{tone:"critical",children:(0,n.jsx)(a.ErrorOutlineIcon,{})}),u[0]=t):t=u[0],u[1]!==p||u[2]!==c?(i=p(c?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),u[1]=p,u[2]=c,u[3]=i):i=u[3],u[4]!==i?(o=(0,n.jsx)(l.TextWithTone,{size:1,tone:"critical",weight:"medium",children:i}),u[4]=i,u[5]=o):o=u[5],u[6]!==p||u[7]!==c?(r=p(c?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),u[6]=p,u[7]=c,u[8]=r):r=u[8],u[9]!==r?(s=(0,n.jsx)(l.TextWithTone,{size:1,tone:"critical",children:r}),u[9]=r,u[10]=s):s=u[10],u[11]!==o||u[12]!==s?(d=(0,n.jsxs)(ev.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,n.jsxs)(ev.Stack,{space:4,children:[o,s]})]}),u[11]=o,u[12]=s,u[13]=d):d=u[13],d}oL.displayName="Timeline";let oz=(0,eC.styled)(h.Popover)`
  overflow: hidden;
  overflow: clip;
`,oO="timeline-menu";function oB({chunk:e,mode:t,placement:o}){let{setTimelineRange:r,timelineError:s,ready:d,timelineStore:u}=im(),[c,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),[f,x]=(0,i.useState)(null),b=(0,ej.useToast)(),y=(0,l.useTimelineSelector)(u,e=>e.chunks),v=(0,l.useTimelineSelector)(u,e=>e.isLoading),j=(0,l.useTimelineSelector)(u,e=>e.hasMoreChunks),w=(0,l.useTimelineSelector)(u,e=>e.realRevChunk),S=(0,l.useTimelineSelector)(u,e=>e.sinceTime),{t:C}=(0,l.useTranslation)("studio"),I=(0,i.useCallback)(()=>{p(!0)},[]),_=(0,i.useCallback)(()=>{p(!1)},[]),T=(0,i.useCallback)(e=>{c&&("Escape"===e.key||"Tab"===e.key)&&(_(),m?.focus())},[m,_,c]);(0,ev.useGlobalKeyDown)(T),(0,ev.useClickOutsideEvent)(c&&_,()=>[m,f]);let R=(0,i.useCallback)(e=>{try{let[t,n]=u?.findRangeForRev(e)||[null,null];r(t,n)}catch(e){b.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[r,C,u,b]),P=(0,i.useCallback)(e=>{try{let[t,n]=u?.findRangeForSince(e)||[null,null];r(t,n)}catch(e){b.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[r,C,u,b]),E=(0,i.useCallback)(()=>{v||u?.loadMore()},[v,u]),D=(0,i.useMemo)(()=>{if(s)return(0,n.jsx)(oV,{});if("rev"===t)return(0,n.jsx)(oL,{chunks:y,hasMoreChunks:j,lastChunk:w,onLoadMore:E,onSelect:R});let e=w?y.filter(e=>e.index<w.index):y;return(0,n.jsx)(oL,{chunks:e,hasMoreChunks:j,lastChunk:S,onLoadMore:E,onSelect:P})},[y,E,j,t,w,R,P,S,s]),k={timestamp:{dateStyle:"medium",timeStyle:"short"}},M=e?C(oS[e.type],{context:"timestamp",timestamp:new Date(e?.endTimestamp),formatParams:k}):C("timeline.latest-revision"),F=e?C("timeline.since",{timestamp:new Date(e?.endTimestamp),formatParams:k}):C("timeline.since-version-missing"),A="rev"===t?M:F,L=(0,i.useMemo)(()=>({[oO]:f}),[f]);return(0,n.jsx)(ev.PortalProvider,{__unstable_elements:L,children:(0,n.jsx)(oz,{"data-testid":"timeline-menu",constrainSize:!0,content:c&&D,"data-ui":"versionMenu",open:c,placement:o,matchReferenceWidth:!0,portal:!0,ref:x,children:(0,n.jsx)(ev.Flex,{width:"fill",children:(0,n.jsx)(h.Button,{"data-testid":c?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!d,mode:"ghost",onClick:c?_:I,ref:g,selected:c,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:a.ChevronDownIcon,text:d?A:C("timeline.loading-history")})})})})}let oH=(0,eC.styled)(e_.motion.path)`
  transform-origin: center;
`,oN=e=>{let t,i=(0,ey.c)(2);return i[0]!==e?(t=(0,n.jsx)(e_.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),i[0]=e,i[1]=t):t=i[1],t},o$=e=>{let t,i=(0,ey.c)(2);return i[0]!==e?(t=(0,n.jsx)(oH,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),i[0]=e,i[1]=t):t=i[1],t},oU=e=>{let t,i=(0,ey.c)(2);return i[0]!==e?(t=(0,n.jsx)(e_.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),i[0]=e,i[1]=t):t=i[1],t},oG=eC.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,oW=eC.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${oG} 1s ease-in-out infinite;
  }
`,oq={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},oK={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},oY={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},oX={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function oQ(e){let t,i,l,o,r,s=(0,ey.c)(13),{status:a}=e;if(!a)return null;let d="changes"===a?void 0:"";return s[0]!==a?(t=(0,n.jsx)(o$,{variants:oY,initial:a,animate:a}),i=(0,n.jsx)(oN,{variants:oK,initial:a,animate:a}),s[0]=a,s[1]=t,s[2]=i):(t=s[1],i=s[2]),s[3]!==d||s[4]!==t||s[5]!==i?(l=(0,n.jsxs)(oW,{"data-rotate":d,children:[t,i]}),s[3]=d,s[4]=t,s[5]=i,s[6]=l):l=s[6],s[7]!==a?(o=(0,n.jsx)(oU,{variants:oX,initial:a,animate:a}),s[7]=a,s[8]=o):o=s[8],s[9]!==a||s[10]!==l||s[11]!==o?(r=(0,n.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,n.jsxs)(e_.motion.g,{variants:oq,initial:a,animate:a,children:[l,o]})}),s[9]=a,s[10]=l,s[11]=o,s[12]=r):r=s[12],r}let oJ={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},oZ=e=>{let t,i,o,r,s,a=(0,ey.c)(13),{status:d}=e,{t:u}=(0,l.useTranslation)(x);if("saved"!==d&&"syncing"!==d)return null;let c=oJ[d];return a[0]!==d?(t=(0,n.jsx)(oQ,{status:d}),a[0]=d,a[1]=t):t=a[1],a[2]!==c.tone||a[3]!==t?(i=(0,n.jsx)(l.TextWithTone,{size:1,tone:c.tone,children:t}),a[2]=c.tone,a[3]=t,a[4]=i):i=a[4],a[5]!==c.i18nKey||a[6]!==u?(o=u(c.i18nKey),a[5]=c.i18nKey,a[6]=u,a[7]=o):o=a[7],a[8]!==o?(r=(0,n.jsx)(ev.Text,{muted:!0,size:1,children:o}),a[8]=o,a[9]=r):r=a[9],a[10]!==i||a[11]!==r?(s=(0,n.jsxs)(ev.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[i,r]}),a[10]=i,a[11]=r,a[12]=s):s=a[12],s},o0={minimal:!0,useTemporalPhrase:!0},o1=e_.motion.create(ev.Button),o2=e_.motion.create(ev.Box),o3=()=>{let e,t,i=(0,ey.c)(2);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{style:{margin:-5},children:(0,n.jsx)(l.AvatarSkeleton,{$size:0,animated:!0})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)(ev.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,n.jsx)(ej.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),i[1]=t):t=i[1],t},o4=e=>{let t,i,o,r,s,a,d,u,c=(0,ey.c)(17),{author:p,translationKey:m,timestamp:h}=e,{onHistoryOpen:g,inspector:f,onHistoryClose:x}=im(),{t:b}=(0,l.useTranslation)(),y=(0,l.useRelativeTime)(void 0===h?"":h,o0);c[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},i={opacity:0},o={opacity:0},c[0]=t,c[1]=i,c[2]=o):(t=c[0],i=c[1],o=c[2]);let v=f?.name===ij?x:g;return c[3]!==p?(r=p&&(0,n.jsx)("div",{style:{margin:-5},children:(0,n.jsx)(l.UserAvatar,{user:p,size:0})}),c[3]=p,c[4]=r):r=c[4],c[5]!==b||c[6]!==m?(s=b(m),c[5]=b,c[6]=m,c[7]=s):s=c[7],c[8]!==y||c[9]!==s?(a=(0,n.jsxs)(ev.Text,{muted:!0,size:1,children:[s," ",y]}),c[8]=y,c[9]=s,c[10]=a):a=c[10],c[11]!==r||c[12]!==a?(d=(0,n.jsxs)(ev.Flex,{align:"center",flex:"none",gap:3,children:[r,a]}),c[11]=r,c[12]=a,c[13]=d):d=c[13],c[14]!==v||c[15]!==d?(u=(0,n.jsx)(o1,{"data-testid":"pane-footer-document-status",animate:t,initial:i,exit:o,mode:"bleed",onClick:v,padding:2,muted:!0,children:d}),c[14]=v,c[15]=d,c[16]=u):u=c[16],u},o5=()=>{let{editState:e}=im(),{selectedPerspective:t}=(0,l.usePerspective)(),o=(0,i.useMemo)(()=>(0,l.isPublishedPerspective)(t)&&e?.published?._updatedAt?{translationKey:l.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:e.published._updatedAt}:e?.version?._updatedAt?{translationKey:e?.version?._updatedAt===e?.version?._createdAt?l.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:l.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:e.version._updatedAt}:e?.draft?._updatedAt?{translationKey:e?.draft?._updatedAt===e?.draft?._createdAt?l.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:l.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:e.draft._updatedAt}:null,[t,e?.published?._updatedAt,e?.version?._updatedAt,e?.version?._createdAt,e?.draft?._updatedAt,e?.draft?._createdAt]);return o?(0,n.jsx)(o4,{author:"",translationKey:o.translationKey,timestamp:o.timestamp}):null},o6=()=>{let e,t=(0,ey.c)(6),{events:i,loading:o}=(0,l.useEvents)(),r=i?.[0];if(!r&&o){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o3,{}),t[0]=e):e=t[0],e}if(!r){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o5,{}),t[1]=e):e=t[1],e}let s=l.TIMELINE_ITEM_I18N_KEY_MAPPING[r.documentVariantType][r.type];return t[2]!==r.author||t[3]!==r.timestamp||t[4]!==s?(e=(0,n.jsx)(o4,{author:r.author,translationKey:s,timestamp:r.timestamp}),t[2]=r.author,t[3]=r.timestamp,t[4]=s,t[5]=e):e=t[5],e},o8=()=>{let e,t,i=(0,ey.c)(8),{timelineStore:o}=im(),r=(0,l.useTimelineSelector)(o,o9),s=(0,l.useTimelineSelector)(o,re),a=r?.[0];if(!a&&s){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o3,{}),i[0]=e):e=i[0],e}if(!a){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o5,{}),i[1]=e):e=i[1],e}i[2]!==a.authors?(e=Array.from(a.authors),i[2]=a.authors,i[3]=e):e=i[3];let d=e[0],u=oS[a.type];return i[4]!==d||i[5]!==a.endTimestamp||i[6]!==u?(t=(0,n.jsx)(o4,{author:d,translationKey:u,timestamp:a.endTimestamp}),i[4]=d,i[5]=a.endTimestamp,i[6]=u,i[7]=t):t=i[7],t};function o7(){let e,t,o,r,s,a,d,u=(0,ey.c)(18),{documentId:c,documentType:p,editState:m,value:h}=im(),[g,f]=(0,i.useState)(null),x=(0,l.useSource)().beta?.eventsAPI?.documents,b=(0,l.useSyncState)(c,p,m?.release),y=h?._updatedAt;return u[0]!==g||u[1]!==b.isSyncing?(e=()=>{if("syncing"===g&&!b.isSyncing){let e=setTimeout(()=>f("saved"),1e3);return()=>clearTimeout(e)}if("saved"===g){let e=setTimeout(()=>f(null),3e3);return()=>clearTimeout(e)}},u[0]=g,u[1]=b.isSyncing,u[2]=e):e=u[2],u[3]!==y||u[4]!==g||u[5]!==b.isSyncing?(t=[g,y,b.isSyncing],u[3]=y,u[4]=g,u[5]=b.isSyncing,u[6]=t):t=u[6],(0,i.useEffect)(e,t),u[7]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{f(null)},u[7]=o):o=u[7],u[8]!==c?(r=[c],u[8]=c,u[9]=r):r=u[9],(0,i.useLayoutEffect)(o,r),u[10]!==b.isSyncing?(s=()=>{b.isSyncing&&f("syncing")},u[10]=b.isSyncing,u[11]=s):s=u[11],u[12]!==y||u[13]!==b.isSyncing?(a=[b.isSyncing,y],u[12]=y,u[13]=b.isSyncing,u[14]=a):a=u[14],(0,i.useLayoutEffect)(s,a),u[15]!==x||u[16]!==g?(d=(0,n.jsx)(eT.AnimatePresence,{children:g?(0,n.jsx)(o2,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,n.jsx)(oZ,{status:g||void 0})}):(0,n.jsx)(n.Fragment,{children:x?(0,n.jsx)(o6,{}):(0,n.jsx)(o8,{})})}),u[15]=x,u[16]=g,u[17]=d):d=u[17],d}function o9(e){return e.chunks}function re(e){return e.isLoading}let rt=(0,eC.styled)(ev.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function rn(){let e,t,o,s,d=(0,ey.c)(9),{displayed:u,revisionNotFound:c}=im(),p=(0,i.useContext)(r.EventsContext),m=p?.revision,h=p?.events.find(e=>e.id===m?.revisionId),{t:g}=(0,l.useTranslation)(),f=h?.timestamp||u?._updatedAt||u?._createdAt,x=f?(0,n.jsx)(l.Translate,{t:g,i18nKey:"document-status.revision-from",values:{date:(0,tI.format)(new Date(f),"MMM d, yyyy '@' pp")}}):null;d[0]!==x?(e={name:"revision",text:x,tone:"caution"},d[0]=x,d[1]=e):e=d[1];let b=e;return d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(ev.Box,{flex:"none",children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(a.RestoreIcon,{})})}),d[2]=t):t=d[2],d[3]!==b||d[4]!==c||d[5]!==g?(o=c?(0,n.jsx)(l.Translate,{t:g,i18nKey:"document-status.revision-not-found"}):b.text,d[3]=b,d[4]=c,d[5]=g,d[6]=o):o=d[6],d[7]!==o?(s=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(ev.Flex,{flex:1,gap:3,padding:2,children:[t,(0,n.jsx)(ev.Box,{flex:1,children:(0,n.jsx)(rt,{size:1,textOverflow:"ellipsis",children:o})})]})}),d[7]=o,d[8]=s):s=d[8],s}let ri=e_.motion.create(ev.Card);function rl(e){let t,o,r,s,a,d,u,c,p=(0,ey.c)(22),{actionsBoxRef:m,createLinkMetadata:h}=e,{editState:g,onChange:f,revisionNotFound:x}=im(),{params:b}=i7(),y=void 0===b?ib:b,{selectedPerspective:v}=(0,l.usePerspective)(),{title:j}=iS(),w=(0,l.useSanityCreateConfig)().components?.documentLinkedActions,S=!!y.rev,[C,I]=(0,i.useState)(null),[_,T]=(0,i.useState)(null);p[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{I(e.contentRect.width<480)},p[0]=t):t=p[0];let R=t;p[1]!==_?(o={element:_,onResize:R},p[1]=_,p[2]=o):o=p[2],function(e){let t,n,o=(0,ey.c)(4),{element:r,onResize:s}=e;o[0]!==r||o[1]!==s?(t=()=>(r&&l.resizeObserver.observe(r,s),()=>{r&&l.resizeObserver.unobserve(r)}),n=[r,s],o[0]=r,o[1]=s,o[2]=t,o[3]=n):(t=o[2],n=o[3]),(0,i.useLayoutEffect)(t,n)}(o);e:{let e=!!(g?.ready&&"boolean"==typeof C);if(v){if((0,l.isPublishedPerspective)(v)){r=e&&!!g?.published;break e}if((0,l.isReleaseDocument)(v)){r=e&&!!g?.version;break e}}r=e}let P=r;if(h&&(0,l.isSanityCreateLinked)(h)&&w){let e;p[3]!==w||p[4]!==h||p[5]!==f||p[6]!==j?(e=(0,n.jsx)(w,{metadata:h,panelPortalElementId:lM,onDocumentChange:f,documentTitle:j}),p[3]=w,p[4]=h,p[5]=f,p[6]=j,p[7]=e):e=p[7],s=e}else if(S){let e;p[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l9,{}),p[8]=e):e=p[8],s=e}else{let e;p[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l7,{}),p[9]=e):e=p[9],s=e}if(S&&x)return null;let E=S?"revision":"published";p[10]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:.2},p[10]=a):a=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1,transition:{duration:.3}},p[11]=d):d=p[11];let D=S?"caution":void 0;return p[12]!==s||p[13]!==m||p[14]!==C||p[15]!==P||p[16]!==S?(u=P&&(0,n.jsxs)(ev.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!S,paddingRight:+!S,children:[(0,n.jsxs)(ev.Flex,{align:"center",flex:1,gap:C?2:3,wrap:"wrap",paddingRight:3,children:[(0,n.jsxs)(ev.Flex,{align:"center",children:[S?(0,n.jsx)(rn,{}):(0,n.jsx)(o7,{}),(0,n.jsx)(ou,{})]}),(0,n.jsx)(oh,{})]}),(0,n.jsxs)(ev.Flex,{align:"flex-start",justify:"flex-end",ref:m,style:{flexShrink:0,marginLeft:"auto"},children:[(0,n.jsx)(ou,{}),s]})]}),p[12]=s,p[13]=m,p[14]=C,p[15]=P,p[16]=S,p[17]=u):u=p[17],p[18]!==E||p[19]!==D||p[20]!==u?(c=(0,n.jsx)(ri,{initial:a,animate:d,tone:D,radius:3,ref:T,sizing:"border",padding:2,children:u},E),p[18]=E,p[19]=D,p[20]=u,p[21]=c):c=p[21],c}let ro=(0,i.memo)(function(e){let t,i,o,r,s,a,d,u,c,p,m,h,g,f=(0,ey.c)(26);f[0]!==e?({actionsBoxElement:t,activeIndex:i,as:p,children:o,id:r,onActionStart:s,onKeyDown:a,rootRef:u,states:c,...d}=e,f[0]=e,f[1]=t,f[2]=i,f[3]=o,f[4]=r,f[5]=s,f[6]=a,f[7]=d,f[8]=u,f[9]=c,f[10]=p):(t=f[1],i=f[2],o=f[3],r=f[4],s=f[5],a=f[6],d=f[7],u=f[8],c=f[9],p=f[10]);let x=void 0===p?"div":p,b=c[i];f[11]!==s||f[12]!==a||f[13]!==c?(m=e=>{let t=c.filter(t=>t.shortcut&&(0,ty.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),s(c.indexOf(n));return}a&&a(e)},f[11]=s,f[12]=a,f[13]=c,f[14]=m):m=f[14];let y=m;return f[15]!==t||f[16]!==b?(h=b&&b.dialog&&(0,n.jsx)(l.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(lH,{dialog:b.dialog,referenceElement:t})}),f[15]=t,f[16]=b,f[17]=h):h=f[17],f[18]!==x||f[19]!==o||f[20]!==y||f[21]!==r||f[22]!==d||f[23]!==u||f[24]!==h?(g=(0,n.jsxs)(x,{id:r,onKeyDown:y,tabIndex:-1,...d,ref:u,children:[o,h]}),f[18]=x,f[19]=o,f[20]=y,f[21]=r,f[22]=d,f[23]=u,f[24]=h,f[25]=g):g=f[25],g}),rr=(0,i.memo)(e=>{let t,l,o,r,s,a,d,u,c=(0,ey.c)(20);c[0]!==e?({actionsBoxElement:t,as:r,children:l,...o}=e,c[0]=e,c[1]=t,c[2]=l,c[3]=o,c[4]=r):(t=c[1],l=c[2],o=c[3],r=c[4]);let p=void 0===r?"div":r,{actions:m,editState:h,isInitialValueLoading:g,revisionId:f}=im(),[x,b]=(0,i.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{b(e)},c[5]=s):s=c[5];let y=s;c[6]!==h||c[7]!==g||c[8]!==f?(a=h&&{...h,onComplete:rs,revision:f||void 0,initialValueResolved:!g},c[6]=h,c[7]=g,c[8]=f,c[9]=a):a=c[9];let v=a;c[10]!==t||c[11]!==x||c[12]!==p||c[13]!==l||c[14]!==o?(d=e=>{let{states:i}=e;return(0,n.jsx)(ro,{...o,activeIndex:x,actionsBoxElement:t,as:p,onActionStart:y,states:i,children:l})},c[10]=t,c[11]=x,c[12]=p,c[13]=l,c[14]=o,c[15]=d):d=c[15];let j=d;return v&&m?(c[16]!==v||c[17]!==m||c[18]!==j?(u=(0,n.jsx)(sw,{actionProps:v,actions:m,children:j}),c[16]=v,c[17]=m,c[18]=j,c[19]=u):u=c[19],u):null});function rs(){}rr.displayName="Memo(DocumentActionShortcuts)";let ra=()=>{let e,t=(0,ey.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function rd(e){let t,i,o,r,s,a,d,u=(0,ey.c)(23),{documentType:c,value:p,currentMinWidth:m,paneKey:h,minWidth:g}=e,{t:f}=(0,l.useTranslation)();return u[0]!==c?(t={documentType:c},u[0]=c,u[1]=t):t=u[1],u[2]!==f||u[3]!==t?(i=(0,n.jsx)(l.Translate,{t:f,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=f,u[3]=t,u[4]=i):i=u[4],u[5]!==c||u[6]!==f?(o=c&&(0,n.jsx)(ev.Text,{as:"p",children:(0,n.jsx)(l.Translate,{t:f,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:c}})}),u[5]=c,u[6]=f,u[7]=o):o=u[7],u[8]!==c||u[9]!==f?(r=!c&&(0,n.jsx)(ev.Text,{as:"p",children:f("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=c,u[9]=f,u[10]=r):r=u[10],u[11]!==p?(s=l.isDev&&p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,n.jsx)(ev.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,n.jsx)(ev.Code,{language:"json",size:[1,1,2],children:JSON.stringify(p,null,2)})})]}),u[11]=p,u[12]=s):s=u[12],u[13]!==o||u[14]!==r||u[15]!==s?(a=(0,n.jsxs)(ev.Stack,{space:4,children:[o,r,s]}),u[13]=o,u[14]=r,u[15]=s,u[16]=a):a=u[16],u[17]!==m||u[18]!==g||u[19]!==h||u[20]!==i||u[21]!==a?(d=(0,n.jsx)(ia,{currentMinWidth:m,flex:2.5,minWidth:g,paneKey:h,title:i,tone:"caution",children:a}),u[17]=m,u[18]=g,u[19]=h,u[20]=i,u[21]=a,u[22]=d):d=u[22],d}let ru=["fixed","fixed","absolute"];function rc(e){let t,i,o,r,s,a,d=(0,ey.c)(16),{documentPanelPortalElement:u,setFooterElement:c,setActionsBoxElement:p}=e,m=(0,l.useZIndex)(),{value:g}=im();d[0]!==u?(t={[lM]:u},d[0]=u,d[1]=t):t=d[1];let f=t;d[2]!==g?(i=(0,l.getSanityCreateLinkMetadata)(g),d[2]=g,d[3]=i):i=d[3];let x=i;return d[4]!==x||d[5]!==p?(o=(0,n.jsx)(h.TooltipDelayGroupProvider,{children:(0,n.jsx)(rl,{actionsBoxRef:p,createLinkMetadata:x})}),d[4]=x,d[5]=p,d[6]=o):o=d[6],d[7]!==c||d[8]!==o?(r=(0,n.jsx)(n1,{ref:c,padding:1,children:o}),d[7]=c,d[8]=o,d[9]=r):r=d[9],d[10]!==r||d[11]!==m.portal?(s=(0,n.jsx)(ej.DialogProvider,{position:ru,zOffset:m.portal,children:r}),d[10]=r,d[11]=m.portal,d[12]=s):s=d[12],d[13]!==f||d[14]!==s?(a=(0,n.jsx)(ev.PortalProvider,{__unstable_elements:f,children:s}),d[13]=f,d[14]=s,d[15]=a):a=d[15],a}let rp=[],rm=["fixed","fixed","absolute"],rh=(0,eC.styled)(l.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function rg(){let{changesOpen:e,displayed:t,documentId:o,documentType:r,editState:s,fieldActions:d,focusPath:u,inspectOpen:c,inspector:p,inspectors:m,onFocus:h,onHistoryOpen:g,onMenuAction:f,onPathOpen:b,paneKey:y,schemaType:v,value:j,previewUrl:w}=im(),{stickyParams:S}=(0,eP.useRouter)(),{params:C}=i7(),{features:I}=ix(),{t:_}=(0,l.useTranslation)(x),{collapsed:T}=nL(),R=(0,l.useZIndex)(),[P,E]=(0,i.useState)(null),[D,k]=(0,i.useState)(null),[M,F]=(0,i.useState)(null),[A,L]=(0,i.useState)(null),[V,z]=(0,i.useState)(null);(0,l.useGlobalCopyPasteElementHandler)({element:P,focusPath:u,value:j});let[O,B]=(0,i.useState)([]),[H,N]=(0,i.useState)([]),$=(0,ej.useElementRect)(D),U=(0,ej.useElementRect)(M),G=$?.height,W=U?.height,q=600+320*!!p,K=320+320*!!p,Y=(0,i.useMemo)(()=>m?.find(e=>e.name===p?.name),[m,p?.name]),X=(0,l.useDocumentIdStack)({displayed:t,documentId:o,editState:s}),Q=!!j,J=(0,i.useMemo)(()=>{var e;let t,n;return t=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let o=i[l];return!o||o.hidden?null:{action:`${iy}${n.name}`,group:o.showAsAction?void 0:"inspectors",icon:o.icon,disabled:!t,selected:e?.name===n.name,shortcut:o.hotkeys?.join("+"),showAsAction:o.showAsAction,title:o.title,tone:o.tone}}).filter(Boolean)}(e={currentInspector:Y,features:I,hasValue:Q,inspectorMenuItems:O,inspectors:m,previewUrl:w,documentIdStack:X,t:_,displayInlineChanges:"true"===S.displayInlineChanges}),n=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:a.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:a.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?a.CheckmarkIcon:ra}}(e)].filter(Boolean),[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:a.LinkIcon},...t,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:a.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...n]},[Y,X,I,Q,O,m,w,_,S.displayInlineChanges]),Z=(0,i.useCallback)(e=>{for(let t of J)if(t.shortcut&&(0,ty.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),f(t);return}},[f,J]),ee=(0,i.useCallback)(e=>{b(e),h(e)},[b,h]);return v?(0,n.jsxs)(l.GetFormValueProvider,{value:j,children:[m.length>0&&(0,n.jsx)(iw,{documentId:o,documentType:r,inspectors:m,onMenuItems:B}),d.length>0&&v&&(0,n.jsx)(l.FieldActionsResolver,{actions:d,documentId:o,documentType:r,onActions:N,path:rp,schemaType:v}),(0,n.jsx)(l.FieldActionsProvider,{actions:H,path:rp,children:(0,n.jsxs)(rr,{actionsBoxElement:A,as:nB,currentMinWidth:q,"data-testid":"document-pane",flex:2.5,id:y,minWidth:K,onKeyUp:Z,rootRef:E,children:[(0,n.jsx)(os,{ref:F,menuItems:J}),(0,n.jsx)(ej.DialogProvider,{position:rm,zOffset:R.paneDialog,children:(0,n.jsx)(ev.Flex,{direction:"column",flex:1,height:T?void 0:"fill",children:(0,n.jsx)(rh,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&C?.changesInspectorTab==="review",onOpenReviewChanges:g,onSetFocus:ee,children:(0,n.jsx)(lT,{footerHeight:G||null,headerHeight:W||null,isInspectOpen:c,rootElement:P,setDocumentPanelPortalElement:z,footer:(0,n.jsx)(rc,{documentPanelPortalElement:V,setFooterElement:k,setActionsBoxElement:L})})})})}),(0,n.jsx)(iI,{})]})})]}):(0,n.jsx)(rd,{currentMinWidth:q,documentType:r,minWidth:K,paneKey:y,value:j})}let rf=(e,t)=>{let n,o,r,s,a=(0,ey.c)(11),d=(0,l.useHistoryStore)(),[u,c]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1);a[0]!==e||a[1]!==t?(n={documentId:e,documentType:t},a[0]=e,a[1]=t,a[2]=n):n=a[2];let h=(0,l.useTimelineStore)(n),g=(0,l.useTimelineSelector)(h,rx);return a[3]!==e||a[4]!==d||a[5]!==g?(o=()=>{g&&e?(m(!0),d.getDocumentAtRevision(e,g).then(e=>{c(e||null),m(!1)}).catch(()=>{c(null),m(!1)})):(c(null),m(!1))},r=[e,g,d],a[3]=e,a[4]=d,a[5]=g,a[6]=o,a[7]=r):(o=a[6],r=a[7]),(0,i.useEffect)(o,r),a[8]!==u||a[9]!==p?(s={lastRevisionDocument:u,loading:p},a[8]=u,a[9]=p,a[10]=s):s=a[10],s};function rx(e){return e.lastNonDeletedRevId}let rb=(0,tu.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),ry=(0,tu.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),rv=(0,tu.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function rj(e){let t=(0,l.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}let rw=(0,i.memo)(e=>{let{children:t,index:s,pane:a,paneKey:d,onFocusPath:u,forcedVersion:c,historyStore:p}=e,{store:m,error:h,ready:g,revisionDocument:f,onOlderRevision:b,sinceDocument:y,isPristine:v,revisionId:j,lastNonDeletedRevId:w}=p,S=(0,l.useSchema)(),{setDocumentMeta:C}=(0,l.useCopyPaste)(),{document:{actions:I,badges:_,unstable_fieldActions:T,unstable_languageFilter:R,drafts:{enabled:P}}}=(0,l.useSource)(),E=(0,ts.useTelemetry)(),D=(0,eP.useRouter)(),k=i7(),M=k.setParams,{push:F}=(0,ej.useToast)(),{options:A,menuItemGroups:L=iv,title:V=null,views:z=[]}=a,O=(0,l.useUnique)(A),B=O.id,H=(0,o.getPublishedId)(B),N=A.type,$=(0,l.useUnique)(k.params)||ib,{buildStudioUrl:U}=(0,l.useStudioUrl)(),G=(0,l.usePerspective)(),{document:{drafts:{enabled:W}},beta:q}=(0,l.useWorkspace)(),K=(0,i.useMemo)(()=>q?.form?.enhancedObjectDialog?.enabled,[q]),{selectedReleaseId:Y,selectedPerspectiveName:X}=(0,i.useMemo)(()=>c||{selectedPerspectiveName:G.selectedPerspectiveName,selectedReleaseId:G.selectedReleaseId},[c,G.selectedPerspectiveName,G.selectedReleaseId]),Q=np(),J=(e=>{var t;let n,i,o,r,s,a,d,u,c=(0,ey.c)(13),{paneOptions:p,documentType:m,documentId:h,params:g}=e,f=(0,l.useTemplates)(),x=i7(),b=(0,l.useUnique)(x.payload);c[0]!==m||c[1]!==p.template||c[2]!==p.templateParameters||c[3]!==b||c[4]!==g.template||c[5]!==f?(o=(t={documentType:m,templateName:p.template,templateParams:p.templateParameters,panePayload:b,urlTemplate:g.template}).panePayload||{},r=t.templateName,t.urlTemplate&&r&&r!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${r}". Using "${r}".`),s=r||t.urlTemplate,a=f.filter(e=>e.schemaType===t.documentType),d={...t.templateParams,..."object"==typeof o&&o||{}},u=s,s||1!==a.length||(u=a[0].id),n={templateName:u,templateParams:d},c[0]=m,c[1]=p.template,c[2]=p.templateParameters,c[3]=b,c[4]=g.template,c[5]=f,c[6]=n):n=c[6];let{templateName:y,templateParams:v}=n;c[7]!==h||c[8]!==m||c[9]!==g.version||c[10]!==y||c[11]!==v?(i={documentId:h,documentType:m,templateName:y,templateParams:v,version:g.version},c[7]=h,c[8]=m,c[9]=g.version,c[10]=y,c[11]=v,c[12]=i):i=c[12];let j=(0,l.useInitialValue)(i);return(0,l.useUnique)(j)})({paneOptions:O,documentId:H,documentType:N,params:$}),Z=J.loading,{changesOpen:ee,currentInspector:et,inspectors:en,closeInspector:ei,openInspector:el,handleHistoryClose:eo,handleHistoryOpen:er,handleInspectorAction:es,inspectOpen:ea,handleLegacyInspectClose:ed}=function({documentId:e,documentType:t,params:n,setParams:o}){let{features:r}=ix(),s=(0,l.useSource)().document.inspectors,a=(0,i.useMemo)(()=>s({documentId:e,documentType:t}),[e,t,s]),[d,u]=(0,i.useState)(()=>n.inspect||null),c=(0,i.useRef)(n.inspect);(0,i.useEffect)(()=>{c.current!==n.inspect&&(c.current=n.inspect,u(n.inspect||null))},[n.inspect]);let p=(0,i.useMemo)(()=>a?.find(e=>e.name===d),[a,d]),m=(0,i.useMemo)(()=>a.find(e=>e.name===ij),[a]),h=p?.name===ij,g=(0,i.useCallback)(e=>{let t=e&&a.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(p){if(t){let e=t.onClose?.({params:n})??{params:n};u(null),c.current=void 0,o({...e.params,inspect:void 0});return}if(p){let e=p.onClose?.({params:n})??{params:n};u(null),c.current=void 0,o({...e.params,inspect:void 0})}}},[p,a,n,o]),f=(0,i.useCallback)((e,t)=>{let i=a.find(t=>t.name===e);if(!i)return void console.warn(`No inspector named "${e}"`);if(p?.name===i.name)return void o({...n,...t,inspect:i.name});let l=n;p&&(l=(i.onClose?.({params:l})??{params:l}).params);let r=i.onOpen?.({params:l})??{params:l};u(i.name),c.current=i.name,o({...r.params,...t,inspect:i.name})},[p,a,n,o]),x=(0,i.useCallback)(()=>{m&&g(m.name)},[g,m]),b=(0,i.useCallback)(()=>{r.reviewChanges&&m&&f(m.name,{changesInspectorTab:"review"})},[r.reviewChanges,f,m]),y="on"===n.inspect,v=(0,i.useCallback)((e=!y)=>{o(e?{...n,inspect:"on"}:{...n,inspect:void 0})},[y,n,o]),j=(0,i.useCallback)(()=>v(!1),[v]),w=(0,i.useCallback)(e=>{if("inspect"===e.action)return v(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iy.length),n=a.find(e=>e.name===t);return!!n&&(n.name===d?g(n.name):f(n.name),!0)},[g,d,a,f,v]);return{changesOpen:h,currentInspector:p,inspectors:a,closeInspector:g,openInspector:f,handleHistoryClose:x,handleHistoryOpen:b,handleInspectorAction:w,handleLegacyInspectClose:j,inspectOpen:y}}({documentId:H,documentType:N,params:$,setParams:M}),[eu,ec]=(0,i.useState)(!1),{lastRevisionDocument:ep}=rf(H,N),em=(0,i.useCallback)(e=>!!g&&!e?.draft&&!e?.published&&!e?.version&&!v,[g,v]),eh=(0,i.useCallback)(e=>{let t=(0,l.selectUpstreamVersion)(e);return ee?y||t:t||null},[ee,y]),eg=S.get(N),ef=(0,i.useCallback)(e=>{let t=em(e);return!!$.rev||eu||t||!(0,l.isPerspectiveWriteable)({selectedPerspective:G.selectedPerspective,isDraftModelEnabled:W,schemaType:eg}).result},[em,eu,W,$.rev,G.selectedPerspective,eg]),ex=(0,i.useCallback)(e=>b?f||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&w&&ep?ep:e,[b,f,w,ep]),{editState:eb,upstreamEditState:ev,hasUpstreamVersion:ew,connectionState:eS,focusPath:eC,onChange:eI,validation:e_,ready:eT,value:eE,formState:eD,permissions:ek,onPathOpen:eM,isPermissionsLoading:eF,formStateRef:eA,onProgrammaticFocus:eV,collapsedFieldSets:eO,collapsedPaths:eN,onBlur:e$,onFocus:eU,onSetActiveFieldGroup:eG,onSetCollapsedPath:eW,onSetCollapsedFieldSet:eq,openPath:eK}=(0,l.useDocumentForm)({changesOpen:ee,documentType:N,documentId:H,initialValue:J,comparisonValue:eh,releaseId:Y,selectedPerspectiveName:X,initialFocusPath:$.path?(0,ti.fromString)($.path):l.EMPTY_ARRAY,readOnly:ef,onFocusPath:u,getFormDocumentValue:ex,displayInlineChanges:"true"===D.stickyParams.displayInlineChanges}),{data:eY=[]}=(0,l.useActiveReleases)(),eX=(0,i.useCallback)(()=>{let e;switch(!0){case!!$.rev:e="revision";break;case Y&&(0,o.isVersionId)(eE._id):{let t=eY.find(e=>(0,l.getReleaseIdFromReleaseDocumentId)(e._id)===Y);e=t&&(0,l.isCardinalityOneRelease)(t)?"scheduled-draft":"version";break}case"published"===X:e="published";break;case P:e="draft";break;default:e="published"}return e},[$.rev,Y,eE._id,X,P,eY]),eJ=(0,i.useMemo)(()=>eX(),[eX]),eZ=(0,i.useMemo)(()=>({schemaType:N,documentId:H,versionType:eJ,releaseId:Y}),[N,H,eJ,Y]),e0=(0,i.useMemo)(()=>I(eZ),[I,eZ]),e3=(0,i.useCallback)(e=>{if(eM(e),K){let t=(0,l.pathToString)(e);$.path!==t&&M({...$,path:t})}},[eM,$,M,K]),e4=(0,i.useMemo)(()=>_({schemaType:N,documentId:H}),[_,H,N]),e5=(0,i.useMemo)(()=>R({schemaType:N,documentId:H}),[H,N,R]),e6=(0,l.useUnique)(z),e8=$.view||e6[0]&&e6[0].id||null,e7=function(e){let t,n,o,r,s=(0,ey.c)(6),{resolveProductionUrl:a}=(0,l.useSource)().document;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=new e1.BehaviorSubject(void 0),s[0]=t):t=s[0];let d=t;return s[1]!==e?(n=()=>{d.next(e)},o=[d,e],s[1]=e,s[2]=n,s[3]=o):(n=s[2],o=s[3]),(0,i.useEffect)(n,o),s[4]!==a?(r=d.asObservable().pipe((0,eB.distinctUntilChanged)(),(0,ez.debounceTime)(500),(0,eH.switchMap)(e=>(0,l.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,e2.from)(a({document:e})):(0,eQ.of)(void 0)),(0,eB.distinctUntilChanged)(),(0,eL.catchError)(rj)),s[4]=a,s[5]=r):r=s[5],(0,eR.useObservable)(r)}(eE),{t:e9}=(0,l.useTranslation)(x),te=(0,i.useMemo)(()=>eg?T({documentId:H,documentType:N,schemaType:eg}):[],[H,N,T,eg]),tt=eT&&(!$.rev||g||!!h),tn=(0,i.useMemo)(()=>ex(eE),[ex,eE]),{previousId:tl}=(0,l.useDocumentIdStack)({strict:!0,displayed:tn,documentId:H,editState:eb}),to=(0,i.useCallback)((e,t)=>{M({...$,since:e,rev:t||void 0})},[$,M]),tr=(0,i.useCallback)(()=>k.closeCurrent(),[k]),ta=(0,i.useCallback)(()=>k.duplicateCurrent(),[k]),td=(0,i.useCallback)(()=>{let e="true"!==D.stickyParams.displayInlineChanges;E.log(e?ry:rv),D.navigate({stickyParams:{displayInlineChanges:String(e)}})},[D,E]),tu=(0,i.useCallback)(async e=>{if("production-preview"===e.action&&e7)return window.open(e7),!0;if("copy-document-url"===e.action&&navigator){E.log(rb);let e=U({coreUi:e=>`${e}/intent/edit/id=${H};type=${N}`});return await navigator.clipboard.writeText(e),F({id:"copy-document-url",status:"info",title:e9("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(er(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iy))&&es(e),"compareVersions"===e.action&&"u">typeof tl?(Q.navigateDiffView({mode:"version",previousDocument:{type:N,id:tl},nextDocument:{type:N,id:eE._id}}),!0):"toggleInlineChanges"===e.action&&(td(),!0))},[e7,tl,E,U,F,e9,H,N,er,es,Q,eE._id,td]);(0,i.useEffect)(()=>{C({documentId:H,documentType:N,schemaType:eg,onChange:eI})},[H,N,eg,eI,C]);let tc=(0,i.useMemo)(()=>eh(ev),[ev,eh]),tp=(0,i.useMemo)(()=>em(eb),[eb,em]),tm=b&&!f,th=(0,i.useMemo)(()=>eb.version&&(0,l.isGoingToUnpublish)(eb.version)?eb.published:tn,[eb.version,eb.published,tn]),tg=(0,i.useMemo)(()=>({actions:e0,activeViewId:e8,badges:e4,changesOpen:ee,closeInspector:ei,collapsedFieldSets:eO,collapsedPaths:eN,compareValue:tc,connectionState:eS,displayed:th,documentId:H,documentIdRaw:B,documentType:N,editState:eb,fieldActions:te,focusPath:eC,inspector:et||null,inspectors:en,onBlur:e$,onChange:eI,onFocus:eU,onPathOpen:e3,onHistoryClose:eo,onHistoryOpen:er,onInspectClose:ed,onMenuAction:tu,onPaneClose:tr,onPaneSplit:ta,onSetActiveFieldGroup:eG,onSetCollapsedPath:eW,onSetCollapsedFieldSet:eq,openInspector:el,openPath:eK,index:s,inspectOpen:ea,validation:e_,menuItemGroups:L||[],paneKey:d,previewUrl:e7,ready:tt,schemaType:eg,hasUpstreamVersion:ew,isPermissionsLoading:eF,isInitialValueLoading:Z,permissions:ek,setTimelineRange:to,setIsDeleting:ec,isDeleting:eu,isDeleted:tp,timelineError:h,timelineStore:m,title:V,value:eE,selectedReleaseId:Y,views:e6,formState:eD,unstable_languageFilter:e5,revisionId:j,revisionNotFound:tm,lastNonDeletedRevId:w,lastRevisionDocument:ep}),[e0,e8,e4,ee,ei,eO,eN,tc,eS,th,H,B,N,eb,te,eC,et,en,e$,eI,eU,e3,eo,er,ed,tu,tr,ta,eG,eW,eq,el,eK,s,ea,e_,L,d,e7,tt,eg,ew,eF,Z,ek,to,eu,tp,h,m,V,eE,Y,e6,eD,e5,j,tm,w,ep]),tf=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{if(tt&&$.path){let{path:e,...t}=$;e!==tf.current&&eV((0,ti.resolveKeyedPath)(eA.current?.value,(0,ti.fromString)(e))),K||k.setParams(t)}tf.current=$.path},[eA,eV,k,$,tt,K]),(0,n.jsx)(r.DocumentPaneContext.Provider,{value:tg,children:t})});rw.displayName="Memo(DocumentPaneProvider)";let rS=e=>{let t,i,r,s,a,d,u,c=(0,ey.c)(37),{params:p}=i7(),m=void 0===p?ib:p,h=rz(e.pane.options,m),g=(0,l.useSchema)(),f=h.type,x=!!g.get(h.type)?.liveEdit,{selectedPerspectiveName:b,selectedReleaseId:y,selectedPerspective:v}=(0,l.usePerspective)(),{data:j}=(0,l.useArchivedReleases)();c[0]!==h.id?(t=(0,o.getPublishedId)(h.id),c[0]=h.id,c[1]=t):t=c[1];let w=(0,l.useEditState)(t,f,"default",y),S=x&&"drafts"===v&&!w?.draft,{rev:C,since:I}=m,_=m.historyVersion;e:{if(S){let e;c[2]!==h.id?(e=(0,o.getPublishedId)(h.id),c[2]=h.id,c[3]=e):e=c[3],i=e;break e}if(_&&j.some(e=>(0,l.getReleaseIdFromReleaseDocumentId)(e._id)===_)){let e;c[4]!==_||c[5]!==h.id?(e=(0,o.getVersionId)(h.id,_),c[4]=_,c[5]=h.id,c[6]=e):e=c[6],i=e;break e}if(typeof b>"u"){let e;c[7]!==h.id?(e=(0,o.getDraftId)(h.id),c[7]=h.id,c[8]=e):e=c[8],i=e;break e}if("published"===b){let e;c[9]!==h.id?(e=(0,o.getPublishedId)(h.id),c[9]=h.id,c[10]=e):e=c[10],i=e;break e}if(y){let e;c[11]!==h.id||c[12]!==b?(e=(0,o.getVersionId)(h.id,b),c[11]=h.id,c[12]=b,c[13]=e):e=c[13],i=e;break e}i=h.id}let T=i;c[14]!==T||c[15]!==h.type||c[16]!==C||c[17]!==I?(r={documentId:T,documentType:h.type,rev:C,since:I},c[14]=T,c[15]=h.type,c[16]=C,c[17]=I,c[18]=r):r=c[18];let R=(0,l.useEventsStore)(r),P=R.error,E=R.revision?.revisionId||null,D=!!(C&&!R.revision?.loading),k=R.revision?.document||null,M=R.sinceRevision?.document||null,F=!R.loading,A=0===R.events.length;c[19]!==R.events?(s=R.events.find(rC)?.id||null,c[19]=R.events,c[20]=s):s=c[20],c[21]!==R.error||c[22]!==A||c[23]!==s||c[24]!==E||c[25]!==D||c[26]!==k||c[27]!==M||c[28]!==F?(a={error:P,revisionId:E,onOlderRevision:D,revisionDocument:k,sinceDocument:M,ready:F,isPristine:A,lastNonDeletedRevId:s},c[21]=R.error,c[22]=A,c[23]=s,c[24]=E,c[25]=D,c[26]=k,c[27]=M,c[28]=F,c[29]=a):a=c[29];let L=a;return c[30]!==L||c[31]!==_||c[32]!==e?(d=_?(0,n.jsx)(l.PerspectiveProvider,{selectedPerspectiveName:_,excludedPerspectives:l.EMPTY_ARRAY,children:(0,n.jsx)(rw,{...e,historyStore:L})}):(0,n.jsx)(rw,{...e,historyStore:L}),c[30]=L,c[31]=_,c[32]=e,c[33]=d):d=c[33],c[34]!==d||c[35]!==R?(u=(0,n.jsx)(l.EventsProvider,{value:R,children:d}),c[34]=d,c[35]=R,c[36]=u):u=c[36],u};function rC(e){return!(0,l.isDeleteDocumentGroupEvent)(e)&&!(0,l.isDeleteDocumentVersionEvent)(e)}let rI=e=>{let t,r,s,a,d=(0,ey.c)(20),{pane:u}=e,c=i7(),p=rz(u.options,c.params),m=c.params||ib,[h,g]=(0,i.useState)(null);d[0]!==p.id?(t=(0,o.getPublishedId)(p.id),d[0]=p.id,d[1]=t):t=d[1],d[2]!==p.type||d[3]!==m.rev||d[4]!==m.since||d[5]!==t?(r={documentId:t,documentType:p.type,onError:g,rev:m.rev,since:m.since},d[2]=p.type,d[3]=m.rev,d[4]=m.since,d[5]=t,d[6]=r):r=d[6];let f=(0,l.useTimelineStore)(r),x=(0,l.useTimelineSelector)(f,r_),b=(0,l.useTimelineSelector)(f,rT),y=(0,l.useTimelineSelector)(f,rR),v=(0,l.useTimelineSelector)(f,rP),j=(0,l.useTimelineSelector)(f,rE),w=(0,l.useTimelineSelector)(f,rD),S=(0,l.useTimelineSelector)(f,rk),C=b?.id||null,I=!!w;d[7]!==S||d[8]!==x||d[9]!==f||d[10]!==C||d[11]!==v||d[12]!==y||d[13]!==I||d[14]!==h||d[15]!==j?(s={store:f,error:h,revisionId:C,onOlderRevision:x,revisionDocument:v,sinceDocument:y,ready:j,isPristine:I,lastNonDeletedRevId:S},d[7]=S,d[8]=x,d[9]=f,d[10]=C,d[11]=v,d[12]=y,d[13]=I,d[14]=h,d[15]=j,d[16]=s):s=d[16];let _=s;return d[17]!==_||d[18]!==e?(a=(0,n.jsx)(rw,{...e,historyStore:_}),d[17]=_,d[18]=e,d[19]=a):a=d[19],a};function r_(e){return e.onOlderRevision}function rT(e){return e.revTime}function rR(e){return e.sinceAttributes}function rP(e){return e.timelineDisplayed}function rE(e){return e.timelineReady}function rD(e){return e.isPristine}function rk(e){return e.lastNonDeletedRevId}function rM(e){let t=(0,ey.c)(4),{children:i}=e,o=i7(),{excludedPerspectives:r}=(0,l.usePerspective)(),{scheduledDraft:s}=o.params;if(s){let e;return t[0]!==i||t[1]!==r||t[2]!==s?(e=(0,n.jsx)(l.PerspectiveProvider,{selectedPerspectiveName:s,excludedPerspectives:r,children:i}),t[0]=i,t[1]=r,t[2]=s,t[3]=e):e=t[3],e}return i}let rF=(0,i.memo)(e=>{let t,i,o,r=(0,ey.c)(9),s=(0,l.useSource)(),{setParams:a,params:d}=i7();r[0]!==d||r[1]!==a?(t=e=>{a({...d,scheduledDraft:e},{perspective:""})},r[0]=d,r[1]=a,r[2]=t):t=r[2];let u=t;return r[3]!==e||r[4]!==s.beta?.eventsAPI?.documents?(i=s.beta?.eventsAPI?.documents?(0,n.jsx)(rS,{...e}):(0,n.jsx)(rI,{...e}),r[3]=e,r[4]=s.beta?.eventsAPI?.documents,r[5]=i):i=r[5],r[6]!==u||r[7]!==i?(o=(0,n.jsx)(rM,{children:(0,n.jsx)(l.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:u,children:i})}),r[6]=u,r[7]=i,r[8]=o):o=r[8],o});rF.displayName="Memo(DocumentPaneProviderWrapper)";let rA=(0,i.memo)(function(e){let t,i,o=(0,ey.c)(5),{name:r}=(0,l.useSource)(),s=e.pane.source||r;return o[0]!==e?(t=(0,n.jsx)(l.CopyPasteProvider,{children:(0,n.jsx)(rL,{...e})}),o[0]=e,o[1]=t):t=o[1],o[2]!==s||o[3]!==t?(i=(0,n.jsx)(l.SourceProvider,{name:s,children:t}),o[2]=s,o[3]=t,o[4]=i):i=o[4],i});function rL(e){var t,o,r;let s,a,d,u,c,p,m,h,g,f,b,y,v=(0,ey.c)(57),{pane:j,paneKey:w}=e,{resolveNewDocumentOptions:S}=(0,l.useSource)().document,{selectedPerspectiveName:C}=(0,l.usePerspective)(),I=i7(),_=rz(j.options,I.params),{documentType:T,isLoaded:R}=(0,l.useDocumentType)(_.id,_.type);!function(){let e,t,n,o,r,s=(0,ey.c)(10),{params:a,setParams:d}=i7(),u=void 0===a?ib:a,{selectedPerspectiveName:c}=(0,l.usePerspective)(),p=(0,i.useRef)(!1);s[0]!==u||s[1]!==d?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>u[e])&&d({...u,rev:"true"===u.preserveRev?u.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},s[0]=u,s[1]=d,s[2]=e):e=s[2];let m=(0,t_.useEffectEvent)(e);s[3]!==c||s[4]!==m?(t=()=>{p.current&&m(c)},s[3]=c,s[4]=m,s[5]=t):t=s[5],s[6]!==c?(n=[c],s[6]=c,s[7]=n):n=s[7],(0,i.useEffect)(t,n),s[8]===Symbol.for("react.memo_cache_sentinel")?(o=()=>(p.current=!0,()=>{p.current=!1}),r=[],s[8]=o,s[9]=r):(o=s[8],r=s[9]),(0,i.useEffect)(o,r)}();let P=((y=(0,ey.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(b={pick:nC,defaultComponent:rg},y[0]=b):b=y[0],(0,l.useMiddlewareComponents)(b));v[0]!==_.id||v[1]!==_.type||v[2]!==S?(s=S({type:"document",documentId:_.id,schemaType:_.type}),v[0]=_.id,v[1]=_.type,v[2]=S,v[3]=s):s=v[3];let E=s;v[4]!==E?(a={templateItems:E},v[4]=E,v[5]=a):a=v[5];let[D,k]=(0,l.useTemplatePermissions)(a),M=R&&!k;v[6]!==T||v[7]!==M||v[8]!==_||v[9]!==e?(d=M&&T&&_.type!==T?(t=e,o=_,r=T,{...t,pane:{...t.pane,options:{...o,type:r}}}):e,v[6]=T,v[7]=M,v[8]=_,v[9]=e,v[10]=d):d=v[10];let F=d,{ReferenceChildLink:A,handleEditReference:L,groupIndex:V,routerPanesState:z}=I;v[11]!==V||v[12]!==z?(u=z[V+1]?.[0].params||{},v[11]=V,v[12]=z,v[13]=u):u=v[13];let O=u,B=z.length,{parentRefPath:H}=O;v[14]!==V||v[15]!==H||v[16]!==B?(c=H?{path:(0,ti.fromString)(H),state:V>=B-1?"none":V>=B-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=V,v[15]=H,v[16]=B,v[17]=c):c=v[17];let N=c,{t:$}=(0,l.useTranslation)(x);if("*"===_.type&&!M){let e,t;return v[18]!==$?(e=$("panes.document-pane.document-not-found.loading"),v[18]=$,v[19]=e):e=v[19],v[20]!==w||v[21]!==e?(t=(0,n.jsx)(ip,{flex:2.5,minWidth:320,paneKey:w,title:e}),v[20]=w,v[21]=e,v[22]=t):t=v[22],t}if(!T){let e,t,i,o,r;return v[23]!==$?(e=$("panes.document-pane.document-not-found.title"),v[23]=$,v[24]=e):e=v[24],v[25]!==_.id?(t={id:_.id},v[25]=_.id,v[26]=t):t=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(i={Code:rV},v[27]=i):i=v[27],v[28]!==$||v[29]!==t?(o=(0,n.jsx)(ev.Stack,{space:4,children:(0,n.jsx)(ev.Text,{as:"p",children:(0,n.jsx)(l.Translate,{t:$,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:i})})}),v[28]=$,v[29]=t,v[30]=o):o=v[30],v[31]!==w||v[32]!==e||v[33]!==o?(r=(0,n.jsx)(ia,{flex:2.5,minWidth:320,paneKey:w,title:e,children:o}),v[31]=w,v[32]=e,v[33]=o,v[34]=r):r=v[34],r}let U=`${T}-${_.id}-${C||""}`;return v[35]!==P||v[36]!==_.id||v[37]!==_.type?(p=(0,n.jsx)(P,{documentId:_.id,documentType:_.type}),v[35]=P,v[36]=_.id,v[37]=_.type,v[38]=p):p=v[38],v[39]!==_.id||v[40]!==_.type||v[41]!==p?(m=(0,n.jsx)(ih,{documentId:_.id,documentType:_.type,children:p}),v[39]=_.id,v[40]=_.type,v[41]=p,v[42]=m):m=v[42],v[43]!==_.id||v[44]!==_.type||v[45]!==m?(h=(0,n.jsx)(nA,{documentId:_.id,documentType:_.type,children:m}),v[43]=_.id,v[44]=_.type,v[45]=m,v[46]=h):h=v[46],v[47]!==A||v[48]!==N||v[49]!==L||v[50]!==h||v[51]!==D?(g=(0,n.jsx)(l.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:A,onEditReference:L,initialValueTemplateItems:D,activePath:N,children:h}),v[47]=A,v[48]=N,v[49]=L,v[50]=h,v[51]=D,v[52]=g):g=v[52],v[53]!==F||v[54]!==U||v[55]!==g?(f=(0,n.jsx)(rF,{...F,children:g},U),v[53]=F,v[54]=U,v[55]=g,v[56]=f):f=v[56],f}function rV(e){let{children:t}=e;return(0,n.jsx)("code",{children:t})}function rz(e,t){let n,i,o=(0,ey.c)(8);o[0]!==t?(n=void 0===t?{}:t,o[0]=t,o[1]=n):n=o[1];let r=n,s=(0,l.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let l=e.template||r.template;o[2]!==l||o[3]!==s?(t=l?s.find(e=>e.id===l):void 0,o[2]=l,o[3]=s,o[4]=t):t=o[4];let a=t?.schemaType;if(!a){i=e;break e}o[5]!==a||o[6]!==e?(n={...e,type:a},o[5]=a,o[6]=e,o[7]=n):n=o[7],i=n}return i}let rO=(0,i.forwardRef)(function(e,t){let l,o,s,a=(0,ey.c)(9),{routerPanesState:d,groupIndex:u}=(0,i.useContext)(r.PaneRouterContext);a[0]!==u||a[1]!==d?(l=d.slice(0,u),a[0]=u,a[1]=d,a[2]=l):l=a[2];let c=l;a[3]!==c?(o={panes:c},a[3]=c,a[4]=o):o=a[4];let p=o;return a[5]!==e||a[6]!==t||a[7]!==p?(s=(0,n.jsx)(eP.StateLink,{...e,ref:t,state:p}),a[5]=e,a[6]=t,a[7]=p,a[8]=s):s=a[8],s}),rB=(0,i.forwardRef)(function(e,t){let l,o,s,a,d,u,c=(0,ey.c)(19);c[0]!==e?({childId:l,childPayload:s,childParameters:o,...a}=e,c[0]=e,c[1]=l,c[2]=o,c[3]=s,c[4]=a):(l=c[1],o=c[2],s=c[3],a=c[4]);let{routerPanesState:p,groupIndex:m}=(0,i.useContext)(r.PaneRouterContext);if(c[5]!==l||c[6]!==o||c[7]!==s||c[8]!==m||c[9]!==p){let e;c[11]!==l||c[12]!==o||c[13]!==s?(e=[{id:l,params:o,payload:s}],c[11]=l,c[12]=o,c[13]=s,c[14]=e):e=c[14],d={panes:[...p.slice(0,m+1),e]},c[5]=l,c[6]=o,c[7]=s,c[8]=m,c[9]=p,c[10]=d}else d=c[10];return c[15]!==t||c[16]!==a||c[17]!==d?(u=(0,n.jsx)(eP.StateLink,{...a,ref:t,state:d}),c[15]=t,c[16]=a,c[17]=d,c[18]=u):u=c[18],u}),rH=(0,i.forwardRef)(function(e,t){let o,s,a,d,u,c,p,m=(0,ey.c)(20),{routerPanesState:h,groupIndex:g,siblingIndex:f}=(0,i.useContext)(r.PaneRouterContext);m[0]!==e?({params:o,payload:s,...a}=e,m[0]=e,m[1]=o,m[2]=s,m[3]=a):(o=m[1],s=m[2],a=m[3]);let x=(0,l.useUnique)(o),b=(0,l.useUnique)(s),y=h[g],v=y[f],j=x??v.params,w=b??v.payload;m[4]!==v||m[5]!==j||m[6]!==w?(d={...v,params:j,payload:w},m[4]=v,m[5]=j,m[6]=w,m[7]=d):d=m[7];let S=d;m[8]!==y||m[9]!==S||m[10]!==f?(u=[...y.slice(0,f),S,...y.slice(f+1)],m[8]=y,m[9]=S,m[10]=f,m[11]=u):u=m[11];let C=u;m[12]!==h||m[13]!==g||m[14]!==C?(c={panes:[...h.slice(0,g),C,...h.slice(g+1)]},m[12]=h,m[13]=g,m[14]=C,m[15]=c):c=m[15];let I=c;return m[16]!==I||m[17]!==t||m[18]!==a?(p=(0,n.jsx)(eP.StateLink,{ref:t,...a,state:I}),m[16]=I,m[17]=t,m[18]=a,m[19]=p):p=m[19],p}),rN=(0,i.forwardRef)(function(e,t){let i,l,o,r,s,a,d,u,c,p,m=(0,ey.c)(22);m[0]!==e?({documentId:l,documentType:o,parentRefPath:r,children:i,template:a,...s}=e,m[0]=e,m[1]=i,m[2]=l,m[3]=o,m[4]=r,m[5]=s,m[6]=a):(i=m[1],l=m[2],o=m[3],r=m[4],s=m[5],a=m[6]);let h=a?.params;return m[7]!==r?(d=(0,ti.toString)(r),m[7]=r,m[8]=d):d=m[8],m[9]!==a?(u=a&&{template:a?.id},m[9]=a,m[10]=u):u=m[10],m[11]!==o||m[12]!==d||m[13]!==u?(c={type:o,parentRefPath:d,...u},m[11]=o,m[12]=d,m[13]=u,m[14]=c):c=m[14],m[15]!==i||m[16]!==l||m[17]!==t||m[18]!==s||m[19]!==h||m[20]!==c?(p=(0,n.jsx)(rB,{...s,ref:t,childId:l,childPayload:h,childParameters:c,children:i}),m[15]=i,m[16]=l,m[17]=t,m[18]=s,m[19]=h,m[20]=c,m[21]=p):p=m[21],p}),r$=[];function rU(e){let t,i,l,o,s,a,d,u,c,p,m,h,g,f=(0,ey.c)(60),{children:x,flatIndex:b,index:y,params:v,payload:j,siblingIndex:w}=e,{navigate:S,navigateIntent:C,resolvePathFromState:I}=(0,eP.useRouter)(),_=(0,eP.useRouterState)(),{panes:T,expand:R}=nL(),P=_?.panes||r$,E=T?.[T.length-2],D=y-1;f[0]!==D||f[1]!==P||f[2]!==_||f[3]!==w?(t=e=>{let t=P[D]||[],n=t[w],i=e(t,n),l=[...P.slice(0,D),i,...P.slice(D+1)];return{..._,panes:l}},f[0]=D,f[1]=P,f[2]=_,f[3]=w,f[4]=t):t=f[4];let k=t;f[5]!==k||f[6]!==S?(i=(e,t)=>{let n=k(e);return setTimeout(()=>S(n,t?{stickyParams:t}:void 0),0),n},f[5]=k,f[6]=S,f[7]=i):i=f[7];let M=i;f[8]!==k||f[9]!==I||f[10]!==w?(l=e=>I(k((t,n)=>[...t.slice(0,w),{...n,params:e},...t.slice(w+1)])),f[8]=k,f[9]=I,f[10]=w,f[11]=l):l=f[11];let F=l;f[12]!==M||f[13]!==w?(o=e=>{M((t,n)=>[...t.slice(0,w),{...n,payload:e},...t.slice(w+1)])},f[12]=M,f[13]=w,f[14]=o):o=f[14];let A=o;f[15]!==M||f[16]!==w?(s=(e,t)=>{M((t,n)=>[...t.slice(0,w),{...n,params:e},...t.slice(w+1)],t)},f[15]=M,f[16]=w,f[17]=s):s=f[17];let L=s;f[18]!==D||f[19]!==S||f[20]!==P?(a=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:o}=e;S({panes:[...P.slice(0,D+1),[{id:t,params:{template:l.id,parentRefPath:(0,ti.toString)(n),type:i,version:o},payload:l.params}]]})},f[18]=D,f[19]=S,f[20]=P,f[21]=a):a=f[21];let V=a,z=!!P[D]&&P[D].length>1,O=P[D]?P[D].length:0,B=b?rO:void 0;f[22]!==M?(u=e=>{let t=void 0===e?{}:e;M(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},d=()=>{M(rG)},f[22]=M,f[23]=d,f[24]=u):(d=f[23],u=f[24]),f[25]!==R||f[26]!==D||f[27]!==E||f[28]!==S||f[29]!==P?(c=e=>{(void 0===e||e)&&E&&R(E.element),S({panes:P.slice(0,D)})},f[25]=R,f[26]=D,f[27]=E,f[28]=S,f[29]=P,f[30]=c):c=f[30],f[31]!==M||f[32]!==w?(p=e=>{M((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,w),i,...t.slice(w)]})},f[31]=M,f[32]=w,f[33]=p):p=f[33],f[34]!==v||f[35]!==L?(m=e=>{let t=(0,eE.default)(v,"view");return L(e?{...t,view:e}:t)},f[34]=v,f[35]=L,f[36]=m):m=f[36],f[37]!==F||f[38]!==b||f[39]!==D||f[40]!==V||f[41]!==C||f[42]!==v||f[43]!==j||f[44]!==P||f[45]!==L||f[46]!==A||f[47]!==w||f[48]!==d||f[49]!==c||f[50]!==p||f[51]!==m||f[52]!==z||f[53]!==O||f[54]!==B||f[55]!==u?(h={index:b,groupIndex:D,siblingIndex:w,payload:j,params:v,hasGroupSiblings:z,groupLength:O,routerPanesState:P,ChildLink:rB,BackLink:B,ReferenceChildLink:rN,handleEditReference:V,ParameterizedLink:rH,replaceCurrent:u,closeCurrent:d,closeCurrentAndAfter:c,duplicateCurrent:p,setView:m,setParams:L,setPayload:A,createPathWithParams:F,navigateIntent:C},f[37]=F,f[38]=b,f[39]=D,f[40]=V,f[41]=C,f[42]=v,f[43]=j,f[44]=P,f[45]=L,f[46]=A,f[47]=w,f[48]=d,f[49]=c,f[50]=p,f[51]=m,f[52]=z,f[53]=O,f[54]=B,f[55]=u,f[56]=h):h=f[56];let H=h;return f[57]!==x||f[58]!==H?(g=(0,n.jsx)(r.PaneRouterContext.Provider,{value:H,children:x}),f[57]=x,f[58]=H,f[59]=g):g=f[59],g}function rG(e,t){return e.length>1?e.filter(e=>e!==t):e}function rW(e){let t,i,o,r,s,a=(0,ey.c)(14),{isSelected:d,pane:u,paneKey:c}=e;a[0]!==u?(t=(0,l.isRecord)(u)&&u.type||null,a[0]=u,a[1]=t):t=a[1];let p=t,{t:m}=(0,l.useTranslation)(x);return a[2]!==m?(i=m("panes.unknown-pane-type.title"),a[2]=m,a[3]=i):i=a[3],a[4]!==i?(o=(0,n.jsx)(n8,{title:i}),a[4]=i,a[5]=o):o=a[5],a[6]!==m||a[7]!==p?(r=(0,n.jsx)(n$,{children:(0,n.jsx)(ev.Box,{padding:4,children:"string"==typeof p?(0,n.jsx)(ev.Text,{as:"p",muted:!0,children:(0,n.jsx)(l.Translate,{t:m,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:p}})}):(0,n.jsx)(ev.Text,{as:"p",muted:!0,children:(0,n.jsx)(l.Translate,{t:m,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),a[6]=m,a[7]=p,a[8]=r):r=a[8],a[9]!==d||a[10]!==c||a[11]!==o||a[12]!==r?(s=(0,n.jsxs)(nB,{id:c,selected:d,children:[o,r]}),a[9]=d,a[10]=c,a[11]=o,a[12]=r,a[13]=s):s=a[13],s}let rq={component:(0,i.lazy)(()=>e.A(12245)),document:(0,i.lazy)(()=>Promise.resolve().then(function(){return a7})),documentList:(0,i.lazy)(()=>Promise.resolve().then(function(){return a9})),list:(0,i.lazy)(()=>e.A(737880))},rK=(0,i.memo)(function(e){let t,l,o,r,s=(0,ey.c)(23),{active:a,childItemId:d,groupIndex:u,index:c,itemId:p,pane:m,paneKey:h,params:g,payload:f,path:x,selected:b,siblingIndex:y}=e,v=rq[m.type]||rW;s[0]!==h||s[1]!==x||s[2]!==b?(t=(0,n.jsx)(ip,{paneKey:h,path:x,selected:b}),s[0]=h,s[1]=x,s[2]=b,s[3]=t):t=s[3];let j=d||"";return s[4]!==v||s[5]!==a||s[6]!==c||s[7]!==p||s[8]!==m||s[9]!==h||s[10]!==b||s[11]!==j?(l=(0,n.jsx)(v,{childItemId:j,index:c,itemId:p,isActive:a,isSelected:b,paneKey:h,pane:m}),s[4]=v,s[5]=a,s[6]=c,s[7]=p,s[8]=m,s[9]=h,s[10]=b,s[11]=j,s[12]=l):l=s[12],s[13]!==t||s[14]!==l?(o=(0,n.jsx)(i.Suspense,{fallback:t,children:l}),s[13]=t,s[14]=l,s[15]=o):o=s[15],s[16]!==u||s[17]!==c||s[18]!==g||s[19]!==f||s[20]!==y||s[21]!==o?(r=(0,n.jsx)(rU,{flatIndex:c,index:u,params:g,payload:f,siblingIndex:y,children:o}),s[16]=u,s[17]=c,s[18]=g,s[19]=f,s[20]=y,s[21]=o,s[22]=r):r=s[22],r},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...o})=>{if(!(0,eD.default)(e,i)||!(0,eD.default)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(o)]))if(n[e]!==o[e])return!1;return!0});function rY(e){let t,i,o=(0,ey.c)(10),{document:r}=e,s=(0,l.useSchema)().get(r._type),{t:a}=(0,l.useTranslation)(x),{title:d}=iS();if(!s){let e,t;return o[0]!==r._type||o[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:r._type}),o[0]=r._type,o[1]=a,o[2]=e):e=o[2],o[3]!==e?(t=(0,n.jsx)("code",{children:e}),o[3]=e,o[4]=t):t=o[4],t}return o[5]!==a||o[6]!==d?(t=d||(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),o[5]=a,o[6]=d,o[7]=t):t=o[7],o[8]!==t?(i=(0,n.jsx)(n.Fragment,{children:t}),o[8]=t,o[9]=i):i=o[9],i}let rX=(0,eC.styled)(ev.Box)`
  margin-left: auto;
`,rQ=eC.styled.details`
  flex: none;

  &[open] ${rX} {
    transform: rotate(180deg);
  }
`,rJ=eC.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,rZ=eC.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,ev.rem)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,ev.rem)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,ev.rem)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,r0=(0,eC.styled)(ev.Flex)`
  min-height: 33px;
`,r1=e=>{let t,i,o,r,s,d,u=(0,ey.c)(13),{t:c}=(0,l.useTranslation)(x),p=e.totalCount-e.references.length;return p?(u[0]!==p||u[1]!==c?(t=c("confirm-delete-dialog.other-reference-count.title",{count:p}),u[0]=p,u[1]=c,u[2]=t):t=u[2],u[3]!==t?(i=(0,n.jsx)(ev.Text,{size:1,muted:!0,children:t}),u[3]=t,u[4]=i):i=u[4],u[5]!==c?(o=c("confirm-delete-dialog.other-reference-count.tooltip"),u[5]=c,u[6]=o):o=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(ev.Text,{size:1,muted:!0,children:(0,n.jsx)(a.InfoOutlineIcon,{})}),u[7]=r):r=u[7],u[8]!==o?(s=(0,n.jsx)(h.Tooltip,{portal:!0,placement:"top",content:o,children:r}),u[8]=o,u[9]=s):s=u[9],u[10]!==i||u[11]!==s?(d=(0,n.jsx)(ev.Box,{padding:2,children:(0,n.jsxs)(ev.Inline,{space:2,children:[i,s]})}),u[10]=i,u[11]=s,u[12]=d):d=u[12],d):null};function r2(e){let t,i,o,r,s,a,d=(0,ey.c)(27),{icon:u,layout:c,presence:p,schemaType:m,value:g}=e,f=(0,l.useDocumentVersionInfo)(g._id),{perspectiveStack:x}=(0,l.usePerspective)();d[0]!==x||d[1]!==e.documentPreviewStore||d[2]!==m||d[3]!==g._id?(t=(0,l.getPreviewStateObservable)(e.documentPreviewStore,m,g._id,x),d[0]=x,d[1]=e.documentPreviewStore,d[2]=m,d[3]=g._id,d[4]=t):t=d[4];let b=t;d[5]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},d[5]=i):i=d[5];let{snapshot:y,original:v,isLoading:j}=(0,eR.useObservable)(b,i);d[6]!==j||d[7]!==p||d[8]!==f.draft||d[9]!==f.published||d[10]!==f.versions?(o=j?null:(0,n.jsx)(h.TooltipDelayGroupProvider,{children:(0,n.jsxs)(ev.Flex,{align:"center",gap:3,children:[p&&p.length>0&&(0,n.jsx)(l.DocumentPreviewPresence,{presence:p}),(0,n.jsx)(l.DocumentStatusIndicator,{draft:f.draft,published:f.published,versions:f.versions})]})}),d[6]=j,d[7]=p,d[8]=f.draft,d[9]=f.published,d[10]=f.versions,d[11]=o):o=d[11];let w=o;d[12]!==f.draft||d[13]!==f.published||d[14]!==f.versions?(r=(0,n.jsx)(l.DocumentStatus,{draft:f.draft,published:f.published,versions:f.versions}),d[12]=f.draft,d[13]=f.published,d[14]=f.versions,d[15]=r):r=d[15];let S=r;return d[16]!==v||d[17]!==y||d[18]!==g?(s=(0,l.getPreviewValueWithFallback)({snapshot:y,original:v,fallback:g}),d[16]=v,d[17]=y,d[18]=g,d[19]=s):s=d[19],d[20]!==u||d[21]!==j||d[22]!==c||d[23]!==w||d[24]!==s||d[25]!==S?(a=(0,n.jsx)(l.SanityDefaultPreview,{...s,isPlaceholder:j,icon:u,layout:c,status:w,tooltip:S}),d[20]=u,d[21]=j,d[22]=c,d[23]=w,d[24]=s,d[25]=S,d[26]=a):a=d[26],a}let r3=[];function r4(e){let t,i,r,s,a=(0,ey.c)(16),{onClick:d,type:u,value:c}=e,p=c?._id;a[0]!==p?(t=(0,o.getPublishedId)(p),a[0]=p,a[1]=t):t=a[1];let m=(0,l.useDocumentPresence)(t),h=(0,l.useDocumentPreviewStore)(),{ReferenceChildLink:g}=i7();a[2]!==g||a[3]!==u?.name||a[4]!==c?._id?(i=function(e){return(0,n.jsx)(g,{documentId:c?._id,documentType:u?.name,parentRefPath:r3,...e})},a[2]=g,a[3]=u?.name,a[4]=c?._id,a[5]=i):i=a[5];let f=i,x=u?.icon,b=m?.length>0?m:r3;return a[6]!==h||a[7]!==x||a[8]!==b||a[9]!==u||a[10]!==c?(r=(0,n.jsx)(r2,{documentPreviewStore:h,icon:x,layout:"compact",presence:b,schemaType:u,value:c}),a[6]=h,a[7]=x,a[8]=b,a[9]=u,a[10]=c,a[11]=r):r=a[11],a[12]!==d||a[13]!==f||a[14]!==r?(s=(0,n.jsx)(l.PreviewCard,{__unstable_focusRing:!0,as:f,"data-as":"a",onClick:d,radius:2,children:r}),a[12]=d,a[13]=f,a[14]=r,a[15]=s):s=a[15],s}function r5(e){let t,i,o,r,s,d,u,c,p,m,g,f,b,y,v,j,w=(0,ey.c)(59),{crossDatasetReferences:S,internalReferences:C,documentTitle:I,totalCount:_,action:T,datasetNames:R,hasUnknownDatasetNames:P,onReferenceLinkClick:E}=e,D=(0,l.useSchema)(),k=(0,ej.useToast)(),{t:M}=(0,l.useTranslation)(x);w[0]!==E||w[1]!==D||w[2]!==M?(t=e=>{let t=D.get(e._type);return t?(0,n.jsx)(r4,{type:t,value:e,onClick:E}):(0,n.jsx)(ev.Box,{padding:2,children:(0,n.jsx)(l.SanityDefaultPreview,{icon:a.UnknownIcon,title:M("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:M("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},w[0]=E,w[1]=D,w[2]=M,w[3]=t):t=w[3];let F=t;if(C?.totalCount===0&&S?.totalCount===0){let e,t;return w[4]!==I?(e={DocumentTitle:()=>(0,n.jsx)("strong",{children:I})},w[4]=I,w[5]=e):e=w[5],w[6]!==T||w[7]!==M||w[8]!==e?(t=(0,n.jsx)(ev.Text,{as:"p",size:1,children:(0,n.jsx)(l.Translate,{t:M,i18nKey:"confirm-delete-dialog.confirmation.text",context:T,components:e})}),w[6]=T,w[7]=M,w[8]=e,w[9]=t):t=w[9],t}w[10]!==P?(i=P?["unavailable"]:[],w[10]=P,w[11]=i):i=w[11],w[12]!==R||w[13]!==i?(o=[...R,...i],w[12]=R,w[13]=i,w[14]=o):o=w[14];let A=o,L=A.length,V=A.join(", "),z=P&&A.length?"unavailable":"";w[15]!==A.length||w[16]!==M||w[17]!==V||w[18]!==z?(r=M("confirm-delete-dialog.cdr-summary.subtitle",{count:L,datasets:V,context:z}),w[15]=A.length,w[16]=M,w[17]=V,w[18]=z,w[19]=r):r=w[19];let O=r;return w[20]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(ev.Text,{"aria-hidden":"true",size:1,children:(0,n.jsx)(a.WarningOutlineIcon,{})}),w[20]=s):s=w[20],w[21]!==I?(d={DocumentTitle:()=>I},w[21]=I,w[22]=d):d=w[22],w[23]!==_?(u={count:_},w[23]=_,w[24]=u):u=w[24],w[25]!==M||w[26]!==u||w[27]!==d?(c=(0,n.jsx)(ev.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,n.jsxs)(ev.Flex,{children:[s,(0,n.jsx)(ev.Box,{flex:1,marginLeft:3,children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:d,t:M,values:u})})})]})}),w[25]=M,w[26]=u,w[27]=d,w[28]=c):c=w[28],w[29]!==I?(p={DocumentTitle:()=>I},w[29]=I,w[30]=p):p=w[30],w[31]!==T||w[32]!==M||w[33]!==p?(m=(0,n.jsx)(ev.Box,{flex:"none",children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:M,context:T,components:p})})}),w[31]=T,w[32]=M,w[33]=p,w[34]=m):m=w[34],w[35]!==C||w[36]!==F?(g=C.totalCount>0&&(0,n.jsxs)(ev.Stack,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[C?.references.map(e=>(0,n.jsx)(ev.Box,{as:"li",children:F(e)},e._id)),C.totalCount>C.references.length&&(0,n.jsx)(ev.Box,{as:"li",padding:3,children:(0,n.jsx)(r1,{...C})})]}),w[35]=C,w[36]=F,w[37]=g):g=w[37],w[38]!==S||w[39]!==O||w[40]!==C.totalCount||w[41]!==A.length||w[42]!==M||w[43]!==k?(f=S.totalCount>0&&(0,n.jsxs)(rQ,{"data-testid":"cross-dataset-references",style:{borderTop:C.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,n.jsx)(rJ,{children:(0,n.jsx)(ev.Card,{as:"a",marginTop:2*(C.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,n.jsxs)(ev.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(a.DocumentsIcon,{})}),(0,n.jsxs)(ev.Stack,{space:2,children:[(0,n.jsx)(ev.Text,{textOverflow:"ellipsis",size:1,children:M("confirm-delete-dialog.cdr-summary.title",{count:A.length,documentCount:M("confirm-delete-dialog.cdr-summary.document-count",{count:S.totalCount})})}),(0,n.jsx)(ev.Text,{title:O,textOverflow:"ellipsis",size:1,muted:!0,children:O})]}),(0,n.jsx)(rX,{children:(0,n.jsx)(ev.Text,{muted:!0,size:1,children:(0,n.jsx)(a.ChevronDownIcon,{})})})]})})}),(0,n.jsxs)(ev.Box,{overflow:"auto",paddingTop:2,children:[(0,n.jsxs)(rZ,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(ev.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:M("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,n.jsx)("th",{children:(0,n.jsx)(ev.Text,{muted:!0,size:1,weight:"medium",children:M("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,n.jsx)("th",{children:(0,n.jsx)(ev.Text,{muted:!0,size:1,weight:"medium",children:M("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,n.jsx)("tbody",{children:S.references.filter(r6).map((e,t)=>{let{projectId:i,datasetName:l,documentId:o}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(ev.Text,{size:1,children:i})}),(0,n.jsx)("td",{children:(0,n.jsx)(ev.Text,{size:1,children:l||"unavailable"})}),(0,n.jsx)("td",{children:(0,n.jsxs)(r0,{align:"center",gap:2,justify:"flex-end",children:[(0,n.jsx)(ev.Text,{textOverflow:"ellipsis",size:1,children:o||"unavailable"}),o&&(0,n.jsx)(h.Button,{mode:"bleed",icon:a.CopyIcon,tooltipProps:{content:M("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(o).catch(()=>{k.push({status:"error",title:M("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${o}-${t}`)})})]}),(0,n.jsx)(r1,{...S})]})]}),w[38]=S,w[39]=O,w[40]=C.totalCount,w[41]=A.length,w[42]=M,w[43]=k,w[44]=f):f=w[44],w[45]!==g||w[46]!==f?(b=(0,n.jsx)(ev.Card,{radius:2,shadow:1,flex:"auto",padding:2,children:(0,n.jsxs)(ev.Flex,{direction:"column",children:[g,f]})}),w[45]=g,w[46]=f,w[47]=b):b=w[47],w[48]!==I?(y={DocumentTitle:()=>I},w[48]=I,w[49]=y):y=w[49],w[50]!==T||w[51]!==M||w[52]!==y?(v=(0,n.jsx)(ev.Box,{flex:"none",children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:M,context:T,components:y})})}),w[50]=T,w[51]=M,w[52]=y,w[53]=v):v=w[53],w[54]!==c||w[55]!==m||w[56]!==b||w[57]!==v?(j=(0,n.jsxs)(ev.Flex,{direction:"column",gap:4,children:[c,m,b,v]}),w[54]=c,w[55]=m,w[56]=b,w[57]=v,w[58]=j):j=w[58],j}function r6(e){return"projectId"in e}let r8=()=>(t||(t=(0,e3.fromEvent)(document,"visibilitychange").pipe((0,eV.startWith)(null),(0,eA.map)(()=>"visible"===document.visibilityState),(0,eB.distinctUntilChanged)(),(0,eH.switchMap)(e=>e?(0,e4.timer)(0,5e3):e5.EMPTY),(0,eN.shareReplay)({refCount:!0,bufferSize:1}))),t),r7=(0,l.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),r9=(0,l.createHookFromObservableFactory)(([e,t])=>r8().pipe((0,eH.switchMap)(()=>(function(e,t){let{versionedClient:n}=t;return r8().pipe((0,eH.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,o.getDraftId)(e),i=(0,o.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,eA.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,eH.switchMap)(e=>{if(!e)return(0,eQ.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,eL.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,eQ.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function se(e){return"string"!=typeof e.datasetName}function st(e){return!!e&&""!==e}function sn(e){return e?.datasetName||""}function si(e){return e.projectId}let sl=(0,eC.styled)(ev.Box)`
  box-sizing: border-box;
`,so=(0,eC.styled)(ev.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function sr(e){let t,r,s,a,d,u,c,p,m,g=(0,ey.c)(40),{id:f,type:b,action:y,onCancel:v,onConfirm:j}=e,w=void 0===y?"delete":y,{t:S}=(0,l.useTranslation)(x),C=`deletion-confirmation-${(0,i.useId)()}`,{internalReferences:I,crossDatasetReferences:_,isLoading:T,totalCount:R,projectIds:P,datasetNames:E,hasUnknownDatasetNames:D}=function(e){let t,n,i,r,s,a,d,u,c=(0,ey.c)(24),p=(0,l.useClient)(l.DEFAULT_STUDIO_CLIENT_OPTIONS),m=(0,l.useDocumentStore)();c[0]!==e?(t=(0,o.getPublishedId)(e),c[0]=e,c[1]=t):t=c[1];let h=t;c[2]!==m||c[3]!==h?(n=[h,m],c[2]=m,c[3]=h,c[4]=n):n=c[4];let[g,f]=r7(n);c[5]!==h||c[6]!==p?(i=[h,p],c[5]=h,c[6]=p,c[7]=i):i=c[7];let[x,b]=r9(i);c[8]!==x?.references?(r=()=>Array.from(new Set(x?.references.map(si).filter(Boolean))).sort(),c[8]=x?.references,c[9]=r):r=c[9],c[10]!==r?(s=r(),c[10]=r,c[11]=s):s=c[11];let y=s;c[12]!==x?.references?(a=Array.from(new Set(x?.references.map(sn).filter(st))).sort(),c[12]=x?.references,c[13]=a):a=c[13];let v=a;c[14]!==x?.references?(d=()=>!!x?.references.some(se),c[14]=x?.references,c[15]=d):d=c[15];let j=d(),w=(g?.totalCount||0)+(x?.totalCount||0),S=f||b;return c[16]!==x||c[17]!==v||c[18]!==j||c[19]!==g||c[20]!==y||c[21]!==w||c[22]!==S?(u={totalCount:w,projectIds:y,datasetNames:v,hasUnknownDatasetNames:j,internalReferences:g,crossDatasetReferences:x,isLoading:S},c[16]=x,c[17]=v,c[18]=j,c[19]=g,c[20]=y,c[21]=w,c[22]=S,c[23]=u):u=c[23],u}(f);g[0]!==f||g[1]!==b?(t={_id:f,_type:b},g[0]=f,g[1]=b,g[2]=t):t=g[2];let k=t;g[3]!==k?(r=(0,n.jsx)(rY,{document:k}),g[3]=k,g[4]=r):r=g[4];let M=r,F=!T;return g[5]!==w||g[6]!==S?(s=S("confirm-delete-dialog.header.text",{context:w}),g[5]=w,g[6]=S,g[7]=s):s=g[7],g[8]!==S?(a=S("confirm-delete-dialog.cancel-button.text"),g[8]=S,g[9]=a):a=g[9],g[10]!==v||g[11]!==a?(d={onClick:v,text:a},g[10]=v,g[11]=a,g[12]=d):d=g[12],g[13]!==w||g[14]!==j||g[15]!==F||g[16]!==S||g[17]!==R?(u=F?{text:S(R>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:w}),onClick:j}:void 0,g[13]=w,g[14]=j,g[15]=F,g[16]=S,g[17]=R,g[18]=u):u=g[18],g[19]!==d||g[20]!==u?(c={cancelButton:d,confirmButton:u},g[19]=d,g[20]=u,g[21]=c):c=g[21],g[22]!==w||g[23]!==_||g[24]!==E||g[25]!==M||g[26]!==D||g[27]!==I||g[28]!==T||g[29]!==v||g[30]!==P||g[31]!==S||g[32]!==R?(p=(0,n.jsx)(sl,{children:_&&I&&!T?(0,n.jsx)(r5,{crossDatasetReferences:_,internalReferences:I,documentTitle:M,isLoading:T,totalCount:R,action:w,projectIds:P,datasetNames:E,hasUnknownDatasetNames:D,onReferenceLinkClick:v}):(0,n.jsx)(so,{"data-testid":"loading-container",children:(0,n.jsx)(l.LoadingBlock,{showText:!0,title:S("confirm-delete-dialog.loading.text")})})}),g[22]=w,g[23]=_,g[24]=E,g[25]=M,g[26]=D,g[27]=I,g[28]=T,g[29]=v,g[30]=P,g[31]=S,g[32]=R,g[33]=p):p=g[33],g[34]!==C||g[35]!==v||g[36]!==p||g[37]!==s||g[38]!==c?(m=(0,n.jsx)(h.Dialog,{width:1,id:C,header:s,footer:c,onClose:v,onClickOutside:v,children:p}),g[34]=C,g[35]=v,g[36]=p,g[37]=s,g[38]=c,g[39]=m):m=g[39],m}function ss(e){let t,o,r=(0,ey.c)(6),{t:s}=(0,l.useTranslation)(x),a=(0,i.useId)(),[d,u]=(0,i.useState)(null);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(null),r[0]=t):t=r[0];let c=t;return r[1]!==d||r[2]!==a||r[3]!==e||r[4]!==s?(o=d?(0,n.jsx)(h.Dialog,{id:`dialog-error-${a}`,"data-testid":"confirm-delete-error-dialog",header:s("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:s("confirm-delete-dialog.error.retry-button.text"),onClick:c,tone:"default"}},onClose:e.onCancel,children:(0,n.jsx)(ev.Box,{padding:4,children:(0,n.jsx)(ev.Text,{size:1,children:s("confirm-delete-dialog.error.message.text")})})}):(0,n.jsx)(h.ErrorBoundary,{onCatch:u,children:(0,n.jsx)(sr,{...e})}),r[1]=d,r[2]=a,r[3]=e,r[4]=s,r[5]=o):o=r[5],o}let sa=(0,i.forwardRef)(function(e,t){let l,o,r,s,a=(0,ey.c)(10);a[0]!==e?({intent:l,...o}=e,a[0]=e,a[1]=l,a[2]=o):(l=a[1],o=a[2]),a[3]!==l?(r=(0,i.forwardRef)(function(e,t){return(0,n.jsx)(eP.IntentLink,{...e,intent:l.type,params:l.params,ref:t,searchParams:l.searchParams})}),a[3]=l,a[4]=r):r=a[4];let d=r;return a[5]!==d||a[6]!==e.disabled||a[7]!==t||a[8]!==o?(s=e.disabled?(0,n.jsx)(h.Button,{...o,as:"a",role:"link","aria-disabled":"true"}):(0,n.jsx)(h.Button,{...o,as:d,"data-as":"a",ref:t}),a[5]=d,a[6]=e.disabled,a[7]=t,a[8]=o,a[9]=s):s=a[9],s});function sd(e){let t,i,o,r=(0,ey.c)(12),{reveal:s,context:a,loading:d,children:u}=e,c=(0,l.useCurrentUser)(),{t:p}=(0,l.useTranslation)(x);if(!s){let e;return r[0]!==u?(e=(0,n.jsx)(n.Fragment,{children:u}),r[0]=u,r[1]=e):e=r[1],e}return r[2]!==a||r[3]!==c||r[4]!==d||r[5]!==p?(t=d?p("insufficient-permissions-message-tooltip.loading-text"):(0,n.jsx)(l.InsufficientPermissionsMessage,{context:a,currentUser:c}),r[2]=a,r[3]=c,r[4]=d,r[5]=p,r[6]=t):t=r[6],r[7]!==u?(i=(0,n.jsx)("div",{children:u}),r[7]=u,r[8]=i):i=r[8],r[9]!==t||r[10]!==i?(o=(0,n.jsx)(h.Tooltip,{content:t,portal:!0,children:i}),r[9]=t,r[10]=i,r[11]=o):o=r[11],o}let su={constrainSize:!0,placement:"bottom",portal:!0},sc=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function sp(e){let t,o,r,s,d,u,c,p,m=(0,ey.c)(60),{templateItems:g}=e,f=(0,l.useTemplates)(),{selectedReleaseId:b}=(0,l.usePerspective)(),{t:y}=(0,l.useTranslation)(x);m[0]!==g||m[1]!==f?(t=[...g,...f],m[0]=g,m[1]=f,m[2]=t):t=m[2];let v=(0,l.useGetI18nText)(t);m[3]!==g?(o={templateItems:g},m[3]=g,m[4]=o):o=m[4];let[j,w]=(0,l.useTemplatePermissions)(o),S=!w&&j?.length!==0&&j?.every(sh);e:{let e;if(!j){let e;m[5]===Symbol.for("react.memo_cache_sentinel")?(e={},m[5]=e):e=m[5],r=e;break e}m[6]!==j?(e=j.reduce(sm,{}),m[6]=j,m[7]=e):e=m[7],r=e}let C=r;if(0===g.length)return null;if(S){let e,t,i;return m[8]!==y?(e=y("pane-header.disabled-created-button.aria-label"),m[8]=y,m[9]=e):e=m[9],m[10]!==e?(t=(0,n.jsx)(h.Button,{"aria-label":e,icon:a.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),m[10]=e,m[11]=t):t=m[11],m[12]!==w||m[13]!==t?(i=(0,n.jsx)(sd,{context:"create-document-type",reveal:!0,loading:w,children:t}),m[12]=w,m[13]=t,m[14]=i):i=m[14],i}if(1===g.length){let e,t,i,l,o,r,s=g[0],d=!C[s.id]?.granted;m[15]!==s||m[16]!==b||m[17]!==f?(e=sc(f,s,b),m[15]=s,m[16]=b,m[17]=f,m[18]=e):e=m[18];let u=e;if(!u)return null;m[19]!==s||m[20]!==v?(t=v(s),m[19]=s,m[20]=v,m[21]=t):t=m[21];let c=t.title,p=s.icon||a.AddIcon;return m[22]!==y?(i=y("pane-header.create-new-button.tooltip"),m[22]=y,m[23]=i):i=m[23],m[24]!==i?(l={content:i},m[24]=i,m[25]=l):l=m[25],m[26]!==d||m[27]!==u||m[28]!==t.title||m[29]!==p||m[30]!==l?(o=(0,n.jsx)(sa,{"aria-label":c,icon:p,intent:u,mode:"bleed",disabled:d,"data-testid":"action-intent-button",tooltipProps:l}),m[26]=d,m[27]=u,m[28]=t.title,m[29]=p,m[30]=l,m[31]=o):o=m[31],m[32]!==d||m[33]!==w||m[34]!==o?(r=(0,n.jsx)(sd,{reveal:d,loading:w,context:"create-document-type",children:o}),m[32]=d,m[33]=w,m[34]=o,m[35]=r):r=m[35],r}if(m[36]!==y?(s=y("pane-header.create-new-button.tooltip"),m[36]=y,m[37]=s):s=m[37],m[38]!==s?(d=(0,n.jsx)(h.Button,{icon:a.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:s}}),m[38]=s,m[39]=d):d=m[39],m[40]!==v||m[41]!==w||m[42]!==C||m[43]!==b||m[44]!==y||m[45]!==g||m[46]!==f){let e;m[48]!==v||m[49]!==w||m[50]!==C||m[51]!==b||m[52]!==y||m[53]!==f?(e=(e,t)=>{let l=!C[e.id]?.granted,o=sc(f,e,b),r=f.find(t=>t.id===e.templateId);if(!r||!o)return null;let s=(0,i.forwardRef)((e,t)=>l?(0,n.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,n.jsx)(eP.IntentLink,{...e,intent:o.type,params:o.params,searchParams:o.searchParams,ref:t}));s.displayName="Link";let{title:a}=v({...e,title:e.title||v(r).title});return(0,n.jsx)(sd,{context:"create-document-type",reveal:l,loading:w,children:(0,n.jsx)(h.MenuItem,{as:s,"data-as":l?"button":"a",text:a,"aria-label":l?y("pane-header.disabled-created-button.aria-label"):a,disabled:l,"data-testid":`action-intent-button-${t}`})},e.id)},m[48]=v,m[49]=w,m[50]=C,m[51]=b,m[52]=y,m[53]=f,m[54]=e):e=m[54],u=g.map(e),m[40]=v,m[41]=w,m[42]=C,m[43]=b,m[44]=y,m[45]=g,m[46]=f,m[47]=u}else u=m[47];return m[55]!==u?(c=(0,n.jsx)(ev.Menu,{children:u}),m[55]=u,m[56]=c):c=m[56],m[57]!==d||m[58]!==c?(p=(0,n.jsx)(h.MenuButton,{button:d,id:"create-menu",menu:c,popover:su}),m[57]=d,m[58]=c,m[59]=p):p=m[59],p}function sm(e,t){return e[t.id]=t,e}function sh(e){return!e.granted}function sg(e){return null!=e}let sf=(0,i.memo)(function(e){let{initialValueTemplateItems:t=l.EMPTY_ARRAY,menuItems:o=l.EMPTY_ARRAY,menuItemGroups:r=l.EMPTY_ARRAY,actionHandlers:s=l.EMPTY_OBJECT}=e,a=(0,l.useTemplates)(),d=(0,i.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in s))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?s[e.action]:null;return!!t&&(t(e.params),!0)},[s]),u=(0,i.useMemo)(()=>lE({actionHandler:d,menuItemGroups:r,menuItems:o.filter(e=>e.intent?.type!=="create")}),[d,r,o]),c=(0,i.useMemo)(()=>u.filter(lR),[u]),p=(0,i.useMemo)(()=>u.filter(lP),[u]),m=(0,i.useMemo)(()=>o.map((e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,o=i.template||i.type;if(!o)return null;let r=a.find(e=>e.id===o);return r?{item:e,template:r,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null}).filter(sg).map(({initialDocumentId:e,item:t,template:n,menuItemIndex:i,templateParams:l})=>({id:`menuItem${i}`,initialDocumentId:e,templateId:n.id,type:"initialValueTemplateItem",title:t.title||n.title,i18n:t.i18n||n.i18n,icon:t.icon,description:n.description,parameters:l,schemaType:n.schemaType})),[o,a]),h=(0,i.useMemo)(()=>(0,tl.default)([...m,...t],e=>{var t;let n;return t=[e.initialDocumentId,e.templateId,e.parameters],JSON.stringify((n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e)(JSON.parse(JSON.stringify(t))))}),[m,t]);return(0,n.jsxs)(ev.Flex,{gap:1,children:[(0,n.jsx)(sp,{templateItems:h}),c.map(e=>(0,n.jsx)(n9,{node:e},e.key)),p.length>0&&(0,n.jsx)(nJ,{nodes:p})]})});function sx(e){let t,i,o,r,s,a,d,u=(0,ey.c)(16),{t:c}=(0,l.useTranslation)(x),{layout:p,value:m}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==m._type?(i={documentType:m._type},u[1]=m._type,u[2]=i):i=u[2],u[3]!==c||u[4]!==i?(o=(0,n.jsx)("em",{children:(0,n.jsx)(l.Translate,{t:c,i18nKey:"pane-item.missing-schema-type.title",components:t,values:i})}),u[3]=c,u[4]=i,u[5]=o):o=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(r={Code:"code"},u[6]=r):r=u[6],u[7]!==m._id?(s={documentId:m._id},u[7]=m._id,u[8]=s):s=u[8],u[9]!==c||u[10]!==s?(a=(0,n.jsx)(l.Translate,{t:c,i18nKey:"pane-item.missing-schema-type.subtitle",components:r,values:s}),u[9]=c,u[10]=s,u[11]=a):a=u[11],u[12]!==p||u[13]!==o||u[14]!==a?(d=(0,n.jsx)(l.SanityDefaultPreview,{title:o,subtitle:a,media:sb,layout:p}),u[12]=p,u[13]=o,u[14]=a,u[15]=d):d=u[15],d}function sb(){return(0,n.jsx)(a.WarningOutlineIcon,{})}function sy(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function sv(e){let t,o,r,s,d,u,c,p,m=(0,ey.c)(42),{icon:h,id:g,layout:f,pressed:x,schemaType:b,selected:y,title:v,value:j,margin:w,marginBottom:S,marginTop:C}=e,I=void 0===f?"default":f,_=(0,l.useSchema)(),T=(0,l.useDocumentPreviewStore)(),{ChildLink:R}=i7(),P=(0,l.useDocumentPresence)(g),E=!!(b&&b.name&&_.get(b.name)),[D,k]=(0,i.useState)(!1);e:{let e,i,o,r;if(j&&(0,ew.isSanityDocument)(j)){let e,i;if(!b||!E){let e;m[0]!==j?(e=(0,n.jsx)(sx,{value:j}),m[0]=j,m[1]=e):e=m[1],t=e;break e}m[2]!==h||m[3]!==b?(e=sy(h,b,a.DocumentIcon),m[2]=h,m[3]=b,m[4]=e):e=m[4],m[5]!==P||m[6]!==T||m[7]!==I||m[8]!==b||m[9]!==e||m[10]!==j?(i=(0,n.jsx)(r2,{documentPreviewStore:T,icon:e,layout:I,schemaType:b,value:j,presence:P}),m[5]=P,m[6]=T,m[7]=I,m[8]=b,m[9]=e,m[10]=j,m[11]=i):i=m[11],t=i;break e}m[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},m[12]=e):e=m[12],m[13]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(ev.Box,{style:e,children:(0,n.jsx)(ev.Text,{muted:!0,size:1,children:(0,n.jsx)(a.ChevronRightIcon,{})})}),m[13]=i):i=m[13],m[14]!==h||m[15]!==b?(o=sy(h,b,a.FolderIcon),m[14]=h,m[15]=b,m[16]=o):o=m[16],m[17]!==o||m[18]!==v?(r=(0,n.jsx)(l.SanityDefaultPreview,{status:i,icon:o,layout:"compact",title:v}),m[17]=o,m[18]=v,m[19]=r):r=m[19],t=r}let M=t;m[20]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{e.metaKey?k(!1):k(!0)},m[20]=o):o=m[20];let F=o;m[21]===Symbol.for("react.memo_cache_sentinel")?(r=()=>k(!1),m[21]=r):r=m[21],m[22]!==y?(s=[y],m[22]=y,m[23]=s):s=m[23],(0,i.useEffect)(r,s);let[A,L]=(0,i.useState)(!1),V=(0,i.useRef)(null);m[24]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{V.current=setTimeout(()=>(0,i.startTransition)(()=>L(!0)),400)},m[24]=d):d=m[24];let z=d;m[25]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{V.current&&clearTimeout(V.current),(0,i.startTransition)(()=>L(!1))},m[25]=u):u=m[25];let O=u,B=`pane-item-${v}`,H=y||D;return m[26]!==g||m[27]!==A||m[28]!==b||m[29]!==j?(c=A&&b?.name&&j&&(0,ew.isSanityDocument)(j)&&(0,n.jsx)(sj,{documentId:g,documentType:b.name}),m[26]=g,m[27]=A,m[28]=b,m[29]=j,m[30]=c):c=m[30],m[31]!==g||m[32]!==w||m[33]!==S||m[34]!==C||m[35]!==x||m[36]!==M||m[37]!==c||m[38]!==B||m[39]!==R||m[40]!==H?(p=(0,n.jsxs)(l.PreviewCard,{"data-testid":B,__unstable_focusRing:!0,as:R,childId:g,"data-as":"a",margin:w,marginBottom:S,marginTop:C,onClick:F,onMouseEnter:z,onMouseLeave:O,pressed:x,radius:2,selected:H,sizing:"border",tabIndex:-1,tone:"inherit",children:[M,c]}),m[31]=g,m[32]=w,m[33]=S,m[34]=C,m[35]=x,m[36]=M,m[37]=c,m[38]=B,m[39]=R,m[40]=H,m[41]=p):p=m[41],p}function sj(e){let t,n=(0,ey.c)(2),{documentId:i,documentType:r}=e;return n[0]!==i?(t=(0,o.getPublishedId)(i),n[0]=i,n[1]=t):t=n[1],(0,l.useEditState)(t,r),null}sj.displayName="PreloadDocumentPane";let sw=(0,i.memo)(e=>{let t,i,r=(0,ey.c)(10),{actions:s,children:a,actionProps:d,onActionComplete:u,group:c}=e;return r[0]!==d.id||r[1]!==d.liveEditSchemaType||r[2]!==a?(t=e=>{let{states:t}=e;return(0,n.jsx)(sC,{states:t,documentId:d.liveEditSchemaType?(0,o.getPublishedId)(d.id):(0,o.getDraftId)(d.id),children:a})},r[0]=d.id,r[1]=d.liveEditSchemaType,r[2]=a,r[3]=t):t=r[3],r[4]!==d||r[5]!==s||r[6]!==c||r[7]!==u||r[8]!==t?(i=(0,n.jsx)(l.GetHookCollectionState,{onReset:u,hooks:s,args:d,group:c,children:t}),r[4]=d,r[5]=s,r[6]=c,r[7]=u,r[8]=t,r[9]=i):i=r[9],i});sw.displayName="Memo(RenderActionCollectionState)";let sS=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule"],sC=e=>{let t,n=(0,ey.c)(9),{states:i,children:o,documentId:r}=e,{t:s}=(0,l.useTranslation)(x),{isLinked:a}=(0,l.useCanvasCompanionDoc)(r);e:{let e;if(a){let e;if(n[0]!==o||n[1]!==i||n[2]!==s){let t;n[4]!==s?(t=e=>e.action&&sS.includes(e.action)?e:{...e,disabled:!0,title:s("action.disabled-by-canvas.tooltip")},n[4]=s,n[5]=t):t=n[5],e=o({states:i.map(t)}),n[0]=o,n[1]=i,n[2]=s,n[3]=e}else e=n[3];t=e;break e}n[6]!==o||n[7]!==i?(e=o({states:i}),n[6]=o,n[7]=i,n[8]=e):e=n[8],t=e}return t},sI=(0,i.memo)(e=>{let t,i=(0,ey.c)(4),{badges:o,children:r,badgeProps:s}=e;return i[0]!==s||i[1]!==o||i[2]!==r?(t=(0,n.jsx)(l.GetHookCollectionState,{hooks:o,args:s,children:r}),i[0]=s,i[1]=o,i[2]=r,i[3]=t):t=i[3],t});sI.displayName="Memo(RenderBadgeCollectionState)";let s_={by:[{field:"_updatedAt",direction:"desc"}]},sT={},sR=(0,eC.styled)(ev.Box)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,sP=(0,eC.styled)(ev.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,sE=[...Array(30).keys()];function sD(e){let t,i,o=(0,ey.c)(4),{layout:r}=e;return o[0]!==r?(t=sE.map(e=>(0,n.jsx)(l.SanityDefaultPreview,{isPlaceholder:!0,layout:r},e)),o[0]=r,o[1]=t):t=o[1],o[2]!==t?(i=(0,n.jsx)(ev.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),o[2]=t,o[3]=i):i=o[3],i}function sk(e){let t,r,s,a,d,u,c,p=(0,ey.c)(66),{childItemId:m,error:h,isRetrying:g,autoRetry:f,filterIsSimpleTypeConstraint:b,hasMaxItems:y,hasSearchQuery:v,isActive:j,isLazyLoading:w,muted:S,isLoading:C,isConnected:I,retryCount:_,canRetry:T,items:R,layout:P,loadingVariant:E,onEndReached:D,onRetry:k,paneTitle:M,searchInputElement:F,showIcons:A}=e,L=(0,l.useSchema)(),{collapsed:V}=nL(),{collapsed:z,index:O}=nN(),[B,H]=(0,i.useState)(!z),{t:N}=(0,l.useTranslation)(x);p[0]!==D||p[1]!==B?(t=()=>{B&&D()},p[0]=D,p[1]=B,p[2]=t):t=p[2];let $=t;p[3]!==z?(r=()=>{if(z)return;let e=setTimeout(()=>{H(!0)},0);return()=>{clearTimeout(e)}},p[3]=z,p[4]=r):r=p[4],p[5]!==z||p[6]!==R?(s=[z,R],p[5]=z,p[6]=R,p[7]=s):s=p[7],(0,i.useEffect)(r,s),p[8]!==m||p[9]!==y||p[10]!==j||p[11]!==w||p[12]!==R.length||p[13]!==P||p[14]!==L||p[15]!==A||p[16]!==N?(a=(e,t)=>{let{activeIndex:i}=t,r=(0,o.getPublishedId)(e._id),s=m===r,a=!j&&s,d=j&&s,u=i===R.length-1,c=u&&w,p=u&&y;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(sv,{icon:!1!==A&&void 0,id:r,layout:P,marginBottom:1,pressed:a,schemaType:L.get(e._type),selected:d,value:e}),c&&(0,n.jsx)(l.LoadingBlock,{}),p&&(0,n.jsx)(ev.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,n.jsx)(ev.Text,{align:"center",muted:!0,size:1,children:N("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},p[8]=m,p[9]=y,p[10]=j,p[11]=w,p[12]=R.length,p[13]=P,p[14]=L,p[15]=A,p[16]=N,p[17]=a):a=p[17];let U=a;e:{let e,t;if(v){let e,t;p[18]!==N?(e=N("panes.document-list-pane.no-documents.text"),p[18]=N,p[19]=e):e=p[19],p[20]!==e?(t=(0,n.jsx)(ev.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(ev.Container,{width:1,children:(0,n.jsx)(ev.Box,{paddingX:4,paddingY:5,children:(0,n.jsx)(ev.Text,{align:"center",muted:!0,children:e})})})}),p[20]=e,p[21]=t):t=p[21],d=t;break e}p[22]!==b||p[23]!==N?(e=N(b?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),p[22]=b,p[23]=N,p[24]=e):e=p[24],p[25]!==e?(t=(0,n.jsx)(ev.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(ev.Container,{width:1,children:(0,n.jsx)(ev.Box,{paddingX:4,paddingY:5,children:(0,n.jsx)(ev.Text,{align:"center",muted:!0,children:e})})})}),p[25]=e,p[26]=t):t=p[26],d=t}let G=d;t:{let e,t;if(!B){u=null;break t}let i=window.navigator.onLine;if(h){let e,t,o,r,s,a,d;p[27]!==N?(e=N("panes.document-list-pane.error.title"),p[27]=N,p[28]=e):e=p[28],p[29]!==e?(t=(0,n.jsx)(ev.Heading,{as:"h3",children:e}),p[29]=e,p[30]=t):t=p[30],p[31]!==h||p[32]!==N?(o=l.isDev?(0,n.jsx)(l.Translate,{t:N,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:h.message},components:{Code:sM}}):N(i?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),p[31]=h,p[32]=N,p[33]=o):o=p[33],p[34]!==o?(r=(0,n.jsx)(ev.Text,{as:"p",children:o}),p[34]=o,p[35]=r):r=p[35];let c=i&&T?k:void 0;p[36]!==h||p[37]!==g||p[38]!==c?(s=(0,n.jsx)(l.ErrorActions,{error:h,eventId:null,onRetry:c,isRetrying:g}),p[36]=h,p[37]=g,p[38]=c,p[39]=s):s=p[39],p[40]!==f||p[41]!==T||p[42]!==g||p[43]!==_||p[44]!==N?(a=T?(0,n.jsx)(ev.Text,{as:"p",muted:!0,size:1,children:g?N("panes.document-list-pane.error.retrying",{count:_}):f?N("panes.document-list-pane.error.will-retry-automatically",{count:_}):N("panes.document-list-pane.error.max-retries-attempted",{count:_})}):null,p[40]=f,p[41]=T,p[42]=g,p[43]=_,p[44]=N,p[45]=a):a=p[45],p[46]!==s||p[47]!==a||p[48]!==t||p[49]!==r?(d=(0,n.jsx)(ev.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(ev.Container,{width:1,children:(0,n.jsxs)(ev.Stack,{paddingX:4,paddingY:5,space:4,children:[t,r,s,a]})})}),p[46]=s,p[47]=a,p[48]=t,p[49]=r,p[50]=d):d=p[50],u=d;break t}if(I&&!C&&0===R.length){u=G;break t}if("initial"===E&&C){let e;p[51]!==P?(e=(0,n.jsx)(id,{ms:300,children:(0,n.jsx)(sD,{layout:P})}),p[51]=P,p[52]=e):e=p[52],u=e;break t}if("spinner"===E&&C){u=null;break t}let o=`${O}-${z}`,r=S?.8:1;p[53]!==$||p[54]!==R||p[55]!==o||p[56]!==M||p[57]!==U||p[58]!==F?(e=(0,n.jsx)(sP,{children:(0,n.jsx)(l.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:M,canReceiveFocus:!0,inputElement:F,itemHeight:51,items:R,onEndReached:$,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:U,wrapAround:!1},o)}),p[53]=$,p[54]=R,p[55]=o,p[56]=M,p[57]=U,p[58]=F,p[59]=e):e=p[59],p[60]!==r||p[61]!==e?(t=(0,n.jsx)(sR,{overflow:"hidden",height:"fill",$opacity:r,children:e}),p[60]=r,p[61]=e,p[62]=t):t=p[62],u=t}let W=u,q=V||"initial"===E?"hidden":"auto";return p[63]!==W||p[64]!==q?(c=(0,n.jsx)(n$,{"data-testid":"document-list-pane",overflow:q,children:W}),p[63]=W,p[64]=q,p[65]=c):c=p[65],c}function sM(e){let{children:t}=e;return(0,n.jsx)("code",{children:t})}function sF(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,tR.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let sA=(0,l.createSWR)({maxSize:100});function sL(e){let{client:t,schema:n,sort:i,perspective:o,limit:r,params:s,filter:a,searchQuery:d,staticTypeNames:u,maxFieldDepth:c,searchStrategy:p}=e,m=i.by,h=i?.extendedProjection,g=(0,e6.defer)(()=>t.listen(`*[${a}]`,s,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,eq.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,e8.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,e8.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,eQ.of)(e)}),(0,eK.share)()),[f,x]=(0,e7.partition)(g,e=>"welcome"===e.type),b=JSON.stringify({fiilter:a,limit:r,params:s,searchQuery:d,perspective:o,sort:i,staticTypeNames:u});return(0,eJ.merge)(f,x.pipe((0,e9.throttleTime)(1e3,te.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,tD.exhaustMapWithTrailing)(e=>(u?(0,eQ.of)(u):t.observable.fetch(`array::unique(*[${a}][]._type)`,s)).pipe((0,eq.mergeMap)(g=>{let f=(0,l.getSearchableTypes)(n,u||[]).filter(e=>!!g.includes(e.name)&&(v(e,i.by,!0),!0)),x=(0,l.createSearch)(f,t,{filter:a,params:s,strategy:p,maxDepth:c}),b=()=>x({query:d||"",types:f},{__unstable_extendedProjection:h,comments:[`findability-source: ${d?"list-query":"list"}`],limit:r,skipSortByScore:!0,sort:m,perspective:o}).pipe((0,eA.map)(e=>e.hits.map(({hit:e})=>e)),(0,eA.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,e4.timer)(1200).pipe((0,eq.mergeMap)(b)):"reconnect"===e.type?(0,eQ.of)(e):b()}))),(0,e$.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,eG.filter)(e=>null!==e),sA(b),(0,eA.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let sV={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},sz="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",sO=eC.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sB=eC.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,sH=(0,eC.styled)(a.SpinnerIcon)`
  animation: ${sO} 500ms linear infinite;
`,sN=(0,eC.styled)(a.SpinnerIcon)`
  animation: ${sO} 1500ms linear infinite;
  opacity: 0.4;
`,s$=(0,eC.styled)(a.SpinnerIcon)`
  animation:
    ${sO} 1500ms linear infinite,
    ${sB} 1000ms linear;
  opacity: 0.4;
`,sU=(0,i.memo)(function(e){var t;let o,{childItemId:r,isActive:s,pane:d,paneKey:u,sortOrder:c,layout:p}=e,m=(0,l.useSchema)(),h=(0,l.useActiveReleases)(),{perspectiveStack:g}=(0,l.usePerspective)(),{displayOptions:f,options:b}=d,{apiVersion:y,filter:v}=b,j=aa(b.params||sT),w=(0,i.useMemo)(()=>{let e=sF(v,j);return e?.length===1?e[0]:null},[v,j]),S=f?.showIcons!==!1,{t:C}=(0,l.useTranslation)(x),{title:I}=(0,l.useI18nText)(d),[_,T]=(0,i.useState)(""),[R,P]=(0,i.useState)(""),[E,D]=(0,i.useState)(null),k=w&&c?(t=m.get(w),(o=c.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=ti.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,ew.isKeySegment)(e)||(0,ew.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,ew.isReferenceSchemaType)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===c.by[t])?c:{...c,by:o}):c,M=(0,l.useUnique)(k),{error:F,isLoadingFullList:A,isLoading:L,items:V,fromCache:z,isRetrying:O,autoRetry:B,canRetry:H,retryCount:N,connected:$,onLoadFullList:U,onRetry:G}=function(e){let{filter:t,params:n,sortOrder:o,searchQuery:r,perspective:s,apiVersion:a}=e,d=(0,l.useClient)({...l.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:a||l.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion}),{strategy:u}=(0,l.useWorkspace)().search,c=(0,l.useSchema)(),p=(0,l.useSearchMaxFieldDepth)(),m=(0,i.useMemo)(()=>sF(t,n),[t,n]),[[h,g]]=(0,i.useState)(()=>(0,tE.observableCallback)()),[[f,x]]=(0,i.useState)(()=>(0,tE.observableCallback)()),b=(0,i.useMemo)(()=>{let e={client:d,filter:t,limit:100,params:n,schema:c,perspective:s,searchQuery:r||"",sort:o||s_,staticTypeNames:m,maxFieldDepth:p,searchStrategy:u},i=sL(e).pipe((0,eN.shareReplay)({refCount:!0,bufferSize:1})),a=f.pipe((0,eU.withLatestFrom)(i),(0,eG.filter)(([,e])=>e?.documents.length===100),(0,eW.take)(1),(0,eq.mergeMap)(()=>(0,eZ.concat)((0,eQ.of)({type:"loadFullList"}),sL({...e,limit:2e3}).pipe((0,eA.map)(e=>({type:"result",result:e}))))),(0,eK.share)());return(0,eJ.merge)(i.pipe((0,eA.map)(e=>({type:"result",result:e})),(0,eY.takeUntil)(a)),a).pipe((0,l.catchWithCount)((e,t,n)=>{var i,l;let o=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${sz}`):Error(`${String(l)} ${sz}`),r=window.navigator.onLine,s=r&&!((i=e)instanceof tP.ChannelError)&&(i instanceof tP.ServerError||!(i instanceof tP.ClientError)||403===i.statusCode),a=t<10,d=(0,eJ.merge)(r?h:(0,e3.fromEvent)(window,"online"),r&&a?(0,e4.timer)(1e3*t):tt.NEVER).pipe((0,eW.take)(1),(0,eH.switchMap)(()=>(0,eJ.merge)((0,eQ.of)({type:"error",error:o,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,eZ.concat)((0,eQ.of)({type:"error",error:o,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)}),(0,e$.scan)((e,t)=>{if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,l.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)},sV))},[d,t,n,c,s,r,o,m,p,u,f,h]),{error:y,items:v,isLoading:j,fromCache:w,connected:S,canRetry:C,isLoadingFullList:I,isRetrying:_,autoRetry:T,retryCount:R}=(0,eR.useObservable)(b,sV);return{error:y,onRetry:g,isLoading:j,items:v,isRetrying:_,canRetry:C,retryCount:R,autoRetry:T,connected:S,fromCache:w,onLoadFullList:x,isLoadingFullList:I}}({apiVersion:y,filter:v,perspective:g,params:j,searchQuery:_?.trim(),sortOrder:M}),W=L||h.loading,q=(0,eR.useObservableEvent)(e=>e.pipe((0,eA.map)(e=>e.target.value),(0,eO.tap)(P),(0,tn.debounce)(e=>""===e?(0,eQ.of)(""):(0,e4.timer)(300)),(0,eO.tap)(T))),K=(0,i.useCallback)(()=>{T(""),P("")},[]),Y=(0,i.useCallback)(e=>{"Escape"===e.key&&K()},[K]),[X,Q]=(0,i.useState)();(0,i.useEffect)(()=>{X||W||Q(u)},[X,W,u]),(0,i.useEffect)(()=>{K(),Q()},[u,K]);let J=(0,i.useMemo)(()=>$&&W&&X===u?"spinner":$&&z?"subtle":"initial",[$,X,z,W,u]),Z=(0,i.useMemo)(()=>"spinner"===J?sH:R&&"subtle"===J?sN:a.SearchIcon,[J,R]);return(0,l.useReconnectingToast)(!$),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev.Box,{paddingX:3,paddingBottom:3,children:(0,n.jsx)(ev.TextInput,{"aria-label":C("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!_,fontSize:[2,2,1],icon:Z,iconRight:$&&("subtle"!==J||R)?null:s$,onChange:q,onClear:K,onKeyDown:Y,padding:2,placeholder:C("panes.document-list-pane.search-input.placeholder"),radius:2,ref:D,spellCheck:!1,value:R})}),(0,n.jsx)(sk,{childItemId:r,error:F,filterIsSimpleTypeConstraint:!!w,hasMaxItems:2e3===V.length,hasSearchQuery:!!_,isActive:s,isLazyLoading:A,isLoading:W,autoRetry:B,canRetry:H,retryCount:N,isRetrying:O,isConnected:$,items:V,layout:p,muted:"subtle"===J,loadingVariant:J,onEndReached:U,onRetry:G,paneTitle:I,searchInputElement:E,showIcons:S},u)]})}),sG=(0,i.memo)(e=>{let t,i,l,o,r,s,d,u,c,p=(0,ey.c)(27),{contentAfter:m,index:g,initialValueTemplates:f,menuItemGroups:x,menuItems:b,setLayout:y,setSortOrder:v,title:j}=e;p[0]!==f?(t=void 0===f?[]:f,p[0]=f,p[1]=t):t=p[1];let w=t;p[2]!==x?(i=void 0===x?[]:x,p[2]=x,p[3]=i):i=p[3];let S=i;p[4]!==b?(l=void 0===b?[]:b,p[4]=b,p[5]=l):l=p[5];let C=l,{features:I}=ix(),{collapsed:_,isLast:T}=nN(),R=T&&!_?-1:0;p[6]!==y?(o=e=>{let{layout:t}=e;y(t)},p[6]=y,p[7]=o):o=p[7],p[8]!==v?(r=e=>{v(e)},p[8]=v,p[9]=r):r=p[9],p[10]!==o||p[11]!==r?(s={setLayout:o,setSortOrder:r},p[10]=o,p[11]=r,p[12]=s):s=p[12];let P=s;return p[13]!==P||p[14]!==w||p[15]!==S||p[16]!==C?(d=(0,n.jsx)(sf,{initialValueTemplateItems:w,actionHandlers:P,menuItemGroups:S,menuItems:C}),p[13]=P,p[14]=w,p[15]=S,p[16]=C,p[17]=d):d=p[17],p[18]!==I.backButton||p[19]!==g?(u=I.backButton&&g>0&&(0,n.jsx)(h.Button,{as:rO,"data-as":"a",icon:a.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),p[18]=I.backButton,p[19]=g,p[20]=u):u=p[20],p[21]!==m||p[22]!==d||p[23]!==u||p[24]!==R||p[25]!==j?(c=(0,n.jsx)(h.TooltipDelayGroupProvider,{children:(0,n.jsx)(n8,{actions:d,backButton:u,contentAfter:m,tabIndex:R,title:j})}),p[21]=m,p[22]=d,p[23]=u,p[24]=R,p[25]=j,p[26]=c):c=p[26],c});function sW(e){let{row:t,table:l}=e,{selectedAnchor:o,setSelectedAnchor:r}=l.options.meta||{},s=(0,i.useCallback)(e=>{if(e.shiftKey&&null!=o){let e=t.index,n=e<o?e:o,i=e<o?o:e,r=l.getRowModel().flatRows.slice(n,i+1).map(({id:e})=>e),s=l.getSelectedRowModel().rows.map(({id:e})=>e);l.setRowSelection(()=>[...r,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[o,t,r,l]);return(0,n.jsx)(ev.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:s})}function sq({children:e,table:t}){let[l,o]=(0,i.useState)(null),[s,a]=(0,i.useState)([]),d=(0,i.useCallback)((e=null)=>{l?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),o(e),a([])},[l]),u=(0,i.useCallback)(()=>d(),[d]),c=(0,i.useCallback)(e=>{if(!l)return;let n=t.getVisibleLeafColumns(),i=n.findIndex(e=>e.id===l.colId)+("left"===e?-1:1);i<0||i>=n.length||d({colId:n[i].id,rowIndex:l.rowIndex,state:"selected"})},[d,l,t]),p=(0,i.useCallback)(e=>{l&&a(t=>{let{rowIndex:n}=l,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let o=i(t[t.length-1]);return o<0?t:o===n?[]:t.includes(o)?t.slice(0,-1):[...t,o]})},[l]),m=(0,i.useCallback)((e,t)=>{d({colId:e,rowIndex:t,state:"selected"})},[d]),h=(0,i.useCallback)(()=>{l&&(s.length?a([]):d("selected"===l.state?null:{...l,state:"selected"}))},[d,l,s.length]),g=(0,i.useCallback)((e,t)=>{if(!l)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)p(n);else{let e=l.rowIndex+i;if(e<0)return;m(l.colId,e)}},[p,l,m]),f=(0,i.useCallback)(e=>{if(!l)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":h();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),g(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===l.state&&(e.preventDefault(),c("ArrowLeft"===t?"left":"right"))}},[l,h,g,c]),x=(0,i.useCallback)(e=>{l&&(document.getElementById(`cell-${l.colId}-${l.rowIndex}`)?.contains(e.target)||u())},[u,l]);(0,i.useEffect)(()=>(l&&(document.addEventListener("keydown",f),document.addEventListener("click",x)),()=>{l&&(document.removeEventListener("keydown",f),document.removeEventListener("click",x))}),[x,f,l]);let b=(0,i.useCallback)(()=>o(e=>e?{...e,state:"focused"}:null),[]),y=(0,i.useCallback)((e,t)=>l?.colId!==e?null:l.rowIndex===t?"focused"===l.state?"focused":"selectedAnchor":s.includes(t)?"selectedRange":null,[l,s]),v=(0,i.useCallback)(()=>{l&&d({colId:l.colId,rowIndex:l.rowIndex+1,state:"selected"})},[d,l]),j=(0,i.useMemo)(()=>({focusAnchorCell:b,resetFocusSelection:u,setSelectedAnchorCell:m,getStateByCellId:y,submitFocusedCell:v}),[b,u,m,y,v]);return(0,n.jsx)(r.DocumentSheetListContext.Provider,{value:j,children:e})}sG.displayName="Memo(PaneHeader)";let sK=eC.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,sY=(0,eC.styled)(sK)`
  position: sticky;
  z-index: 2;
`;function sX(e){let{getValue:t,column:l,row:o,fieldType:s}=e,a=`cell-${l.id}-${o.index}`,[d,u]=(0,i.useState)(t()),[c,p]=(0,i.useState)(!1),m=(0,i.useRef)(null),{focusAnchorCell:h,resetFocusSelection:g,setSelectedAnchorCell:f,getStateByCellId:x,submitFocusedCell:b}=(()=>{let e=(0,i.useContext)(r.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),y=x(l.id,o.index),v=(0,i.useCallback)(()=>{f(l.id,o.index),h()},[l.id,h,o.index,f]),{patchDocument:j}=e.table.options.meta||{},w=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},S=(0,i.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===y&&w(),"focused"===y&&b())},[y,b]),C=(0,i.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(u(t),j?.(o.id,l.id,t))},[l.id,j,o.id]),I=(0,i.useCallback)(()=>{navigator.clipboard.writeText(d.toString())},[d]);(0,i.useEffect)(()=>(("selectedAnchor"===y||"focused"===y)&&document.addEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.addEventListener("paste",C),"selectedAnchor"===y&&document.addEventListener("copy",I),()=>{("selectedAnchor"===y||"focused"===y)&&document.removeEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.removeEventListener("paste",C),"selectedAnchor"===y&&document.removeEventListener("copy",I)}),[a,y,l.id,x,I,S,C,o.index]);let _=()=>"focused"===y?"2px solid blue":"selectedRange"===y?"1px solid green":"selectedAnchor"===y?"1px solid blue":"1px solid transparent",T={onFocus:v,onBlur:()=>{c&&(j?.(o.id,l.id,d),p(!1)),g()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),f(l.id,o.index))},"aria-selected":!!y,"data-testid":a,id:a,ref:e=>{m.current=e}};return"boolean"===s.name?(0,n.jsxs)(ev.Select,{...T,onChange:()=>null,radius:0,style:{boxShadow:"none",border:_(),padding:0},value:JSON.stringify(d),children:[(0,n.jsx)("option",{value:"True",children:"True"}),(0,n.jsx)("option",{value:"False",children:"False"})]}):(0,n.jsx)(ev.TextInput,{...T,size:0,radius:0,border:!1,style:{border:_(),padding:"22px 16px"},value:"string"==typeof d||"number"==typeof d?d:JSON.stringify(d),onChange:e=>{p(!0),u(e.target.value)}})}function sQ(e){let t=e.column.getIsPinned(),i=t&&e.column.getIsLastColumn("left")?2:1;return(0,n.jsx)(t?sY:sK,{style:{left:e.column.getStart("left")??void 0,borderRight:`${i}px solid var(--card-border-color)`},width:e.column.getSize(),children:na(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let sJ=e=>{let{documentPreviewStore:t,row:o,schemaType:r}=e,s=(0,i.useMemo)(()=>(0,l.getPreviewStateObservable)(t,r,o.original._id),[t,o.original._id,r]),a=(0,l.useDocumentVersionInfo)(o.original._id),{snapshot:d,isLoading:u}=(0,eR.useObservable)(s,{snapshot:null,isLoading:!0});if(u)return(0,n.jsx)(ev.Text,{size:1,muted:!0,children:"Loading..."});let c=d?.title??"Untitled";return(0,n.jsxs)(ev.Flex,{align:"center",gap:3,children:[(0,n.jsx)(l.DocumentStatusIndicator,{draft:a.draft,published:a.published,versions:void 0}),(0,n.jsx)(ev.Text,{size:1,children:c})]})},sZ=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},s0=["string","number","boolean"],s1=(e,t)=>e.fields.reduce((e,i)=>{let{type:l,name:o}=i;return s0.includes(l.name)?[...e,sZ(t?`${t}.${i.name}`:i.name,{id:t?`${t}_${i.name}`:i.name,header:i.type.title,enableHiding:!0,cell:e=>(0,n.jsx)(sX,{...e,fieldType:l})})]:"object"===l.name&&(0,ew.isObjectSchemaType)(l)&&!t?[...e,{header:o,columns:s1(l,i.name)}]:e},[]),s2=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?s2(e.columns):[]);function s3({table:e}){let{t}=(0,l.useTranslation)(),o=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,r=(0,i.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,n.jsx)(h.MenuButton,{button:(0,n.jsx)(h.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,n.jsx)(ev.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,n.jsxs)(ev.Flex,{direction:"column",height:"fill",gap:3,children:[(0,n.jsx)(ev.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,n.jsx)(ev.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,n.jsx)(ev.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let i,l;return(0,n.jsxs)(ev.Flex,{marginY:2,align:"center",children:[(0,n.jsx)(ev.Checkbox,{readOnly:(i=t.getIsVisible(),l=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,o&&!i||l&&i),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${t.id}`,style:{display:"block"}}),(0,n.jsx)(ev.Box,{flex:1,paddingLeft:3,children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)("label",{htmlFor:`col-visibility-${t.id}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,n.jsx)(h.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:r})]})}),placement:"bottom",popover:{portal:!0}})}let s4=(0,eC.styled)(ev.Flex)`
  flex-shrink: 0;
`;function s5(){let e,t,i,o=(0,ey.c)(5),{state:r}=(0,l.useSearchState)(),{filtersVisible:s}=r;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.SearchHeader,{}),o[0]=e):e=o[0],o[1]!==s?(t=s&&(0,n.jsx)(l.Filters,{showTypeFilter:!1}),o[1]=s,o[2]=t):t=o[2],o[3]!==t?(i=(0,n.jsxs)(s4,{children:[e,t]}),o[3]=t,o[4]=i):i=o[4],i}let s6=eC.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,s8=(0,eC.styled)(s6)`
  position: sticky;
  z-index: 2;
`,s7=eC.styled.div`
  visibility: hidden;

  ${s6}:hover & {
    visibility: visible;
  }
`;function s9(e){let{header:t,headerGroup:i}=e,{t:o}=(0,l.useTranslation)(),r=t.column.getIsPinned(),s=i.depth>0&&!t.column.parent?null:(0,n.jsx)(ev.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:na(t.column.columnDef.header,t.getContext())}),d=t.column.getCanHide()&&(0===i.depth?!t.column.columns.length:t.column.parent),u=r&&t.column.getIsLastColumn("left")?2:1;return(0,n.jsx)(r?s8:s6,{style:{left:t.column.getStart("left")??void 0,borderRight:`${u}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,n.jsxs)(ev.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,n.jsx)(h.Tooltip,{delay:500,content:s,children:(0,n.jsx)(ev.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:s})}),d&&(0,n.jsx)(s7,{children:(0,n.jsx)(h.MenuButton,{button:(0,n.jsx)(h.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:a.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,n.jsx)(ev.Menu,{children:(0,n.jsx)(h.MenuItem,{text:o("sheet-list.hide-field"),icon:a.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function ae({table:e}){return(0,n.jsx)(h.TooltipDelayGroupProvider,{children:(0,n.jsxs)(ev.Flex,{gap:3,align:"center",children:[(0,n.jsx)(h.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:a.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,n.jsx)(h.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:a.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,n.jsxs)(ev.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,n.jsx)(h.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:a.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,n.jsx)(h.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:a.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,n.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})})}function at(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let an={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},ai=(0,eC.styled)(ev.Flex)`
  height: 100%;
`,al=eC.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,ao=eC.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function ar({documentSchemaType:e}){let{dispatch:t,state:r}=(0,l.useSearchState)(),{columns:s,initialColumnsVisibility:a}=function(e){let t=(0,l.useDocumentPreviewStore)(),o=(0,i.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,n.jsxs)(ev.Box,{children:[(0,n.jsx)(ev.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:sW},sZ("Preview",{enableHiding:!1,id:"Preview",cell:i=>(0,n.jsx)(sJ,{...i,documentPreviewStore:t,schemaType:e})}),...s1(e)]:[],[t,e]),[r]=(0,i.useMemo)(()=>s2(o).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[o]);return{columns:o,initialColumnsVisibility:r}}(e),{data:d}=function(e){let t,n,r,s,a=(0,ey.c)(12),{typeName:d}=e,{state:u}=(0,l.useSearchState)();a[0]!==u.result.hits?(t=new Map,u.result.hits.forEach(e=>t.set((0,o.getPublishedId)(e.hit._id),e.hit)),a[0]=u.result.hits,a[1]=t):t=a[1];let c=t,p=`_type == "${d}"`;a[2]!==p?(n={filter:p},a[2]=p,a[3]=n):n=a[3];let{data:m,isLoading:h}=function(e){let t,n,r,s,a,d,u,c,p,m,h=(0,ey.c)(27),{filter:g,params:f,apiVersion:x}=e,b=`*[${g}][0...2000]`,y=x||l.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;h[0]!==y?(t={...l.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:y},h[0]=y,h[1]=t):t=h[1];let v=(0,l.useClient)(t);h[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},h[2]=n):n=h[2];let[j,w]=(0,i.useReducer)(at,n),[S,C]=(0,i.useState)(null!==v),[I,_]=(0,i.useState)(null);h[3]!==b||h[4]!==v||h[5]!==f?(r=async()=>{if(!v)return void C(!1);try{let e=await v.fetch(b,f);w({type:"DOCUMENTS_SET",documents:e}),C(!1)}catch(e){_(e)}},h[3]=b,h[4]=v,h[5]=f,h[6]=r):r=h[6];let T=r;h[7]!==T?(s=async e=>{if("welcome"===e.type&&(C(!0),await T(),C(!1)),"reconnect"===e.type&&C(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&w({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&w({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&w({type:"DOCUMENT_UPDATED",payload:t})}}},h[7]=T,h[8]=s):s=h[8];let R=s;e:{let e;if(!v){let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eQ.of)(),h[9]=e):e=h[9],a=e;break e}if(h[10]!==b||h[11]!==v.observable||h[12]!==f){let t;h[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(_(e),(0,eQ.of)(e)),h[14]=t):t=h[14],e=v.observable.listen(b,f,an).pipe((0,eL.catchError)(t)),h[10]=b,h[11]=v.observable,h[12]=f,h[13]=e}else e=h[13];a=e}let P=a;h[15]!==R||h[16]!==P?(d=()=>{let e=P.subscribe(R);return()=>{e?.unsubscribe()}},u=[R,P],h[15]=R,h[16]=P,h[17]=d,h[18]=u):(d=h[17],u=h[18]),(0,i.useEffect)(d,u),h[19]!==j.documents?(c=Object.keys(j.documents).reduce((e,t)=>{let n=j.documents[t],i=n._id===(0,o.getDraftId)(n._id),l=i?n._id:(0,o.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),h[19]=j.documents,h[20]=c):c=h[20];let E=c;h[21]!==E?(p=Object.values(E),h[21]=E,h[22]=p):p=h[22];let D=p;return h[23]!==D||h[24]!==I||h[25]!==S?(m={data:D,isLoading:S,error:I},h[23]=D,h[24]=I,h[25]=S,h[26]=m):m=h[26],m}(n);if(a[4]!==m||a[5]!==c){let e;a[7]!==c?(e=e=>c.has((0,o.getPublishedId)(e._id)),a[7]=c,a[8]=e):e=a[8],r=m.filter(e),a[4]=m,a[5]=c,a[6]=r}else r=a[6];let g=r;return a[9]!==g||a[10]!==h?(s={data:g,isLoading:h},a[9]=g,a[10]=h,a[11]=s):s=a[11],s}({typeName:e.name}),[u,c]=(0,i.useState)(null),p=r.result.hits.length,m=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=i.useState(()=>({current:function(e){var t,n;let i=[...ns,...null!=(t=e._features)?t:[]],l={_features:i},o=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),r={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;r=null!=(t=null==e.getInitialState?void 0:e.getInitialState(r))?t:r});let s=[],a=!1,d={_features:i,options:{...o,...e},initialState:r,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=tk(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(o,t):{...o,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:tA(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},tL(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:tA(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let o=function(e,t,n,i){var l,o;let r,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?r=s.accessorFn:a&&(r=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let u={id:`${String(d)}`,accessorFn:r,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:tA(()=>[!0],()=>{var e;return[u,...null==(e=u.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},tL(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:tA(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=u.columns)&&t.length?e(u.columns.flatMap(e=>e.getLeafColumns())):[u]},tL(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(u,e);return u}(l,e,i,n);return o.columns=e.columns?t(e.columns,o,i+1):[],o})};return t(e)},tL(e,"debugColumns","getAllColumns")),getAllFlatColumns:tA(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),tL(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:tA(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),tL(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:tA(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),tL(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[l,o]=i.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...l,...e.state},onStateChange:t=>{o(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:d,columns:s,getCoreRowModel:e=>tA(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,o){void 0===l&&(l=0);let r=[];for(let a=0;a<t.length;a++){let d=tB(e,e._getRowId(t[a],a,o),t[a],a,l,void 0,null==o?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,r.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return r};return n.rows=i(t),n},tL(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>tA(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,o,r,s,a,d,u,c,p,m;let h,g,f,x,b,y,v,j,w,S;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let C=[],I=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&C.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let _=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(_.push("__global__"),R.forEach(e=>{var t;I.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},C.length)for(let e=0;e<C.length;e++){let t=(h=C[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(I.length){for(let e=0;e<I.length;e++){let t=(g=I[e]).id;if(g.filterFn(n,t,g.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,o=e=>{for(let t=0;t<_.length;t++)if(!1===e.columnFilters[_[t]])return!1;return!0},e.options.filterFromLeafRows?(r=l,s=o,f=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let o=e[l],r=tB(a,o.id,o.original,o.index,o.depth,void 0,o.parentId);if(r.columnFilters=o.columnFilters,null!=(i=o.subRows)&&i.length&&t<b){if(r.subRows=y(o.subRows,t+1),s(o=r)&&!r.subRows.length||s(o)||r.subRows.length){n.push(o),x[o.id]=o,f.push(o);continue}}else s(o=r)&&(n.push(o),x[o.id]=o,f.push(o))}return n})(r),flatRows:f,rowsById:x}):(u=l,c=o,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(S=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let o=e[l];if(c(o)){var i;if(null!=(i=o.subRows)&&i.length&&t<w){let e=tB(p,o.id,o.original,o.index,o.depth,void 0,o.parentId);e.subRows=S(o.subRows,t+1),o=e}n.push(o),v.push(o),j[o.id]=o}}return n})(u),flatRows:v,rowsById:j})},tL(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>tA(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:o}=t,{rows:r,flatRows:s,rowsById:a}=n,d=l*o;if(r=r.slice(d,d+l),e.options.paginateExpandedRows)i={rows:r,flatRows:s,rowsById:a};else{var u;let e,t;u={rows:r,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},u.rows.forEach(t),i={rows:e,flatRows:u.flatRows,rowsById:u.rowsById}}i.flatRows=[];let c=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(c)};return i.rows.forEach(c),i},tL(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:a},getRowId:e=>e._id,meta:{selectedAnchor:u,setSelectedAnchor:c,patchDocument:(e,t,n)=>null}}),{rows:h}=m.getRowModel();(0,i.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let g=(0,i.useCallback)(e=>(0,n.jsx)(ev.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,n.jsx)(sQ,{...t},e.original._id+t.id))},e.original._id+e.id),[]),f=`Total: ${p} rows, showing ${h.length} rows`;return(0,n.jsxs)(ai,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,n.jsxs)(ev.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,n.jsxs)(ev.Flex,{direction:"row",align:"center",children:[(0,n.jsx)(s5,{}),(0,n.jsx)(ev.Text,{size:0,muted:!0,children:f})]}),(0,n.jsx)(s3,{table:m})]}),(0,n.jsx)(al,{children:(0,n.jsx)(sq,{table:m,children:(0,n.jsxs)(ao,{children:[(0,n.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,n.jsx)(ev.Box,{as:"tr",children:e.headers.map(t=>(0,n.jsx)(s9,{header:t,headerGroup:e},t.id))},e.id))}),(0,n.jsx)("tbody",{children:m.getRowModel().rows.map(g)})]})})}),(0,n.jsx)(ev.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,n.jsx)(ae,{table:m})})]})}function as(e){let t=(0,l.useSchema)(),i=e.pane.schemaTypeName,o=t.get(i);if(!o||!(0,ew.isDocumentSchemaType)(o))throw Error(`Schema type "${i}" not found or not a document schema`);return(0,n.jsx)(l.SearchProvider,{children:(0,n.jsx)(ar,{...e,documentSchemaType:o})})}function aa(e){let[t,n]=(0,i.useState)(e);return(0,ek.default)(t,e)?t:(n(e),e)}let ad=(0,i.memo)(function(e){let t,i,o,r,s,a,d,u,c,p=(0,ey.c)(36),{index:m,isSelected:h,pane:g,paneKey:f}=e,{name:x}=(0,l.useSource)(),{defaultLayout:b,initialValueTemplates:y,menuItemGroups:v,menuItems:j,options:w}=g,S=void 0===y?l.EMPTY_ARRAY:y,{defaultOrdering:C,filter:I}=w,_=void 0===C?l.EMPTY_ARRAY:C,T=aa(w.params||sT),R=g.source;e:{let e;p[0]!==I||p[1]!==T?(e=sF(I,T),p[0]=I,p[1]=T,p[2]=e):e=p[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let P=t,[E,D]=iP("layout",P??g.id,void 0===b?"default":b),{title:k}=(0,l.useI18nText)(g);p[3]!==_?(i=_?.length>0?{by:_}:s_,p[3]=_,p[4]=i):i=p[4];let M=i,[F,A]=iP("sort-order",P??g.id,M);p[5]!==E||p[6]!==j||p[7]!==F?(o=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:(0,eD.default)(n?.by,e?.params?.by||l.EMPTY_ARRAY)}:{...e,selected:!1})})({menuItems:j,sortOrderRaw:F,layout:E}),p[5]=E,p[6]=j,p[7]=F,p[8]=o):o=p[8];let L=o,V="sheetList"===E;p[9]!==V||p[10]!==E||p[11]!==e||p[12]!==F?(r=V?(0,n.jsx)(as,{...e},e.pane.id):(0,n.jsx)(sU,{...e,sortOrder:F,layout:E}),p[9]=V,p[10]=E,p[11]=e,p[12]=F,p[13]=r):r=p[13];let z=r,O=R||x;return p[14]!==V?(s=V?{}:{currentMaxWidth:350,maxWidth:640},p[14]=V,p[15]=s):s=p[15],p[16]!==g.source?(a=!1,p[16]=g.source,p[17]=a):a=p[17],p[18]!==m||p[19]!==S||p[20]!==v||p[21]!==L||p[22]!==D||p[23]!==A||p[24]!==k?(d=(0,n.jsx)(sG,{index:m,initialValueTemplates:S,menuItemGroups:v,menuItems:L,setLayout:D,setSortOrder:A,title:k}),p[18]=m,p[19]=S,p[20]=v,p[21]=L,p[22]=D,p[23]=A,p[24]=k,p[25]=d):d=p[25],p[26]!==h||p[27]!==f||p[28]!==z||p[29]!==d||p[30]!==s||p[31]!==a?(u=(0,n.jsxs)(nB,{"data-ui":"DocumentListPane",id:f,minWidth:320,...s,selected:h,children:[a,d,z]}),p[26]=h,p[27]=f,p[28]=z,p[29]=d,p[30]=s,p[31]=a,p[32]=u):u=p[32],p[33]!==u||p[34]!==O?(c=(0,n.jsx)(l.SourceProvider,{name:O,children:u}),p[33]=u,p[34]=O,p[35]=c):c=p[35],c});ad.displayName="Memo(PaneContainer)";let au=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};au.displayName="LiveEditBadge";let ac={activePanes:[]};function ap(e){ac.activePanes=e}function am(e,t,n,i){let l=n?.panes||[],o=ac.activePanes||[],r=t.id||(0,eS.uuid)();for(let n=o.length-1;n>=0;n--){let s=o[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let o=function(e,{template:t,version:n}){return"create"!==e?lD:t&&n?{template:t,version:n}:t?{template:t}:n?{version:n}:lD}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let ah=(0,eC.styled)(l.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,ag=(0,eC.styled)(ev.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function af(e){let t,o,r,s,a,d,u,c,p,m,h,g,f=(0,ey.c)(39),{showChanges:b}=e,{documentId:y,schemaType:v,timelineError:j,timelineStore:w,value:S}=im(),{selectedReleaseId:C}=(0,l.usePerspective)(),[I,_]=(0,i.useState)(null),T=(0,l.useTimelineSelector)(w,aw),R=(0,l.useTimelineSelector)(w,aj),P=(0,l.useTimelineSelector)(w,av),E=(0,l.useTimelineSelector)(w,ay),D=(0,l.useTimelineSelector)(w,ab),k="loading"===E,M=!P,{t:F}=(0,l.useTranslation)(x);f[0]!==R||f[1]!==y||f[2]!==M||f[3]!==v||f[4]!==S?(t={documentId:y,schemaType:v,FieldWrapper:ax,rootDiff:R,isComparingCurrent:M,value:S,showFromValue:!0},f[0]=R,f[1]=y,f[2]=M,f[3]=v,f[4]=S,f[5]=t):t=f[5];let A=t;if(C){let e;return f[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ev.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(ev.Card,{flex:1,padding:2,paddingTop:0,children:(0,n.jsx)(oV,{versionError:!0})})}),f[6]=e):e=f[6],e}return f[7]!==F?(o=F("changes.from.label"),f[7]=F,f[8]=o):o=f[8],f[9]!==o?(r=(0,n.jsx)(ev.Text,{size:1,muted:!0,children:o}),f[9]=o,f[10]=r):r=f[10],f[11]!==D?(s=(0,n.jsx)(oB,{mode:"since",chunk:D,placement:"bottom-start"}),f[11]=D,f[12]=s):s=f[12],f[13]!==F?(a=F("changes.to.label"),f[13]=F,f[14]=a):a=f[14],f[15]!==a?(d=(0,n.jsx)(ev.Text,{size:1,muted:!0,children:a}),f[15]=a,f[16]=d):d=f[16],f[17]!==T?(u=(0,n.jsx)(oB,{chunk:T,mode:"rev",placement:"bottom-end"}),f[17]=T,f[18]=u):u=f[18],f[19]!==r||f[20]!==s||f[21]!==d||f[22]!==u?(c=(0,n.jsx)(ev.Box,{padding:3,children:(0,n.jsxs)(ag,{paddingX:2,paddingBottom:2,children:[r,s,d,u]})}),f[19]=r,f[20]=s,f[21]=d,f[22]=u,f[23]=c):c=f[23],f[24]!==R||f[25]!==A||f[26]!==k||f[27]!==v||f[28]!==b||f[29]!==j?(p=b&&(0,n.jsx)(aS,{diff:R,documentContext:A,error:j,loading:k,schemaType:v}),f[24]=R,f[25]=A,f[26]=k,f[27]=v,f[28]=b,f[29]=j,f[30]=p):p=f[30],f[31]!==p?(m=(0,n.jsx)(ah,{"data-ui":"Scroller",ref:_,children:(0,n.jsx)(ev.Box,{flex:1,paddingX:3,height:"fill",children:p})}),f[31]=p,f[32]=m):m=f[32],f[33]!==I||f[34]!==m?(h=(0,n.jsx)(ev.Card,{flex:1,paddingX:2,paddingY:2,children:(0,n.jsx)(ev.BoundaryElementProvider,{element:I,children:m})}),f[33]=I,f[34]=m,f[35]=h):h=f[35],f[36]!==h||f[37]!==c?(g=(0,n.jsxs)(ev.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[c,h]}),f[36]=h,f[37]=c,f[38]=g):g=f[38],g}function ax(e){return(0,n.jsx)(l.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function ab(e){return e.sinceTime}function ay(e){return e.selectionState}function av(e){return e.onOlderRevision}function aj(e){return e.diff}function aw(e){return e.revTime}function aS(e){let t,i,o=(0,ey.c)(9),{error:s,diff:a,documentContext:d,loading:u,schemaType:c}=e;if(s){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.NoChanges,{}),o[0]=e):e=o[0],e}if(u){let e;return o[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.LoadingBlock,{showText:!0}),o[1]=e):e=o[1],e}if(!a){let e;return o[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.NoChanges,{}),o[2]=e):e=o[2],e}return o[3]!==a||o[4]!==c?(t=(0,n.jsx)(l.ChangeList,{diff:a,schemaType:c}),o[3]=a,o[4]=c,o[5]=t):t=o[5],o[6]!==d||o[7]!==t?(i=(0,n.jsx)(r.DocumentChangeContext.Provider,{value:d,children:t}),o[6]=d,o[7]=t,o[8]=i):i=o[8],i}function aC(e){let t,i,o,r,s,a,d,u,c=(0,ey.c)(27),{event:p,isSelected:m,onSelect:g,optionsMenu:f}=e,{t:x}=(0,l.useTranslation)("studio");c[0]!==p?(t=!(0,l.isDeleteDocumentVersionEvent)(p)&&!(0,l.isDeleteDocumentGroupEvent)(p)&&!(0,l.isUnpublishDocumentEvent)(p)&&!(0,l.isScheduleDocumentVersionEvent)(p)&&!(0,l.isUnscheduleDocumentVersionEvent)(p),c[0]=p,c[1]=t):t=c[1];let b=t;c[2]!==p||c[3]!==b||c[4]!==g?(i=e=>{e.preventDefault(),e.stopPropagation(),b&&g(p)},c[2]=p,c[3]=b,c[4]=g,c[5]=i):i=c[5];let y=i;c[6]!==b||c[7]!==x?(o=b?"":x("changes.not-selectable"),c[6]=b,c[7]=x,c[8]=o):o=c[8];let v=b?"button":"div",j=b?"pointer":"default";return c[9]!==j?(r={cursor:j,width:"100%"},c[9]=j,c[10]=r):r=c[10],c[11]!==p?(s=(0,n.jsx)(l.Event,{event:p,showChangesBy:"tooltip"}),c[11]=p,c[12]=s):s=c[12],c[13]!==p.timestamp||c[14]!==y||c[15]!==m||c[16]!==v||c[17]!==r||c[18]!==s?(a=(0,n.jsx)(ev.Card,{as:v,onClick:y,padding:2,pressed:m,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":p.timestamp,style:r,children:s}),c[13]=p.timestamp,c[14]=y,c[15]=m,c[16]=v,c[17]=r,c[18]=s,c[19]=a):a=c[19],c[20]!==b||c[21]!==o||c[22]!==a?(d=(0,n.jsx)(h.Tooltip,{content:o,disabled:b,children:a}),c[20]=b,c[21]=o,c[22]=a,c[23]=d):d=c[23],c[24]!==f||c[25]!==d?(u=(0,n.jsxs)(ev.Flex,{gap:1,children:[d,f]}),c[24]=f,c[25]=d,c[26]=u):u=c[26],u}function aI(e){let t,i,r,s,a,d,u,c,p,m,g,f=(0,ey.c)(42),{event:b}=e,{t:y}=(0,l.useTranslation)(x),{t:v}=(0,l.useTranslation)(),j=(0,ev.usePortal)(),{params:w,setParams:S}=i7(),C=(0,l.useSetPerspective)(),{document:I}=(0,l.useWorkspace)(),{drafts:_}=I,{enabled:T}=_;f[0]!==b.id||f[1]!==b.versionId||f[2]!==b.versionRevisionId||f[3]!==w||f[4]!==S?(t=()=>{S({...w,rev:b.versionRevisionId||"@lastPublished",since:void 0,historyEvent:b.id,historyVersion:(0,o.getVersionFromId)(b.versionId)})},f[0]=b.id,f[1]=b.versionId,f[2]=b.versionRevisionId,f[3]=w,f[4]=S,f[5]=t):t=f[5];let R=t;f[6]!==b.versionRevisionId||f[7]!==T||f[8]!==w||f[9]!==S||f[10]!==C?(i=()=>{S({...w,rev:b.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{C(T?"drafts":"published")},100)},f[6]=b.versionRevisionId,f[7]=T,f[8]=w,f[9]=S,f[10]=C,f[11]=i):i=f[11];let P=i;f[12]!==b.release?(r=e=>{let{children:t}=e;return(0,n.jsx)(l.VersionInlineBadge,{$tone:b.release?(0,l.isReleaseDocument)(b.release)?(0,l.getReleaseTone)(b.release):"default":void 0,children:t})},f[12]=b.release,f[13]=r):r=f[13];let E=r,D=b.release&&!(0,l.isReleaseDocument)(b.release),k=`timeline-item-menu-button-${b.versionId}`;f[14]!==y?(s=y("timeline-item.menu-button.aria-label"),f[14]=y,f[15]=s):s=f[15],f[16]!==b.release||f[17]!==D||f[18]!==y?(a=D?y("timeline-item.not-found-release.tooltip",{releaseId:b.release?._id?(0,l.getReleaseIdFromReleaseDocumentId)(b.release._id):void 0}):y("timeline-item.menu-button.tooltip"),f[16]=b.release,f[17]=D,f[18]=y,f[19]=a):a=f[19],f[20]!==a?(d={content:a},f[20]=a,f[21]=d):d=f[21],f[22]!==D||f[23]!==s||f[24]!==d?(u=(0,n.jsx)(l.ContextMenuButton,{"aria-label":s,tooltipProps:d,disabled:D}),f[22]=D,f[23]=s,f[24]=d,f[25]=u):u=f[25],f[26]!==E||f[27]!==b.release||f[28]!==b.versionRevisionId||f[29]!==P||f[30]!==R||f[31]!==y||f[32]!==v?(c=(0,n.jsx)(ev.Menu,{padding:1,children:b.release?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eP.IntentLink,{intent:l.RELEASES_INTENT,params:{id:(0,l.getReleaseIdFromReleaseDocumentId)(b.release._id)},style:{textDecoration:"none"},children:(0,n.jsx)(ev.MenuItem,{padding:3,children:(0,n.jsx)(ev.Flex,{align:"center",justify:"flex-start",children:(0,n.jsx)(ev.Text,{size:1,style:{textDecoration:"none"},children:(0,n.jsx)(l.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,n.jsx)(E,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})}),(0,n.jsx)(ev.MenuItem,{onClick:R,children:(0,n.jsx)(ev.Flex,{align:"center",justify:"flex-start",children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,n.jsx)(E,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})]}):(0,n.jsx)(ev.MenuItem,{onClick:P,disabled:!b.versionRevisionId,children:(0,n.jsx)(ev.Flex,{align:"center",children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{components:{VersionBadge:a_},i18nKey:"events.open.draft",t:y})})})})}),f[26]=E,f[27]=b.release,f[28]=b.versionRevisionId,f[29]=P,f[30]=R,f[31]=y,f[32]=v,f[33]=c):c=f[33];let M=!j.elements?.[oO]||oO;return f[34]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-end","bottom-start"],f[34]=p):p=f[34],f[35]!==M?(m={portal:M,placement:"bottom",fallbackPlacements:p},f[35]=M,f[36]=m):m=f[36],f[37]!==c||f[38]!==m||f[39]!==k||f[40]!==u?(g=(0,n.jsx)(h.MenuButton,{id:k,button:u,menu:c,popover:m}),f[37]=c,f[38]=m,f[39]=k,f[40]=u,f[41]=g):g=f[41],g}function a_(e){let{children:t}=e;return(0,n.jsx)(l.VersionInlineBadge,{$tone:"caution",children:t})}let aT=e_.motion.create(ev.Box),aR={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},aP=({events:e,hasMoreEvents:t,selectedEventId:o,onLoadMore:r,onSelect:s,listMaxHeight:a="calc(100vh - 280px)",fetchEventChildren:d})=>{let[u,c]=(0,i.useState)(!1),{t:p}=(0,l.useTranslation)("studio"),[m,h]=(0,i.useState)(()=>{if(o){let t=e.find(e=>e.id===o);if(t&&"parentId"in t&&t.parentId)return new Set([t.parentId])}return new Set}),[g,f]=(0,i.useState)(new Set),x=(0,i.useMemo)(()=>e.filter(t=>(0,l.isCreateDocumentVersionEvent)(t)&&t.parentId?e[e.length-1].id===t.id||m.has(t.parentId):!(0,l.isEditDocumentVersionEvent)(t)||!t.parentId||m.has(t.parentId)),[m,e]),b=(0,i.useCallback)(e=>async()=>{let t=e.id,n=!1;h(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(f(e=>{let n=new Set(e);return n.add(t),n}),await d(e),f(e=>{let n=new Set(e);return n.delete(t),n}))},[d,f]),y=(0,i.useCallback)(e=>{s(e)},[s]),v=(0,i.useCallback)(e=>{let t=(0,l.getDocumentVariantType)(e.documentId);return(0,l.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,n.jsx)(aI,{event:e}):(0,l.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,l.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,n.jsx)(oy,{isExpanded:m.has(e.id),onExpand:b(e)}):null},[m,b]),j=(0,i.useCallback)((e,{activeIndex:i})=>{let r=(0,l.isCreateDocumentVersionEvent)(e)&&e.parentId&&g.has(e.parentId),s=i===x.length-1;return r?(0,n.jsx)(aT,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,n.jsx)(ev.Flex,{align:"center",justify:"center",style:{height:57},children:(0,n.jsx)(ev.Spinner,{})})}):(0,n.jsxs)(aT,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?aR:void 0,paddingLeft:((0,l.isEditDocumentVersionEvent)(e)||(0,l.isCreateDocumentVersionEvent)(e))&&e.parentId&&!s?4:1,children:[(0,n.jsx)(aC,{event:e,isSelected:e.id===o,onSelect:y,optionsMenu:v(e)}),s&&t&&(0,n.jsx)(l.LoadingBlock,{})]},e.timestamp)},[g,o,y,v,x.length,t]);(0,i.useEffect)(()=>c(!0),[]);let w=x.findIndex(e=>e.id===o);return(0,n.jsx)(ow,{$visible:!w||u,"data-ui":"timeline",children:x.length>0?(0,n.jsx)(oj,{direction:"column",$maxHeight:a,id:"timeline-list-wrapper",children:(0,n.jsx)(l.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:w,initialScrollAlign:"center",itemHeight:57,items:x,onEndReached:r,onEndReachedIndexOffset:20,overscan:5,renderItem:j,wrapAround:!1})}):(0,n.jsxs)(ev.Stack,{padding:3,space:3,children:[(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,n.jsx)(ev.Text,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]})})};aP.displayName="EventsTimeline";let aE=(0,eC.styled)(h.Popover)`
  overflow: hidden;
  overflow: clip;
`,aD={timestamp:{dateStyle:"medium",timeStyle:"short"}};function ak({event:e,events:t,mode:o,placement:r}){let{setTimelineRange:s}=im(),[d,u]=(0,i.useState)(!1),[c,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(null),f=(0,ej.useToast)(),{nextCursor:x,loading:b,error:y,findRangeForRevision:v,findRangeForSince:j,loadMoreEvents:w,expandEvent:S}=(0,l.useEvents)(),{t:C}=(0,l.useTranslation)("studio"),I=(0,i.useCallback)(()=>{u(!0)},[]),_=(0,i.useCallback)(()=>{u(!1)},[]),T=(0,i.useCallback)(e=>{d&&("Escape"===e.key||"Tab"===e.key)&&(_(),c?.focus())},[c,_,d]);(0,ev.useGlobalKeyDown)(T),(0,ev.useClickOutsideEvent)(d&&_,()=>[c,m]);let R=(0,i.useCallback)(e=>{try{if((0,l.isDeleteDocumentVersionEvent)(e)||(0,l.isDeleteDocumentGroupEvent)(e)||(0,l.isUnpublishDocumentEvent)(e)||(0,l.isScheduleDocumentVersionEvent)(e)||(0,l.isUnscheduleDocumentVersionEvent)(e))return void console.error("Event is not selectable");let[t,n]=v(e?.id);s(t,n),_()}catch(e){f.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[C,f,s,v,_]),P=(0,i.useCallback)(e=>{try{let[t,n]=j(e.id);s(t,n),_()}catch(e){f.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[j,s,f,C,_]),E=(0,i.useCallback)(()=>{!b&&x&&w()},[b,w,x]),D=(0,i.useMemo)(()=>y?(0,n.jsx)(oV,{}):(0,n.jsx)(aP,{events:t,fetchEventChildren:S,hasMoreEvents:!!x,selectedEventId:e?.id,onLoadMore:E,onSelect:"rev"===o?R:P}),[y,o,S,t,x,e?.id,E,P,R]),k=e?C(l.TIMELINE_ITEM_I18N_KEY_MAPPING[e.documentVariantType][e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:aD}):C("timeline.latest-revision"),M=e?C(l.TIMELINE_ITEM_I18N_KEY_MAPPING[e.documentVariantType][e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:aD}):t.length>0?C("timeline.since-version-missing"):C("timeline.no-previous-events"),F="rev"===o?k:M,A=(0,i.useMemo)(()=>({"timeline-menu":m}),[m]);return(0,n.jsx)(ev.PortalProvider,{__unstable_elements:A,children:(0,n.jsx)(aE,{"data-testid":"timeline-menu",constrainSize:!0,content:d&&D,"data-ui":"versionMenu",open:d,placement:r,matchReferenceWidth:!0,portal:!0,ref:g,children:(0,n.jsx)(ev.Flex,{width:"fill",children:(0,n.jsx)(h.Button,{"data-testid":d?"timeline-menu-close-button":"timeline-menu-open-button",disabled:b||!t.length,mode:"ghost",onClick:d?_:I,ref:p,selected:d,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:a.ChevronDownIcon,text:b?C("timeline.loading-history"):F})})})})}let aM=(0,eC.styled)(l.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,aF=(0,eC.styled)(ev.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,aA=(0,eC.styled)(ev.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,aL={diff:null,loading:!0,error:null},aV=()=>{let e,t,i,o,s,a,d,u,c,p,m,h=(0,ey.c)(31),{documentId:g,schemaType:f,editState:b,displayed:y}=im(),{selectedPerspective:v,selectedPerspectiveName:j,selectedReleaseId:w}=(0,l.usePerspective)(),{t:S}=(0,l.useTranslation)(x);h[0]!==y||h[1]!==b?.published?(e=(0,eI.diffInput)((0,eI.wrap)(b?.published??{},{author:""}),(0,eI.wrap)(y??{},{author:""})),h[0]=y,h[1]=b?.published,h[2]=e):e=h[2];let C=e;return(!w||b?.version)&&("drafts"!==v||b?.draft)&&"published"!==j&&y?._rev?(h[3]!==S?(t=S("events.compare-with-published.title"),h[3]=S,h[4]=t):t=h[4],h[5]!==t?(i=(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:t}),h[5]=t,h[6]=i):i=h[6],h[7]!==v?(o=(0,l.isReleaseDocument)(v)?v.metadata?.title:"draft",h[7]=v,h[8]=o):o=h[8],h[9]!==o?(s={version:o},h[9]=o,h[10]=s):s=h[10],h[11]!==S||h[12]!==s?(a=(0,n.jsx)(ev.Text,{size:1,muted:!0,children:(0,n.jsx)(l.Translate,{i18nKey:"events.compare-with-published.description",t:S,values:s})}),h[11]=S,h[12]=s,h[13]=a):a=h[13],h[14]!==i||h[15]!==a?(d=(0,n.jsx)(ev.Card,{borderBottom:!0,paddingBottom:3,children:(0,n.jsxs)(ev.Stack,{space:3,paddingTop:1,children:[i,a]})}),h[14]=i,h[15]=a,h[16]=d):d=h[16],h[17]!==y||h[18]!==g||h[19]!==C||h[20]!==f?(u={documentId:g,schemaType:f,rootDiff:C,isComparingCurrent:!0,FieldWrapper:aH,value:y,showFromValue:!0},h[17]=y,h[18]=g,h[19]=C,h[20]=f,h[21]=u):u=h[21],h[22]!==C||h[23]!==f?(c=(0,n.jsx)(ev.Box,{paddingY:1,children:(0,n.jsx)(l.ChangeList,{diff:C,schemaType:f})}),h[22]=C,h[23]=f,h[24]=c):c=h[24],h[25]!==u||h[26]!==c?(p=(0,n.jsx)(r.DocumentChangeContext.Provider,{value:u,children:c}),h[25]=u,h[26]=c,h[27]=p):p=h[27],h[28]!==d||h[29]!==p?(m=(0,n.jsxs)(ev.Stack,{space:2,marginBottom:3,children:[d,p]}),h[28]=d,h[29]=p,h[30]=m):m=h[30],m):null};function az({showChanges:e}){let{documentId:t,schemaType:o,timelineError:r,value:s,formState:a}=im(),[d,u]=(0,i.useState)(null),{events:c,revision:p,sinceRevision:m,getChangesList:h}=(0,l.useEvents)(),g=!p?.revisionId,f=(0,i.useMemo)(()=>h(),[h]),{diff:x,loading:b,error:y}=(0,eR.useObservable)(f,aL),{t:v}=(0,l.useTranslation)("studio"),j=(0,i.useMemo)(()=>({documentId:t,schemaType:o,FieldWrapper:e=>e.path.length>0?(0,n.jsx)(l.ChangeFieldWrapper,{...e}):e.children,rootDiff:x,isComparingCurrent:g&&!a?.readOnly,value:s,showFromValue:!0}),[x,t,g,a?.readOnly,o,s]),[w,S]=(0,i.useMemo)(()=>c?[c.find(e=>e.id===m?.revisionId)||null,c.find(e=>e.id===p?.revisionId)||c[0]]:[null,null],[c,p?.revisionId,m?.revisionId]),C=(0,i.useMemo)(()=>S?c.slice(c.indexOf(S)+1).map(e=>"parentId"in S&&"parentId"in e&&e.parentId===S.parentId||"parentId"in e&&S.id===e.parentId?{...e,parentId:void 0}:e):c.slice(1),[c,S]);return c.length?(0,n.jsxs)(ev.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,n.jsxs)(ev.Box,{padding:3,style:{position:"relative"},children:[(0,n.jsxs)(aF,{paddingX:2,paddingBottom:2,children:[(0,n.jsx)(ev.Text,{size:1,muted:!0,children:v("changes.inspector.from-label")}),(0,n.jsx)(ak,{event:w||null,events:C,mode:"since",placement:"bottom-start"}),(0,n.jsx)(ev.Text,{size:1,muted:!0,children:v("changes.inspector.to-label")}),(0,n.jsx)(ak,{event:S||null,events:c,mode:"rev",placement:"bottom-end"})]}),b&&(0,n.jsx)(e_.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,n.jsxs)(aA,{justify:"center",align:"center",gap:2,children:[(0,n.jsx)(ev.Text,{muted:!0,size:0,children:v("changes.loading-changes")}),(0,n.jsx)(ev.Spinner,{size:0})]})})]}),(0,n.jsx)(ev.Card,{flex:1,paddingX:2,paddingY:2,children:(0,n.jsx)(ev.BoundaryElementProvider,{element:d,children:(0,n.jsx)(aM,{"data-ui":"Scroller",ref:u,children:(0,n.jsx)(ev.Box,{flex:1,paddingX:3,height:"fill",children:e&&(0,n.jsx)(aO,{documentContext:j,error:r||y,loading:p?.loading||m?.loading||!1,schemaType:o,sameRevisionSelected:w?.id===S?.id,sinceEvent:w})})})})})]}):(0,n.jsx)(ev.Box,{paddingX:2,children:(0,n.jsxs)(ev.Stack,{padding:3,space:3,children:[(0,n.jsx)(ev.Text,{size:1,weight:"medium",children:v("timeline.error.no-document-history-title")}),(0,n.jsx)(ev.Text,{muted:!0,size:1,children:v("timeline.error.no-document-history-description")})]})})}function aO(e){let t,i,o=(0,ey.c)(15),{error:s,documentContext:a,loading:d,schemaType:u,sameRevisionSelected:c,sinceEvent:p}=e;if(s){let e,t,i;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(aV,{}),o[0]=e):e=o[0],o[1]!==s||o[2]!==p?.type?(t=p?.type!=="historyCleared"&&(0,n.jsx)(l.ChangesError,{error:s}),o[1]=s,o[2]=p?.type,o[3]=t):t=o[3],o[4]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),o[4]=t,o[5]=i):i=o[5],i}if(d){let e;return o[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.LoadingBlock,{showText:!0}),o[6]=e):e=o[6],e}if(c){let e;return o[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(aB,{}),o[7]=e):e=o[7],e}if(!a.rootDiff){let e;return o[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(e_.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,n.jsx)(l.NoChanges,{})}),o[8]=e):e=o[8],e}return o[9]!==a.rootDiff||o[10]!==u?(t=(0,n.jsx)(ev.Box,{paddingY:1,children:(0,n.jsx)(l.ChangeList,{diff:a.rootDiff,schemaType:u})}),o[9]=a.rootDiff,o[10]=u,o[11]=t):t=o[11],o[12]!==a||o[13]!==t?(i=(0,n.jsx)(r.DocumentChangeContext.Provider,{value:a,children:t}),o[12]=a,o[13]=t,o[14]=i):i=o[14],i}function aB(){let e,t,i,o,r,s,a,d=(0,ey.c)(12),{t:u}=(0,l.useTranslation)("");return d[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},i={delay:.2,duration:.2},d[0]=e,d[1]=t,d[2]=i):(e=d[0],t=d[1],i=d[2]),d[3]!==u?(o=u("changes.same-revision-selected-title"),d[3]=u,d[4]=o):o=d[4],d[5]!==o?(r=(0,n.jsx)(ev.Text,{size:1,weight:"medium",as:"h3",children:o}),d[5]=o,d[6]=r):r=d[6],d[7]!==u?(s=(0,n.jsx)(ev.Text,{as:"p",size:1,muted:!0,children:(0,n.jsx)(l.Translate,{i18nKey:"changes.same-revision-selected-description",t:u})}),d[7]=u,d[8]=s):s=d[8],d[9]!==r||d[10]!==s?(a=(0,n.jsx)(e_.motion.div,{animate:e,initial:t,transition:i,children:(0,n.jsxs)(ev.Stack,{space:3,paddingTop:2,children:[r,s]})}),d[9]=r,d[10]=s,d[11]=a):a=d[11],a}function aH(e){return e.children}let aN=(0,eC.styled)(l.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function a$({showList:e}){let[t,o]=(0,i.useState)(null),[r,s]=(0,i.useState)(0),{setTimelineRange:a}=im(),d=(0,i.useCallback)(e=>{!r&&e&&(s(e.clientHeight?e.clientHeight-1:0),o(e))},[r]),{events:u,nextCursor:c,loading:p,error:m,revision:h,loadMoreEvents:g,findRangeForRevision:f,expandEvent:x}=(0,l.useEvents)(),{t:b}=(0,l.useTranslation)("studio"),y=(0,ej.useToast)(),v=(0,i.useCallback)(e=>{try{if((0,l.isDeleteDocumentVersionEvent)(e)||(0,l.isDeleteDocumentGroupEvent)(e)||(0,l.isUnpublishDocumentEvent)(e)||(0,l.isScheduleDocumentVersionEvent)(e)||(0,l.isUnscheduleDocumentVersionEvent)(e))return void console.error("Event is not selectable");let[t,n]=f(e.id);a(t,n)}catch(e){y.push({closable:!0,description:e.message,status:"error",title:b("timeline.error.unable-to-load-revision")})}},[b,y,a,f]),j=p&&!u.length;return(0,n.jsx)(ev.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(ev.Card,{flex:1,padding:2,paddingTop:0,children:m?(0,n.jsx)(oV,{}):(0,n.jsx)(ev.BoundaryElementProvider,{element:t,children:(0,n.jsxs)(aN,{"data-ui":"Scroller",ref:d,children:[r&&e&&!j?(0,n.jsx)(aP,{events:u,fetchEventChildren:x,hasMoreEvents:!!c,selectedEventId:h?.revisionId||u[0]?.id,onLoadMore:g,onSelect:v,listMaxHeight:`${r}px`}):null,p&&(0,n.jsx)(l.LoadingBlock,{})]})})})})}let aU=(0,eC.styled)(l.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function aG({showList:e}){let{timelineError:t,setTimelineRange:o,timelineStore:r}=im(),{selectedReleaseId:s}=(0,l.usePerspective)(),[a,d]=(0,i.useState)(null),[u,c]=(0,i.useState)(0),p=(0,i.useCallback)(e=>{e?.clientHeight&&(c(e.clientHeight-1),d(e))},[]),m=(0,l.useTimelineSelector)(r,e=>e.chunks),h=(0,l.useTimelineSelector)(r,e=>e.realRevChunk),g=(0,l.useTimelineSelector)(r,e=>e.hasMoreChunks),f=(0,l.useTimelineSelector)(r,e=>e.isLoading),{t:x}=(0,l.useTranslation)("studio"),b=(0,ej.useToast)(),y=(0,i.useCallback)(e=>{try{let[t,n]=r?.findRangeForRev(e)||[null,null];o(t,n)}catch(e){b.push({closable:!0,description:e.message,status:"error",title:x("timeline.error.unable-to-load-revision")})}},[o,x,r,b]),v=(0,i.useCallback)(()=>{f||r?.loadMore()},[f,r]);return(0,n.jsx)(ev.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(ev.Card,{flex:1,padding:2,paddingTop:0,children:t||s?(0,n.jsx)(oV,{versionError:!!s}):(0,n.jsx)(ev.BoundaryElementProvider,{element:a,children:(0,n.jsx)(aU,{"data-ui":"Scroller",ref:p,children:u&&e?(0,n.jsx)(oL,{chunks:m,hasMoreChunks:g,lastChunk:h,onLoadMore:v,onSelect:y,listMaxHeight:`${u}px`}):null})})})})}let aW=(0,eC.styled)(ev.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,aq=["history","review"],aK={error:a.ErrorOutlineIcon,warning:a.WarningOutlineIcon,info:a.InfoOutlineIcon},aY={error:"critical",warning:"caution",info:"primary"};function aX(e){let t,l,o,r,s=(0,ey.c)(17),{marker:a,onOpen:d,schemaType:u,value:c}=e;s[0]!==a.path||s[1]!==d?(t=()=>d(a.path),s[0]=a.path,s[1]=d,s[2]=t):t=s[2];let p=t,[m,g]=(0,i.useState)(null),f=aK[a.level];return s[3]!==m?(l=m&&(0,n.jsx)(ev.Card,{padding:3,radius:2,tone:"critical",children:(0,n.jsx)(ev.Text,{size:1,children:m.error.message})}),s[3]=m,s[4]=l):l=s[4],s[5]!==f||s[6]!==m||s[7]!==p||s[8]!==a.level||s[9]!==a.message||s[10]!==a.path||s[11]!==u||s[12]!==c?(o=!m&&(0,n.jsx)(ev.Card,{__unstable_focusRing:!0,as:"button",onClick:p,padding:3,radius:2,tone:aY[a.level],children:(0,n.jsxs)(ev.Flex,{align:"flex-start",gap:3,children:[(0,n.jsx)(ev.Box,{flex:"none",children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(f,{})})}),(0,n.jsxs)(ev.Stack,{flex:1,space:2,children:[(0,n.jsx)(aQ,{path:a.path,schemaType:u,value:c}),(0,n.jsx)(ev.Text,{muted:!0,size:1,children:a.message})]})]})}),s[5]=f,s[6]=m,s[7]=p,s[8]=a.level,s[9]=a.message,s[10]=a.path,s[11]=u,s[12]=c,s[13]=o):o=s[13],s[14]!==l||s[15]!==o?(r=(0,n.jsxs)(h.ErrorBoundary,{onCatch:g,children:[l,o]}),s[14]=l,s[15]=o,s[16]=r):r=s[16],r}function aQ(e){let{path:t,schemaType:o,value:r}=e,s=(0,i.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,o=[],r=n,s=i;for(let e of t){if("string"==typeof e){if(!(0,l.isRecord)(s)&&void 0!==s)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==r.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);s=s?.[e];let t=r.fields.find(t=>t.name===e);if(!t)return o.push({name:e}),o;r=t.type,o.push(r);continue}if("number"==typeof e){if(!(0,l.isArray)(s)&&void 0!==s)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);s=s?.[e];let t=r.of.find(e=>"string"==typeof s?"string"===e.jsonType:"number"==typeof s?"number"===e.jsonType:"boolean"==typeof s?"boolean"===e.jsonType:!!(0,l.isRecord)(s)&&e.name===s?._type);if(!t)throw Error(`Item type not found: [${e}]`);r=t,o.push(r);continue}if((0,l.isRecord)(e)&&e._key){if(typeof s>"u")return o;if(!(0,l.isArray)(s))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(s=(s??[]).find(t=>(0,l.isRecord)(t)&&t._key===e._key))>"u")return o;if(!(0,l.isRecord)(s))throw Error(`Array item not found: [_key == ${e._key}]`);let t=r.of.find(e=>(0,l.isRecord)(s)&&e.name===s?._type);if(!t)throw Error(`Array item type not found: .${s?._type}`);r=t,o.push(r);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return o}({path:t,schemaType:o,value:r})}catch(e){console.error(e)}return null},[t,o,r]);return s?.length?(0,n.jsx)(ev.Text,{size:1,children:s.map((e,t)=>(0,n.jsxs)(i.Fragment,{children:[t>0&&(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,n.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let aJ={},aZ=eP.route.create("/",[eP.route.intents("/intent"),eP.route.create("/edit/:type/:editDocumentId",[eP.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),eP.route.create({path:"/:panes",children:[eP.route.create("/:action",eP.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(a0)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:aJ,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,eP.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,eE.default)(t.params,a1),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(a3).join("|")).map(encodeURIComponent).join(";")}}}})]),a0=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,a1=["view","since","rev","inspect","comment"],a2=Boolean;function a3(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,s=e===r,a=0!==t&&o===r.id,d=typeof i>"u"?void 0:(0,eP.encodeJsonParams)(i),u=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===r.params?.[t]&&!a1.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":o].concat([u.length>0&&u,d].filter(a2).flat()).join(",")||","}let a4=[l4,l6,lY,lQ,lq,lJ],a5=[au],a6=[{name:"sanity/structure/validation",component:function(e){let t,i,o,r,s,a,d,u=(0,ey.c)(23),{onClose:c}=e,{onFocus:p,onPathOpen:m,schemaType:h,validation:g,value:f,editState:x}=im(),{t:b}=(0,l.useTranslation)("validation");u[0]!==p||u[1]!==m?(t=e=>{m(e),p(e)},u[0]=p,u[1]=m,u[2]=t):t=u[2];let y=t;u[3]!==x?(i=x&&x.version&&(0,l.isGoingToUnpublish)(x.version),u[3]=x,u[4]=i):i=u[4];let v=i;return u[5]!==b?(o=b("panel.close-button-aria-label"),u[5]=b,u[6]=o):o=u[6],u[7]!==b?(r=b("panel.title"),u[7]=b,u[8]=r):r=u[8],u[9]!==c||u[10]!==o||u[11]!==r?(s=(0,n.jsx)(iT,{as:"header",closeButtonLabel:o,flex:"none",onClose:c,title:r}),u[9]=c,u[10]=o,u[11]=r,u[12]=s):s=u[12],u[13]!==y||u[14]!==v||u[15]!==h||u[16]!==b||u[17]!==g||u[18]!==f?(a=(0,n.jsx)(ev.Card,{flex:1,overflow:"auto",padding:3,children:v?(0,n.jsx)(ev.Box,{padding:2,children:(0,n.jsx)(ev.Text,{muted:!0,size:1,children:b("panel.unpublish-message")})}):(0,n.jsxs)(n.Fragment,{children:[0===g.length&&(0,n.jsx)(ev.Box,{padding:2,children:(0,n.jsx)(ev.Text,{muted:!0,size:1,children:b("panel.no-errors-message")})}),g.length>0&&(0,n.jsx)(ev.Stack,{space:2,children:g.map((e,t)=>(0,n.jsx)(aX,{marker:e,onOpen:y,schemaType:h,value:f},t))})]})}),u[13]=y,u[14]=v,u[15]=h,u[16]=b,u[17]=g,u[18]=f,u[19]=a):a=u[19],u[20]!==s||u[21]!==a?(d=(0,n.jsxs)(ev.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[s,a]}),u[20]=s,u[21]=a,u[22]=d):d=u[22],d},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:o}=(0,l.useTranslation)("validation"),{selectedReleaseId:r}=(0,l.usePerspective)(),{validation:s}=(0,l.useValidationStatus)(t,n,r),{value:d}=im(),u=(0,i.useMemo)(()=>s.map(e=>({level:e.level,message:e.message,path:e.path})),[s]),c=u.some(ew.isValidationError),p=u.some(ew.isValidationWarning),m=(0,l.isGoingToUnpublish)(d),h=(0,i.useMemo)(()=>c?a.ErrorOutlineIcon:p?a.WarningOutlineIcon:a.CheckmarkCircleIcon,[c,p]),g=(0,i.useMemo)(()=>c?"critical":p?"caution":"positive",[c,p]);return{hidden:0===u.length||m,icon:h,title:o("panel.title"),tone:g,showAsAction:!0}}},{name:ij,useMenuItem:()=>{let{features:e}=ix(),{t}=(0,l.useTranslation)();return{hidden:!e.reviewChanges,icon:a.RestoreIcon,title:t("changes.title")}},component:function(e){let t,o,r,s,d,u,c,p,m,g,f,b,y,v,j,w,S,C,I,_,T,R,P,E,D,k,M,F=(0,ey.c)(72),{params:A,setParams:L}=i7(),V=(0,l.useSource)(),[z,O]=(0,i.useState)(null),{t:B}=(0,l.useTranslation)(x),H=A?.inspect===ij,{selectedPerspective:N}=(0,l.usePerspective)();F[0]!==A?(t=(M=A?.changesInspectorTab)&&aq.includes(M)?A.changesInspectorTab:aq[0],F[0]=A,F[1]=t):t=F[1];let $=t;F[2]!==A||F[3]!==L?(o=e=>L({...A,changesInspectorTab:e,since:"history"===e?void 0:A?.since}),F[2]=A,F[3]=L,F[4]=o):o=F[4];let U=o;F[5]!==N||F[6]!==B?(r=(0,l.isReleaseDocument)(N)?N.metadata.title:B("drafts"===N?"compare-versions.status.draft":"compare-versions.status.published"),F[5]=N,F[6]=B,F[7]=r):r=F[7];let G=r,W=H?"":void 0;F[8]!==B?(s=B("changes.tab.history"),F[8]=B,F[9]=s):s=F[9],F[10]!==U?(d=()=>U("history"),F[10]=U,F[11]=d):d=F[11];let q="history"===$;F[12]!==s||F[13]!==d||F[14]!==q?(u=(0,n.jsx)(h.Tab,{"aria-controls":"history-panel",id:"history-tab",label:s,onClick:d,selected:q}),F[12]=s,F[13]=d,F[14]=q,F[15]=u):u=F[15],F[16]!==B?(c=B("changes.tab.review-changes"),F[16]=B,F[17]=c):c=F[17],F[18]!==U?(p=()=>U("review"),F[18]=U,F[19]=p):p=F[19];let K="review"===$;F[20]!==K||F[21]!==c||F[22]!==p?(m=(0,n.jsx)(h.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:c,onClick:p,selected:K}),F[20]=K,F[21]=c,F[22]=p,F[23]=m):m=F[23],F[24]!==m||F[25]!==u?(g=(0,n.jsxs)(ev.TabList,{space:1,flex:1,children:[u,m]}),F[24]=m,F[25]=u,F[26]=g):g=F[26],F[27]!==B?(f=B("changes.action.close-label"),F[27]=B,F[28]=f):f=F[28];let Y=e.onClose;F[29]!==B?(b=B("document-inspector.close-button.tooltip"),F[29]=B,F[30]=b):b=F[30],F[31]!==b?(y={content:b},F[31]=b,F[32]=y):y=F[32],F[33]!==e.onClose||F[34]!==f||F[35]!==y?(v=(0,n.jsx)(h.Button,{"aria-label":f,icon:a.CloseIcon,mode:"bleed",onClick:Y,tooltipProps:y}),F[33]=e.onClose,F[34]=f,F[35]=y,F[36]=v):v=F[36],F[37]!==g||F[38]!==v?(j=(0,n.jsx)(ev.Card,{paddingBottom:1,children:(0,n.jsxs)(ev.Flex,{align:"center",padding:3,gap:2,children:[g,v]})}),F[37]=g,F[38]=v,F[39]=j):j=F[39],F[40]!==B?(w=(0,n.jsx)(ev.Box,{flex:1,padding:1,children:(0,n.jsx)(ev.Text,{size:1,children:(0,n.jsx)(l.Translate,{t:B,i18nKey:"changes.banner.tooltip"})})}),F[40]=B,F[41]=w):w=F[41],F[42]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)(ev.Text,{size:0,muted:!0,children:(0,n.jsx)(a.InfoOutlineIcon,{fontSize:1})}),F[42]=S):S=F[42],F[43]!==z||F[44]!==w?(C=(0,n.jsx)(h.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:z,content:w,children:S}),F[43]=z,F[44]=w,F[45]=C):C=F[45],F[46]!==G?(I={perspective:G},F[46]=G,F[47]=I):I=F[47],F[48]!==B||F[49]!==I?(_=(0,n.jsx)(ev.Text,{size:0,muted:!0,children:(0,n.jsx)(l.Translate,{t:B,values:I,i18nKey:"changes.banner.description"})}),F[48]=B,F[49]=I,F[50]=_):_=F[50],F[51]!==C||F[52]!==_?(T=(0,n.jsx)(ev.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,n.jsxs)(ev.Flex,{gap:2,align:"flex-start",children:[C,_]})}),F[51]=C,F[52]=_,F[53]=T):T=F[53];let X="history"!==$;F[54]!==$||F[55]!==V.beta?.eventsAPI?.documents?(R=V.beta?.eventsAPI?.documents?(0,n.jsx)(a$,{showList:"history"===$}):(0,n.jsx)(aG,{showList:"history"===$}),F[54]=$,F[55]=V.beta?.eventsAPI?.documents,F[56]=R):R=F[56],F[57]!==X||F[58]!==R?(P=(0,n.jsx)(ej.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:X,id:"history-panel",children:R}),F[57]=X,F[58]=R,F[59]=P):P=F[59];let Q="review"!==$;return F[60]!==$||F[61]!==V.beta?.eventsAPI?.documents?(E=V.beta?.eventsAPI?.documents?(0,n.jsx)(n.Fragment,{children:"review"===$?(0,n.jsx)(az,{showChanges:"review"===$}):null}):(0,n.jsx)(af,{showChanges:"review"===$}),F[60]=$,F[61]=V.beta?.eventsAPI?.documents,F[62]=E):E=F[62],F[63]!==Q||F[64]!==E?(D=(0,n.jsx)(ej.TabPanel,{"aria-labelledby":"review-tab",hidden:Q,id:"review-panel",height:"fill",children:E}),F[63]=Q,F[64]=E,F[65]=D):D=F[65],F[66]!==j||F[67]!==T||F[68]!==P||F[69]!==W||F[70]!==D?(k=(0,n.jsxs)(aW,{direction:"column",padding:0,height:"fill","data-ready":W,ref:O,children:[j,T,P,D]}),F[66]=j,F[67]=T,F[68]=P,F[69]=W,F[70]=D,F[71]=k):k=F[71],k},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],a8=(0,l.definePlugin)(t=>{let n=t?.icon||a.MasterDetailIcon;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...a4])),badges:e=>Array.from(new Set([...e,...a5])),inspectors:e=>Array.from(new Set([...e,...a6]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,i.lazy)(()=>e.A(471767)),canHandleIntent:(e,t)=>{var n,i;return"create"===e?"type"in(n=t)&&(!("template"in n)||{template:!0}):"edit"===e&&"id"in(i=t)&&(!("mode"in i)||{mode:"structure"===i.mode})},getIntentState:am,controlsDocumentTitle:!0,options:t,router:aZ,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[b]}}});var a7=Object.freeze({__proto__:null,default:rA}),a9=Object.freeze({__proto__:null,default:ad});e.s(["BackLink",()=>rO,"ConfirmDeleteDialogContainer",()=>ss,"DocumentInspectorHeader",()=>iT,"DocumentPane",()=>rA,"DocumentPaneProviderWrapper",()=>rF,"LOADING_PANE",()=>lk,"LoadingPane",()=>ip,"Pane",()=>nB,"PaneContainer",()=>ad,"PaneContent",()=>n$,"PaneHeader",()=>n8,"PaneHeaderActions",()=>sf,"PaneItem",()=>sv,"PaneLayout",()=>ir,"StructureToolPane",()=>rK,"_DEBUG",()=>!1,"setActivePanes",()=>ap,"structureTool",()=>a8,"useDocumentLastRev",()=>rf,"useDocumentPane",()=>im,"useDocumentTitle",()=>iS,"usePane",()=>nN,"usePaneLayout",()=>nL,"usePaneRouter",()=>i7,"useStructureTool",()=>ix],923064)}]);